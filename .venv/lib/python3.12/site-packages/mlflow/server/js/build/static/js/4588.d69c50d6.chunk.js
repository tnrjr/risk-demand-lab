"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4588],{3679:function(e,t,o){o.d(t,{M:function(){return b}});var r=o(89555),n=o(59403),a=o(68048),i=o(23823),s=o(70169),l=o(88464),d=o(31014),c=o(96070),u=o(6604),m=o(88443),p=o(9133),g=o(28380),h=o(50111);const f="tooltipLastPopup";var v={name:"c61v0h",styles:".du-bois-light-select-item-option-active:not(.du-bois-light-select-item-option-disabled){background-color:#e6f1f5;}"},y={name:"9gxvqt",styles:"display:flex;gap:4px;align-items:center"};const b=({baseOptions:e,searchFilter:t,requestError:o=null,onSearchFilterChange:b,onClear:C,tooltipContent:S,placeholder:w,useQuickFilter:D,defaultActiveFirstOption:M=!0,className:Y})=>{const{theme:_,getPrefixedClassName:x}=(0,n.u)(),A=(0,d.useRef)(null),R=(0,l.A)(),[I,B]=(0,d.useState)(""),[k,F]=(0,d.useState)(void 0),[E,T]=(0,d.useState)(!1),[L,N]=(0,d.useState)(!1),[z,H]=(0,d.useState)({Metrics:10,Parameters:10,Tags:10}),K=(0,d.useRef)([]),[O,$]=(0,d.useState)(void 0);(0,d.useEffect)((()=>{B(t)}),[t]),(0,d.useEffect)((()=>{const e=K.current,t=(0,c.jP)(I);if(K.current=t,L)return void N(!1);const o=t.map((e=>e.name)),r=e.map((e=>e.name));if(!(0,p.isEqual)(o,r)&&t.length>=e.length){let o=0;for(;o<t.length;){if(o>=e.length||t[o].name.trim()!==e[o].name.trim())return F(!0),void $(t[o]);o++}}F(!1)}),[I]);const q=(0,d.useMemo)((()=>O?(0,c.M8)(e,O,z):[]),[e,O,z]),P=(0,d.useCallback)(((e,t)=>{if(O)if(e.startsWith("...")){F(!0);const e=t.value.split("_")[1];H((t=>({...t,[e]:t[e]+10})))}else{const t=I.substring(0,O.startIndex),o=I.substring(O.endIndex);B(t+e+" "+o),N(!0),F(!1)}}),[I,B,O,F]),U=(0,g.S)(f),[V,W]=(0,d.useState)((()=>{const e=Math.floor(Date.now()/1e3),t=U.getItem(f);return!t||parseInt(t,10)<e-604800})),Q=d.useRef(null),G=(0,d.useMemo)((()=>{if(D&&I.length>0&&!(0,u.cK)(I))return(0,u.jA)(I)}),[I,D]);(0,d.useEffect)((()=>{if(o&&V){var e;const t=Math.floor(Date.now()/1e3);U.setItem(f,t),W(!1),null===(e=Q.current)||void 0===e||e.click()}}),[o]);const j=0===q.flatMap((e=>e.options)).length,X=k&&E&&!j,J=(0,d.useCallback)((e=>{var t;const o=x("select-item-option-active"),r=Boolean(null===(t=A.current)||void 0===t?void 0:t.querySelector(`.${o}`));"Enter"===e.key&&(X&&F(!1),X&&r||b(I)),"Escape"===e.key&&(e.preventDefault(),X&&F(!1))}),[X,I,b,x]);return(0,h.Y)("div",{css:(0,r.AH)({display:"flex",gap:_.spacing.sm,width:430,[_.responsive.mediaQueries.xs]:{width:"auto"}},""),className:Y,children:(0,h.Y)(a.AutoComplete,{dropdownMatchSelectWidth:560,css:(0,r.AH)({width:560,[_.responsive.mediaQueries.xs]:{width:"auto"}},""),defaultOpen:!1,defaultActiveFirstOption:M&&!D,open:X,options:q,onSelect:P,value:I,"data-testid":"runs-search-autocomplete",dropdownRender:e=>(0,h.Y)("div",{css:v,ref:A,children:e}),children:(0,h.Y)(s.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_236",value:I,prefix:(0,h.Y)(s.S,{css:(0,r.AH)({svg:{width:_.general.iconFontSize,height:_.general.iconFontSize,color:_.colors.textSecondary}},"")}),onKeyDown:J,onClick:()=>T(!0),onBlur:()=>T(!1),onChange:e=>B(e.target.value),placeholder:w,"data-testid":"search-box",suffix:(0,h.FD)("div",{css:y,children:[I&&(0,h.Y)(n.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_212",onClick:()=>{C(),B("")},type:"link","data-testid":"clear-button",children:(0,h.Y)(n.C,{})}),G?(0,h.Y)(i.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_310",content:(0,h.Y)(m.A,{id:"ESmLOR",defaultMessage:"Using regular expression quick filter. The following query will be used: {filterSample}",values:{filterSample:(0,h.Y)("div",{children:(0,h.Y)("code",{children:G})})}}),delayDuration:0,children:(0,h.Y)(a.InfoFillIcon,{"aria-label":R.formatMessage({id:"ESmLOR",defaultMessage:"Using regular expression quick filter. The following query will be used: {filterSample}"},{filterSample:G}),css:(0,r.AH)({svg:{width:_.general.iconFontSize,height:_.general.iconFontSize,color:_.colors.actionPrimaryBackgroundDefault}},"")})}):(0,h.Y)(a.LegacyTooltip,{title:S,placement:"right",dangerouslySetAntdProps:{overlayInnerStyle:{width:"150%"},trigger:["focus","click"]},children:(0,h.Y)(n.B,{size:"small",ref:Q,componentId:"mlflow.experiment_page.search_filter.tooltip",type:"link",css:(0,r.AH)({marginLeft:-_.spacing.xs,marginRight:-_.spacing.xs},""),icon:(0,h.Y)(i.I,{css:(0,r.AH)({svg:{width:_.general.iconFontSize,height:_.general.iconFontSize,color:_.colors.textSecondary}},"")})})})]})})})})}},28380:function(e,t,o){o.d(t,{S:function(){return a}});var r=o(31014),n=o(32614);const a=e=>(0,r.useMemo)((()=>n.A.getStoreForComponent("ExperimentView",e)),[e])},39771:function(e,t,o){o.d(t,{b:function(){return n}});var r=o(31014);function n(e){const t=(0,r.useRef)(null),[o,n]=(0,r.useState)(void 0),a=(0,r.useCallback)((()=>{t.current&&n(t.current.clientWidth)}),[]);(0,r.useLayoutEffect)((()=>(a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a))),[a]);return{resizableMaxWidth:void 0===o?void 0:o-e,ref:(0,r.useCallback)((e=>{t.current=e,a()}),[a])}}},42550:function(e,t,o){o.d(t,{t:function(){return u}});var r=o(89555),n=o(59403),a=o(31014),i=o(15230),s=o(21879),l=o(50111);var d={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},c={name:"5ob2ly",styles:"display:flex;position:relative"};const u=({runListHidden:e,width:t,onResize:o,children:n,onHiddenChange:u,maxWidth:p})=>{const g=(0,s.e)(),[h,f]=(0,a.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.Y)(i.ResizableBox,{css:c,style:{flex:`0 0 ${e?0:t}px`},width:t,axis:"x",resizeHandles:["e"],minConstraints:[250,0],maxConstraints:void 0===p?void 0:[p,0],handle:(0,l.Y)(m,{runListHidden:e,updateRunListHidden:e=>{u?u(e):g((t=>({...t,runListHidden:e})))}}),onResize:(t,{size:r})=>{e||o(r.width)},onResizeStart:()=>!e&&f(!0),onResizeStop:()=>f(!1),children:n}),h&&(0,l.Y)(r.mL,{styles:d})]})},m=a.forwardRef((({updateRunListHidden:e,runListHidden:t,...o},a)=>{const{theme:i}=(0,n.u)();return(0,l.FD)("div",{ref:a,...o,css:(0,r.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:t?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${i.colors.actionDefaultBorderHover}`}}},""),children:[(0,l.Y)("div",{css:(0,r.AH)({position:"absolute",left:-i.general.iconSize/2,width:i.general.iconSize,cursor:t?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,l.Y)("div",{className:"button",css:(0,r.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:i.general.iconSize,height:i.general.iconSize,backgroundColor:i.colors.backgroundPrimary,borderRadius:i.general.iconSize,overflow:"hidden",border:`1px solid ${i.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,l.Y)(n.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>e(!t),icon:t?(0,l.Y)(n.q,{}):(0,l.Y)(n.o,{}),size:"small"})})}),(0,l.Y)("div",{className:"bar",css:(0,r.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:i.colors.actionPrimaryBackgroundDefault},"")})]})}))},54588:function(e,t,o){o.r(t),o.d(t,{default:function(){return fe}});var r=o(89555),n=o(59403),a=o(23823),i=o(68048),s=o(4877),l=o.n(s),d=o(48624),c=o(92246),u=o(91144),m=o(31014),p=o(38654),g=o(63609),h=o(88464),f=o(88443),v=o(30706),y=o(81313);let b=function(e){return e.TABLE="TABLE",e.CHART="CHART",e}({});const C="viewMode";var S=o(3679),w=o(96070),D=o(98590),M=o(50111);const Y=["model_id","model_name","status","artifact_uri","creation_time","last_updated_time"],_=({searchQuery:e,onChangeSearchQuery:t,loggedModelsData:o})=>{const r=(0,m.useMemo)((()=>{const e=(e=>{const t=new Set,o=new Set,r=new Set;for(const c of e){var n,a,i,s,l,d;null===(n=c.data)||void 0===n||null===(a=n.metrics)||void 0===a||a.forEach((e=>e.key&&t.add(e.key))),null===(i=c.data)||void 0===i||null===(s=i.params)||void 0===s||s.forEach((e=>e.key&&o.add(e.key))),null===(l=c.info)||void 0===l||null===(d=l.tags)||void 0===d||d.forEach((e=>e.key&&r.add(e.key)))}return{metricNames:Array.from(t),paramNames:Array.from(o),tagNames:Array.from(r).filter(D.oD)}})(o),t=Y.map((e=>({value:`attributes.${e}`})));return(0,w.$K)(e,t)}),[o]);return(0,M.Y)(S.M,{searchFilter:null!==e&&void 0!==e?e:"",onSearchFilterChange:t,defaultActiveFirstOption:!1,baseOptions:r,onClear:()=>t(""),placeholder:"metrics.rmse >= 0.8",tooltipContent:(0,M.FD)("div",{children:[(0,M.Y)(f.A,{id:"8f4/Zi",defaultMessage:"Search logged models using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,M.Y)("b",{children:"WHERE"})}})," ",(0,M.Y)("br",{}),(0,M.Y)(f.A,{id:"fyVs2o",defaultMessage:"Examples:"}),(0,M.Y)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,M.Y)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,M.Y)("br",{}),"\u2022 params.type = 'tree'",(0,M.Y)("br",{}),"\u2022 tags.my_tag = 'foobar'",(0,M.Y)("br",{}),"\u2022 attributes.name = 'elasticnet'",(0,M.Y)("br",{})]})})};var x=o(70169);const A=e=>JSON.stringify([e.dataset_name,e.dataset_digest]);var R={name:"158icaa",styles:"margin-left:4px"};const I=({loggedModelsData:e,selectedFilterDatasets:t,onToggleDataset:o,onClearSelectedDatasets:a})=>{const{theme:s}=(0,n.u)(),l=(0,h.A)(),d=(0,m.useRef)(new Map),c=(0,m.useMemo)((()=>{for(const o of e)for(const e of(null===(t=o.data)||void 0===t?void 0:t.metrics)||[]){var t;if(!e.dataset_name||!e.dataset_digest)continue;const o=A(e);d.current.has(o)||d.current.set(o,{hash:o,dataset_name:e.dataset_name,dataset_digest:e.dataset_digest})}return Array.from(d.current.values())}),[e]),u=(0,m.useMemo)((()=>(null===t||void 0===t?void 0:t.map(A))||[]),[t]);return(0,M.FD)(i.DialogCombobox,{componentId:"mlflow.logged_model.list_page.datasets_filter",id:"mlflow.logged_model.list_page.datasets_filter",value:u,label:l.formatMessage({id:"K8JcAN",defaultMessage:"Datasets"}),stayOpenOnSelection:!0,children:[(0,M.Y)(i.DialogComboboxCustomButtonTriggerWrapper,{children:(0,M.FD)(n.B,{endIcon:(0,M.Y)(i.ChevronDownIcon,{}),componentId:"mlflow.logged_model.list_page.datasets_filter.toggle",icon:(0,M.Y)(i.TableIcon,{}),children:["Datasets",u.length>0?(0,M.FD)(M.FK,{children:[(0,M.Y)(i.DialogComboboxCountBadge,{css:R,children:u.length}),(0,M.Y)(x.X,{"aria-hidden":"false",role:"button",onClick:e=>{e.stopPropagation(),e.preventDefault(),null===a||void 0===a||a()},css:(0,r.AH)({color:s.colors.textPlaceholder,fontSize:s.typography.fontSizeSm,marginLeft:s.spacing.xs,":hover":{color:s.colors.actionTertiaryTextHover}},"")})]}):null]})}),(0,M.Y)(i.DialogComboboxContent,{children:(0,M.Y)(i.DialogComboboxOptionList,{children:c.map((({hash:e,dataset_digest:t,dataset_name:r})=>(0,M.FD)(i.DialogComboboxOptionListCheckboxItem,{value:e,checked:u.includes(e),onChange:()=>null===o||void 0===o?void 0:o({dataset_digest:t,dataset_name:r}),children:[r," (#",t,")"]},e)))})})]})};var B=o(69526),k=o(14343),F=o(12017);const E=(e,t)=>{const o={[F.I7.CreationTime]:(0,B.zR)({id:"ltqNpe",defaultMessage:"Creation time"})}[e];if(o)return t.formatMessage(o);const r=(0,F.TQ)(e);return r?r.metricKey:e};var T={name:"bsla3r",styles:"max-height:300px;overflow:auto"};const L=({orderByColumn:e,orderByAsc:t,onChangeOrderBy:o,columnDefs:a=[]})=>{const s=(0,h.A)(),[l,d]=(0,m.useState)(""),{theme:c}=(0,n.u)(),u=(0,m.useMemo)((()=>{const t=l.toLowerCase(),o=[{groupId:"attributes",headerName:s.formatMessage({id:"Tpj2su",defaultMessage:"Attributes"}),children:[{colId:F.I7.CreationTime,headerName:E(F.I7.CreationTime,s)}].filter((({headerName:e})=>null===e||void 0===e?void 0:e.toLowerCase().includes(t)))},...a.filter((e=>{var t;return null===(t=e.groupId)||void 0===t?void 0:t.startsWith(F.D2)})).map((e=>{var o;return{...e,children:null===(o=e.children)||void 0===o?void 0:o.filter((({colId:e})=>null===e||void 0===e?void 0:e.includes(t))),headerName:e.headerName?`Metrics (${e.headerName})`:s.formatMessage({id:"EcjcgN",defaultMessage:"Metrics"})}}))].filter((e=>e.children&&e.children.length>0));if(!o.some((t=>t.children&&t.children.some((t=>t.colId===e))))){const{metricKey:t}=(0,F.TQ)(e);t&&o.push({groupId:"current",headerName:s.formatMessage({id:"1wfVV5",defaultMessage:"Currently sorted by"}),children:[{colId:e,headerName:t}]})}return o}),[a,s,l,e]);return(0,M.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,M.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,M.Y)(n.B,{componentId:"mlflow.logged_model.list.order_by",icon:t?(0,M.Y)(i.SortAscendingIcon,{}):(0,M.Y)(i.SortDescendingIcon,{}),children:(0,M.Y)(f.A,{id:"YRBURU",defaultMessage:"Sort: {sortBy}",values:{sortBy:E(e,s)}})})}),(0,M.FD)(i.DropdownMenu.Content,{css:T,children:[(0,M.FD)("div",{css:(0,r.AH)({padding:`${c.spacing.sm}px ${c.spacing.lg/2}px ${c.spacing.sm}px`,width:"100%",display:"flex",gap:c.spacing.xs},""),children:[(0,M.Y)(x.I,{componentId:"mlflow.logged_model.list.order_by.filter",prefix:(0,M.Y)(x.S,{}),value:l,type:"search",onChange:e=>d(e.target.value),placeholder:s.formatMessage({id:"PRwcGm",defaultMessage:"Search"}),autoFocus:!0,allowClear:!0}),(0,M.FD)("div",{css:(0,r.AH)({display:"flex",gap:c.spacing.xs},""),children:[(0,M.Y)(k.k,{pressed:!t,icon:(0,M.Y)(i.ArrowDownIcon,{}),componentId:"mlflow.logged_model.list.order_by.button_desc",onClick:()=>o(e,!1),"aria-label":s.formatMessage({id:"w/sljb",defaultMessage:"Sort descending"})}),(0,M.Y)(k.k,{pressed:t,icon:(0,M.Y)(i.ArrowUpIcon,{}),componentId:"mlflow.logged_model.list.order_by.button_asc",onClick:()=>o(e,!0),"aria-label":s.formatMessage({id:"E4eALP",defaultMessage:"Sort ascending"})})]})]}),u.map((({headerName:r,children:n,groupId:a})=>(0,M.FD)(i.DropdownMenu.Group,{"aria-label":r,children:[(0,M.Y)(i.DropdownMenu.Label,{children:r}),null===n||void 0===n?void 0:n.map((({headerName:r,colId:n})=>(0,M.FD)(i.DropdownMenu.CheckboxItem,{componentId:"mlflow.logged_model.list.order_by.column_toggle",checked:e===n,onClick:()=>{n&&o(n,Boolean(t))},children:[(0,M.Y)(i.DropdownMenu.ItemIndicator,{}),r]},n)))]},a)))]})]})};var N=o(31926);const z={[N.q_.RUNS]:(0,B.zR)({id:"zfpA2q",defaultMessage:"Source run"})},H=({groupBy:e,onChangeGroupBy:t})=>{const o=e?z[e]:null;return(0,M.FD)(i.DropdownMenu.Root,{children:[(0,M.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,M.Y)(n.B,{componentId:"mlflow.logged_model.list.group_by",icon:(0,M.Y)(i.ListBorderIcon,{}),endIcon:(0,M.Y)(i.ChevronDownIcon,{}),children:o?(0,M.Y)(f.A,{id:"bSpjqT",defaultMessage:"Group by: {currentModeSelected}",values:{currentModeSelected:(0,M.Y)(f.A,{...o})}}):(0,M.Y)(f.A,{id:"g+YDB/",defaultMessage:"Group by"})})}),(0,M.FD)(i.DropdownMenu.Content,{children:[(0,M.FD)(i.DropdownMenu.CheckboxItem,{checked:!e,componentId:"mlflow.logged_model.list.group_by.none",onClick:()=>null===t||void 0===t?void 0:t(void 0),children:[(0,M.Y)(i.DropdownMenu.ItemIndicator,{}),(0,M.Y)(f.A,{id:"sOQcFW",defaultMessage:"None"})]}),(0,M.FD)(i.DropdownMenu.CheckboxItem,{checked:e===N.q_.RUNS,componentId:"mlflow.logged_model.list.group_by.runs",onClick:()=>null===t||void 0===t?void 0:t(N.q_.RUNS),children:[(0,M.Y)(i.DropdownMenu.ItemIndicator,{}),(0,M.Y)(f.A,{...z[N.q_.RUNS]})]})]})]})},K=({orderByColumn:e,orderByAsc:t,sortingAndFilteringEnabled:o,onChangeOrderBy:s,onUpdateColumns:l,columnDefs:d,columnVisibility:c={},viewMode:m,setViewMode:p,searchQuery:g="",onChangeSearchQuery:C,loggedModelsData:S,selectedFilterDatasets:w,onToggleDataset:D,onClearSelectedDatasets:Y,groupBy:x,onChangeGroupBy:A})=>{const R=(0,h.A)(),{theme:B}=(0,n.u)();return(0,M.FD)("div",{css:(0,r.AH)({display:"flex",flexWrap:"wrap",gap:B.spacing.sm},""),children:[(0,M.FD)(i.SegmentedControlGroup,{componentId:"mlflow.logged_model.list.view-mode",name:"view-mode",value:m,onChange:e=>{p((0,y.SK)(b,e.target.value,b.TABLE))},children:[(0,M.FD)(i.SegmentedControlButton,{value:"TABLE",children:[(0,M.Y)(a.T,{componentId:"mlflow.logged_model.list.view-mode-table-tooltip",content:R.formatMessage({id:"F9Aau+",defaultMessage:"Table view"}),children:(0,M.Y)(a.L,{})}),(0,M.Y)("span",{css:n.O,children:R.formatMessage({id:"F9Aau+",defaultMessage:"Table view"})})]}),(0,M.FD)(i.SegmentedControlButton,{value:"CHART",children:[(0,M.Y)(a.T,{componentId:"mlflow.logged_model.list.view-mode-chart-tooltip",content:R.formatMessage({id:"44XPr5",defaultMessage:"Chart view"}),children:(0,M.Y)(i.ChartLineIcon,{})}),(0,M.Y)("span",{css:n.O,children:R.formatMessage({id:"44XPr5",defaultMessage:"Chart view"})})]})]}),o?(0,M.FD)(M.FK,{children:[(0,M.Y)(_,{searchQuery:g,onChangeSearchQuery:C,loggedModelsData:S}),(0,M.Y)(I,{loggedModelsData:S,onToggleDataset:D,onClearSelectedDatasets:Y,selectedFilterDatasets:w}),(0,M.Y)(L,{orderByColumn:null!==e&&void 0!==e?e:"",orderByAsc:t,onChangeOrderBy:s,columnDefs:d})]}):(0,M.Y)(n.B,{componentId:"mlflow.logged_model.list.sort",icon:t?(0,M.Y)(i.SortAscendingIcon,{}):(0,M.Y)(i.SortDescendingIcon,{}),onClick:()=>{e&&s(e,!t)},children:(0,M.Y)(f.A,{id:"eDoQXM",defaultMessage:"Sort: Created"})}),(0,M.Y)(v.$,{columnDefs:d,columnVisibility:c,onUpdateColumns:l,disabled:m===b.CHART}),(0,u.O6)()&&(0,M.Y)(H,{groupBy:x,onChangeGroupBy:A})]})};var O=o(36506),$=o(31798),q=o(88311),P=o(42550),U=o(9133),V=o(71932),W=o(63617),Q=o(73150),G=o(39045),j=o(75627),X=o(62758),J=o(30152),Z=o(54346),ee=o(88421);const te=(e,t)=>t?JSON.stringify([t,e]):null!==e&&void 0!==e?e:"",oe=(e,t=1)=>`experiment-logged-models-charts-ui-state-v${t}-${e}`,re=()=>({compareRunCharts:void 0,compareRunSections:void 0,autoRefreshEnabled:!1,isAccordionReordered:!1,chartsSearchFilter:"",globalLineChartConfig:void 0,isDirty:!1}),ne=(e,t)=>{if("UPDATE"===t.type)return{...t.stateSetter(e),isDirty:!0};if("METRICS_UPDATED"===t.type){const{compareRunCharts:o,compareRunSections:r}=(e=>{const t=e.map((({dataAccessKey:e,metricKey:t,datasetName:o})=>({deleted:!1,type:J.zL.BAR,uuid:`autogen-${e}`,metricSectionId:o?`autogen-${o}`:"default",isGenerated:!0,metricKey:t,dataAccessKey:e,datasetName:o,displayName:o?`(${o}) ${t}`:void 0}))),o=(0,U.uniq)(e.map((({datasetName:e})=>e))).map((e=>({display:!0,name:null!==e&&void 0!==e?e:"Metrics",uuid:e?`autogen-${e}`:"default",isReordered:!1})));return(0,U.isEmpty)(o)&&o.push({display:!0,name:"Metrics",uuid:"default",isReordered:!1}),{compareRunCharts:t,compareRunSections:o}})(t.metricsByDatasets);return((e,t)=>{var o,r;if((!e.compareRunCharts||!e.compareRunSections||!e.isDirty)&&(t.compareRunCharts.length>0||t.compareRunSections.length>0))return{...e,compareRunCharts:null!==(o=t.compareRunCharts)&&void 0!==o?o:[],compareRunSections:null!==(r=t.compareRunSections)&&void 0!==r?r:[]};const n=t.compareRunCharts.filter((t=>{var o;return!(null!==(o=e.compareRunCharts)&&void 0!==o&&o.find((e=>e.uuid===t.uuid)))})),a=t.compareRunSections.filter((t=>{var o;return n.find((e=>e.metricSectionId===t.uuid))&&!(null!==(o=e.compareRunSections)&&void 0!==o&&o.find((e=>e.uuid===t.uuid)))}));return a.length>0||n.length>0?{...e,compareRunCharts:e.compareRunCharts?[...e.compareRunCharts,...n]:t.compareRunCharts,compareRunSections:e.compareRunSections?[...e.compareRunSections,...a]:t.compareRunSections}:e})(e,{compareRunCharts:o,compareRunSections:r})}return"INITIALIZE"===t.type&&t.initialConfig?t.initialConfig:e},ae=(e,t)=>{const[o,r]=(0,m.useReducer)(ne,void 0,re),[n,a]=(0,m.useState)(!0);(0,m.useEffect)((()=>{a(!0),(async e=>{const t=localStorage.getItem(oe(e));if(t)try{return JSON.parse(t)}catch{return}})(t).then((e=>{r({type:"INITIALIZE",initialConfig:e}),a(!1)}))}),[t]),(0,m.useEffect)((()=>{n||r({type:"METRICS_UPDATED",metricsByDatasets:e})}),[e,n]),(0,m.useEffect)((()=>{o.isDirty&&(async(e,t)=>{localStorage.setItem(oe(e),JSON.stringify(t))})(t,o)}),[t,o]);const i=(0,m.useCallback)((e=>r({type:"UPDATE",stateSetter:e})),[]);return{chartUIState:o,updateUIState:i,loading:n}};var ie=o(19415),se=o(58481);var le={name:"1qmr6ab",styles:"overflow:auto"};const de=(0,m.memo)((({chartData:e,uiState:t,metricKeysByDataset:o,minWidth:a})=>{var s,l;const{theme:d}=(0,n.u)(),{formatMessage:c}=(0,h.A)(),u=(0,m.useMemo)((()=>(0,U.uniq)(e.flatMap((e=>Object.keys(e.metrics))))),[e]),p=(0,m.useMemo)((()=>(0,U.uniq)(e.flatMap((e=>Object.keys(e.params))))),[e]),g=(0,X.g_)(),v=(0,m.useCallback)((e=>{g((t=>({...t,chartsSearchFilter:e})))}),[g]),[y,b]=(0,m.useState)(null),C=(0,m.useCallback)((e=>t=>b(J.i$.getEmptyChartCardByType(t,!1,void 0,e))),[]),S=(0,X.Ez)(),w=(0,X.KP)(),[D,Y]=(0,m.useState)(void 0),_=(0,m.useMemo)((()=>({runs:e})),[e]),A=(0,m.useMemo)((()=>({runs:e,getDataTraceLink:se.Ay.getExperimentLoggedModelDetailsPageRoute})),[e]),R=(0,M.Y)("div",{css:(0,r.AH)({marginTop:d.spacing.lg},""),children:(0,M.Y)(i.Empty,{description:(0,M.Y)(f.A,{id:"oKgZFA",defaultMessage:"No models found in experiment or all models are hidden. Select at least one model to view charts."})})});return(0,M.Y)("div",{css:(0,r.AH)({backgroundColor:d.colors.backgroundPrimary,paddingLeft:d.spacing.md,paddingRight:d.spacing.md,paddingBottom:d.spacing.md,borderTop:`1px solid ${d.colors.border}`,borderLeft:`1px solid ${d.colors.border}`,flex:1,overflow:"hidden",display:"flex",minWidth:a},""),children:(0,M.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",gap:d.spacing.sm,paddingTop:d.spacing.sm,overflow:"hidden",flex:1},""),children:[(0,M.Y)(x.I,{componentId:"mlflow.logged_model.list.charts.search",role:"searchbox",prefix:(0,M.Y)(x.S,{}),value:null!==(s=t.chartsSearchFilter)&&void 0!==s?s:"",allowClear:!0,onChange:({target:e})=>v(e.value),placeholder:c({id:"7teFL4",defaultMessage:"Search metric charts"})}),(0,M.FD)("div",{css:le,children:[(0,M.Y)(j.W,{contextData:A,component:Q.X,children:(0,M.Y)(V.c_,{visibleChartCards:t.compareRunCharts,children:(0,M.Y)(G.J,{compareRunSections:t.compareRunSections,compareRunCharts:t.compareRunCharts,reorderCharts:U.noop,insertCharts:U.noop,chartData:e,startEditChart:b,removeChart:w,addNewChartCard:C,search:null!==(l=t.chartsSearchFilter)&&void 0!==l?l:"",groupBy:null,setFullScreenChart:Y,autoRefreshEnabled:!1,hideEmptyCharts:!1,globalLineChartConfig:void 0,supportedChartTypes:[J.zL.BAR,J.zL.SCATTER],noRunsSelectedEmptyState:R})})}),(0,M.Y)(W._,{fullScreenChart:D,onCancel:()=>Y(void 0),chartData:e,groupBy:null,tooltipContextValue:_,tooltipComponent:Q.X,autoRefreshEnabled:!1,globalLineChartConfig:void 0}),y&&(0,M.Y)(ie.z,{chartRunData:e,metricKeyList:u,metricKeysByDataset:o,paramKeyList:p,config:y,onSubmit:e=>{S({...e,displayName:void 0}),b(null)},onCancel:()=>b(null),groupBy:null,supportedChartTypes:[J.zL.BAR,J.zL.SCATTER]})]})]})})})),ce=(0,m.memo)((({loggedModels:e,experimentId:t,minWidth:o})=>{const{theme:a}=(0,n.u)(),i=((e,t)=>{const o=(0,m.useRef)();return o.current&&(0,U.isEqual)(t,o.current.deps)||(o.current={deps:t,value:e()}),o.current.value})((()=>e),[e]),s=(e=>(0,m.useMemo)((()=>{const t=[];return e.forEach((e=>{var o,r;null===(o=e.data)||void 0===o||null===(r=o.metrics)||void 0===r||r.forEach((({key:e,dataset_name:o})=>{if(e&&!t.find((t=>t.metricKey===e&&t.datasetName===o))){const r=te(e,o);t.push({metricKey:e,datasetName:o,dataAccessKey:r})}}))})),(0,U.orderBy)(t,(({datasetName:e})=>!e))}),[e]))(i),{chartUIState:l,updateUIState:d,loading:c}=ae(s,t),u=(e=>{const{isRowHidden:t}=(0,ee.GP)();return(0,m.useMemo)((()=>(0,U.compact)(e.map(((e,o)=>{var r,n,a,i,s,l,d,c,u,m;return null!==(r=e.info)&&void 0!==r&&r.model_id?{displayName:null!==(n=null!==(a=null===(i=e.info)||void 0===i?void 0:i.name)&&void 0!==a?a:null===(s=e.info)||void 0===s?void 0:s.model_id)&&void 0!==n?n:"Unknown",images:{},metrics:(0,U.keyBy)(null===(l=e.data)||void 0===l||null===(d=l.metrics)||void 0===d?void 0:d.map((({dataset_name:e,key:t,value:o,timestamp:r,step:n})=>({dataKey:te(t,e),key:null!==t&&void 0!==t?t:"",value:null!==o&&void 0!==o?o:0,timestamp:null!==r&&void 0!==r?r:0,step:null!==n&&void 0!==n?n:0}))),"dataKey"),params:(0,U.keyBy)(null!==(c=null===(u=e.data)||void 0===u||null===(m=u.params)||void 0===m?void 0:m.map((({key:e,value:t})=>({key:null!==e&&void 0!==e?e:"",value:null!==t&&void 0!==t?t:""}))).filter((({key:e})=>e)))&&void 0!==c?c:[],"key"),tags:{},uuid:e.info.model_id,hidden:t(e.info.model_id,o),color:(0,Z.T6)(e.info.model_id)}:null})))),[e,t])})(i);return c?(0,M.Y)("div",{css:(0,r.AH)({backgroundColor:a.colors.backgroundPrimary,paddingTop:a.spacing.lg,borderTop:`1px solid ${a.colors.border}`,borderLeft:`1px solid ${a.colors.border}`,flex:1,justifyContent:"center",alignItems:"center",display:"flex"},""),children:(0,M.Y)(n.S,{})}):(0,M.Y)(X.oB,{updateChartsUIState:d,children:(0,M.Y)(de,{chartData:u,uiState:l,metricKeysByDataset:s,minWidth:o})})}));var ue=o(25790),me=o(39416),pe=o(39771);var ge={name:"oww3ap",styles:"display:flex;flex:1;overflow:hidden;position:relative"};const he=()=>{const{experimentId:e}=(0,d.g)(),{theme:t}=(0,n.u)(),o=(0,u.fS)(),{state:{orderByColumn:s,orderByAsc:c,columnVisibility:h,rowVisibilityMap:f,rowVisibilityMode:v,selectedFilterDatasets:S,groupBy:w},searchQuery:D,isFilteringActive:Y,setOrderBy:_,setColumnVisibility:x,setRowVisibilityMode:A,toggleRowVisibility:R,updateSearchQuery:I,toggleDataset:B,clearSelectedDatasets:k,setGroupBy:E}=(0,$.k)();l()(e,"Experiment ID must be defined");const{viewMode:T,setViewMode:L}=(()=>{const[e,t]=(0,d.ok)();return{viewMode:(0,y.SK)(b,e.get(C),b.TABLE),setViewMode:e=>{t({[C]:e})}}})(),{data:N,isFetching:z,isLoading:H,error:U,nextPageToken:V,loadMoreResults:W}=(0,g.e)({experimentIds:[e],orderByAsc:c,searchQuery:D,selectedFilterDatasets:S,...(()=>{if(!s)return{orderByField:void 0};const e=(0,F.TQ)(s);return e.datasetDigest&&e.datasetName?{orderByField:`metrics.${e.metricKey}`,orderByDatasetName:e.datasetName,orderByDatasetDigest:e.datasetDigest}:{orderByField:s}})()}),Q=U instanceof me.v7?U:void 0,{data:G}=(0,q.s)({loggedModels:N}),{columnDefs:j,compactColumnDefs:X}=(0,F.ih)({loggedModels:N,columnVisibility:h,isLoading:H,orderByColumn:s,orderByAsc:c,enableSortingByMetrics:o}),[J,Z]=(0,m.useState)(295),[te,oe]=(0,m.useState)(!1),re=T!==b.TABLE,ne=re&&te?(0,M.Y)("div",{css:(0,r.AH)({width:t.spacing.md},"")}):(0,M.Y)(p._,{columnDefs:re?X:j,loggedModels:null!==N&&void 0!==N?N:[],isLoading:H,isLoadingMore:z,badRequestError:Q,moreResultsAvailable:Boolean(V),onLoadMore:W,onOrderByChange:_,orderByAsc:c,orderByColumn:s,columnVisibility:h,relatedRunsData:G,isFilteringActive:Y,groupModelsBy:w}),{resizableMaxWidth:ae,ref:ie}=(0,pe.b)(350);return(0,M.Y)(O.Xs,{children:(0,M.FD)(ee.Ap,{visibilityMap:f,visibilityMode:v,setRowVisibilityMode:A,toggleRowVisibility:R,children:[(0,M.Y)(K,{columnDefs:j,columnVisibility:h,onChangeOrderBy:_,onUpdateColumns:x,orderByColumn:s,orderByAsc:c,viewMode:T,setViewMode:L,searchQuery:D,onChangeSearchQuery:I,loggedModelsData:null!==N&&void 0!==N?N:[],sortingAndFilteringEnabled:o,selectedFilterDatasets:S,onToggleDataset:B,onClearSelectedDatasets:k,groupBy:w,onChangeGroupBy:E}),(0,M.Y)(a.S,{size:"sm",shrinks:!1}),(null===U||void 0===U?void 0:U.message)&&!Q&&(0,M.FD)(M.FK,{children:[(0,M.Y)(i.Alert,{componentId:"mlflow.logged_models.list.error",message:U.message,type:"error",closable:!1}),(0,M.Y)(a.S,{size:"sm",shrinks:!1})]}),re?(0,M.Y)(ue.Co,{children:(0,M.FD)("div",{ref:ie,css:ge,children:[(0,M.Y)(P.t,{onResize:Z,runListHidden:te,width:J,onHiddenChange:oe,maxWidth:ae,children:ne}),T===b.CHART&&(0,M.Y)(ce,{loggedModels:null!==N&&void 0!==N?N:[],experimentId:e,minWidth:350})]})}):ne]})})};var fe=()=>(0,M.Y)(c.X,{children:(0,M.Y)(he,{})})},88311:function(e,t,o){o.d(t,{s:function(){return d}});var r=o(31014),n=o(9133),a=o(77735),i=o(63528);const s=e=>["USE_RELATED_RUNS_DATA_FOR_LOGGED_MODELS",{runUuid:e}],l=async({queryKey:[,{runUuid:e}]})=>{try{const t=await i.x.getRun({run_id:e});return null===t||void 0===t?void 0:t.run}catch(t){return null}},d=({loggedModels:e=[]})=>{var t;const o=(0,r.useMemo)((()=>{const t=(0,n.compact)(null===e||void 0===e?void 0:e.flatMap((e=>{var t,o;return null===e||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.metrics)||void 0===o?void 0:o.map((e=>e.run_id))}))),o=(0,n.compact)(null===e||void 0===e?void 0:e.map((e=>{var t;return null===e||void 0===e||null===(t=e.info)||void 0===t?void 0:t.source_run_id})));return(0,n.sortBy)((0,n.uniq)([...t,...o]))}),[e]),i=(0,a.E)({queries:o.map((e=>({queryKey:s(e),queryFn:l,cacheTime:1/0,staleTime:1/0,refetchOnWindowFocus:!1,retry:!1})))}),d=i.some((({isLoading:e})=>e)),c=null===(t=i.find((({error:e})=>e)))||void 0===t?void 0:t.error,u=function(e){const t=(0,r.useRef)(),o=!(!t.current||e.length!==t.current.length)&&e.every(((e,o)=>{var r;return e===(null===(r=t.current)||void 0===r?void 0:r[o])}));return o||(t.current=e),o&&t.current?t.current:e}(i.map((({data:e})=>e)));return{data:(0,r.useMemo)((()=>u.map((e=>e)).filter(Boolean)),[u]),loading:d,error:c}}},92246:function(e,t,o){o.d(t,{X:function(){return u}});var r=o(37368),n=o(28486),a=o(68048),i=o(59403),s=o(88443),l=o(50111);var d={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const c=({error:e})=>{var t;return(0,l.Y)(a.PageWrapper,{css:d,children:(0,l.Y)(a.Empty,{"data-testid":"fallback",title:(0,l.Y)(s.A,{id:"AOoWxS",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,l.Y)(s.A,{id:"zmMR5p",defaultMessage:"An error occurred while rendering this component."}),image:(0,l.Y)(i.l,{})})})},u=({children:e,resetKey:t})=>(0,l.Y)(n.tH,{FallbackComponent:c,resetKeys:[t],children:(0,l.Y)(r.Au,{children:e})})},96070:function(e,t,o){o.d(t,{$K:function(){return s},M8:function(){return u},jP:function(){return c},tY:function(){return i}});var r=o(31014),n=o(98590),a=o(50111);const i=e=>e.filter((e=>!e.startsWith(n.nt))).map((e=>e.includes('"')||e.includes(" ")||e.includes(".")?`\`${e}\``:e.includes("`")?`"${e}"`:e)),s=(e,t)=>[{label:"Metrics",options:e.metricNames.map((e=>({value:`metrics.${e}`})))},{label:"Parameters",options:e.paramNames.map((e=>({value:`params.${e}`})))},{label:"Tags",options:e.tagNames.map((e=>({value:`tags.${e}`})))},{label:"Attributes",options:t}];var l={name:"lugakg",styles:"font-weight:normal"};const d=(e,t)=>{const o=e.split(RegExp(t.replace(".","\\."),"ig")),n=e.match(RegExp(t.replace(".","\\."),"ig"));return(0,a.Y)("span",{css:l,"data-testid":e,children:o.map(((e,t)=>(0,a.FD)(r.Fragment,{children:[e,t!==o.length-1&&n&&(0,a.Y)("b",{children:n[t]})]},t)))})},c=e=>{const t=/>|<|>=|<=|=|!=|like|ilike/gi,o=(e=>{const t=/and[\s]+/gi,o=[];let r,n;for(;n=t.lastIndex,r=t.exec(e);)o.push({clause:e.substring(n,r.index),startIndex:n});return o.push({clause:e.substring(n),startIndex:n}),o})(e),r=[];return o.forEach((e=>{const o=e.clause.split(t)[0],{startIndex:n}=e;r.push({name:o,startIndex:0+n,endIndex:o.length+n})})),r},u=(e,t,o)=>e.map((e=>{const r=e.options.filter((e=>e.value.toLowerCase().includes(t.name.toLowerCase().trim()))).map((e=>({value:e.value,label:d(e.value,t.name.trim())}))),n=o[e.label],a=[...r.slice(0,n),...r.length>n?[{label:"...",value:`..._${e.label}`}]:[]];return{label:e.label,options:a}})).filter((e=>e.options.length>0))}}]);
//# sourceMappingURL=4588.d69c50d6.chunk.js.map