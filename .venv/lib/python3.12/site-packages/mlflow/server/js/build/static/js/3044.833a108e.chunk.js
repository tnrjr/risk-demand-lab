"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[3044],{63044:function(e,t,i){i.r(t),i.d(t,{ExperimentListView:function(){return U},default:function(){return Q}});var n=i(89555),l=i(31014),o=i(59403),a=i(23823),s=i(68048),r=i(58481),d=i(5452),c=i(54573),m=i(88464),p=i(88443),g=i(84069),u=i(70618),h=i(9856),f=i(9133),x=i(76010),v=i(48624),w=i(98597),b=i(98590),y=i(50111);var _={name:"zjik7",styles:"display:flex"},S={name:"tyk0n8",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:flex"},Y={name:"14cnl6e",styles:"flex-shrink:0;opacity:0;[role=row]:hover &{opacity:1;}[role=row]:focus-within &{opacity:1;}"};const T=({row:{original:e},table:{options:{meta:t}}})=>{var i;const n=(0,m.A)(),{onEditTags:l}=t,a=(null===e||void 0===e||null===(i=e.tags)||void 0===i?void 0:i.filter((e=>(0,b.oD)(e.key))))||[],r=a.length>0;return(0,y.FD)("div",{css:_,children:[(0,y.Y)("div",{css:S,children:null===a||void 0===a?void 0:a.map((e=>(0,y.Y)(w.t,{tag:e},e.key)))}),(0,y.Y)(o.B,{componentId:"mlflow.experiment.list.tag.add",size:"small",icon:r?(0,y.Y)(s.PencilIcon,{}):void 0,onClick:()=>null===l||void 0===l?void 0:l(e),"aria-label":n.formatMessage({id:"Vk+30L",defaultMessage:"Edit tags"}),css:Y,type:"tertiary",children:r?void 0:(0,y.Y)(p.A,{id:"cI0kqF",defaultMessage:"Add tags"})})]})};const C=({experiments:e,isFiltered:t,isLoading:i,rowSelection:a,setRowSelection:r,cursorPaginationProps:d,sortingProps:{sorting:c,setSorting:g},onEditTags:v})=>{const{theme:w}=(0,o.u)(),b=(()=>{const e=(0,m.A)();return(0,l.useMemo)((()=>[{header:({table:e})=>(0,y.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_all_box",isChecked:e.getIsSomeRowsSelected()?null:e.getIsAllRowsSelected(),onChange:(t,i)=>e.getToggleAllRowsSelectedHandler()(i)}),id:"select",cell:I,enableSorting:!1},{header:e.formatMessage({id:"QhEnTA",defaultMessage:"Name"}),accessorKey:"name",id:"name",cell:F,enableSorting:!0},{header:e.formatMessage({id:"JUTcIz",defaultMessage:"Time created"}),id:"creation_time",accessorFn:({creationTime:t})=>x.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"l/+0SR",defaultMessage:"Last modified"}),id:"last_update_time",accessorFn:({lastUpdateTime:t})=>x.A.formatTimestamp(t,e),enableSorting:!0},{header:e.formatMessage({id:"STEhnv",defaultMessage:"Description"}),id:"description",accessorFn:({tags:e})=>{var t,i;return null!==(t=null===e||void 0===e||null===(i=e.find((({key:e})=>"mlflow.note.content"===e)))||void 0===i?void 0:i.value)&&void 0!==t?t:"-"},enableSorting:!1},{header:e.formatMessage({id:"BB6In/",defaultMessage:"Tags"}),id:"tags",accessorKey:"tags",enableSorting:!1,cell:T}]),[e])})(),_=(0,u.N4)({data:null!==e&&void 0!==e?e:[],columns:b,getCoreRowModel:(0,h.HT)(),getRowId:e=>e.experimentId,enableRowSelection:!0,enableMultiRowSelection:!0,onRowSelectionChange:r,onSortingChange:g,state:{rowSelection:a,sorting:c},meta:{onEditTags:v}}),S={flex:"none",height:w.general.heightBase};return(0,y.FD)(s.Table,{scrollable:!0,pagination:(0,y.Y)(s.CursorPagination,{...d,componentId:"mlflow.experiment_list_view.pagination"}),empty:(()=>{const n=!i&&(0,f.isEmpty)(e);return n&&t?(0,y.Y)(s.Empty,{image:(0,y.Y)(s.NoIcon,{}),title:(0,y.Y)(p.A,{id:"QRnRh3",defaultMessage:"No experiments found"}),description:null}):n?(0,y.Y)(s.Empty,{title:(0,y.Y)(p.A,{id:"dcoaGS",defaultMessage:"No experiments created"}),description:(0,y.Y)(p.A,{id:"Zt2Uxi",defaultMessage:'Use "Create experiment" button in order to create a new experiment'})}):null})(),children:[(0,y.Y)(s.TableRow,{isHeader:!0,children:_.getLeafHeaders().map((e=>(0,y.Y)(s.TableHeader,{componentId:"mlflow.experiment_list_view.table.header",css:"select"===e.column.id?S:void 0,sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted()||"none",onToggleSort:e.column.getToggleSortingHandler(),children:(0,u.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),i?(0,y.Y)(s.TableSkeletonRows,{table:_}):_.getRowModel().rows.map((e=>(0,y.Y)(s.TableRow,{css:(0,n.AH)({height:w.general.buttonHeight},""),"data-testid":"experiment-list-item",children:e.getAllCells().map((e=>(0,y.Y)(s.TableCell,{css:(0,n.AH)({alignItems:"center",..."select"===e.column.id?S:void 0},""),children:(0,u.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})};var k={name:"1d4xjjz",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1"};const F=({row:{original:e}})=>(0,y.Y)(v.N_,{className:"experiment-link",css:k,to:r.Ay.getExperimentPageRoute(e.experimentId),title:e.name,"data-testid":"experiment-list-item-link",children:e.name}),I=({row:e})=>(0,y.Y)(s.Checkbox,{componentId:"mlflow.experiment_list_view.check_box",id:e.original.experimentId,"data-testid":"experiment-list-item-check-box",isChecked:e.getIsSelected(),disabled:!e.getCanSelect(),onChange:e.getToggleSelectedHandler()},e.original.experimentId);var M=i(97026),A=i(26809),E=i(10811);const P=({isOpen:e,onClose:t,experiments:i,onExperimentsDeleted:n})=>{const l=(0,E.wA)();return(0,y.Y)(M.u,{isOpen:e,onClose:t,handleSubmit:()=>Promise.all(i.map((e=>l((0,A.lJ)(e.experimentId))))).then(n).catch((e=>x.A.logErrorAndNotifyUser(e))),title:(0,y.Y)(p.A,{id:"Epo8/i",defaultMessage:"Delete {count, plural, one {# Experiment} other {# Experiments}}",values:{count:i.length}}),helpText:(0,y.FD)("div",{children:[(0,y.Y)(o.T.Paragraph,{children:"The following experiments will be deleted:"}),(0,y.Y)(o.T.Paragraph,{children:(0,y.Y)("ul",{children:i.map((e=>(0,y.Y)("li",{children:(0,y.FD)(o.T.Text,{children:[e.name," (ID: ",e.experimentId,")"]})},e.experimentId)))})})]}),confirmButtonText:(0,y.Y)(p.A,{id:"9KLNi5",defaultMessage:"Delete"}),confirmButtonProps:{danger:!0}})};var D=i(52350),R=i(77020),H=i(43683),B=i(63528);const N=["IS","IS NOT","CONTAINS"];function O(e){return[e.key,e.operator,e.value].join("-")}function L(e){const t=e.split("-");if(t.length>=3&&function(e){return N.includes(e)}(t[1])){const[e,i,...n]=t;return{key:e,operator:i,value:n.join("-")}}return null}var j=i(13369);const $={key:"",value:"",operator:"IS"};var q={name:"isq613",styles:"min-width:14ch"},z={name:"1eoy87d",styles:"display:flex;justify-content:space-between"};function K({tagsFilter:e,setTagsFilter:t}){const{control:i,handleSubmit:a}=(0,j.mN)({defaultValues:{tagsFilter:0===e.length?[$]:e}}),{fields:r,append:d,remove:c}=(0,j.jz)({control:i,name:"tagsFilter"}),{theme:g}=(0,o.u)(),{formatMessage:u}=(0,m.A)(),h={fontWeight:g.typography.typographyBoldFontWeight},f={key:u({id:"/k7Xvj",defaultMessage:"Key"}),operator:u({id:"JDpv0G",defaultMessage:"Operator"}),value:u({id:"OH7hV5",defaultMessage:"Value"})};return(0,y.FD)("form",{onSubmit:a((e=>t(e.tagsFilter))),css:(0,n.AH)({display:"flex",flexDirection:"column",gap:g.spacing.md,padding:g.spacing.md},""),children:[(0,y.FD)("fieldset",{css:(0,n.AH)({display:"grid",gridTemplateColumns:"repeat(4, auto)",gap:g.spacing.sm},""),children:[(0,y.Y)("label",{htmlFor:`${r[0].id}-key`,css:h,children:f.key}),(0,y.Y)("label",{htmlFor:`${r[0].id}-op`,css:h,children:f.operator}),(0,y.Y)("label",{htmlFor:`${r[0].id}-value`,css:h,children:f.value}),(0,y.Y)("label",{}),r.map(((e,t)=>(0,y.FD)(l.Fragment,{children:[(0,y.Y)(s.RHFControlledComponents.Input,{id:`${e.id}-key`,componentId:`mlflow.experiment_list_view.tag_filter.key_input_${t}`,name:`tagsFilter.${t}.key`,control:i,"aria-label":f.key,placeholder:f.key,required:!0}),(0,y.Y)(s.RHFControlledComponents.LegacySelect,{id:`${e.id}-op`,name:`tagsFilter.${t}.operator`,control:i,options:N.map((e=>({key:e,value:e}))),"aria-label":f.operator,css:q}),(0,y.Y)(s.RHFControlledComponents.Input,{id:`${e.id}-value`,componentId:`mlflow.experiment_list_view.tag_filter.value_input_${t}`,name:`tagsFilter.${t}.value`,control:i,"aria-label":f.value,placeholder:f.value,required:!0}),(0,y.Y)(o.B,{componentId:`mlflow.experiment_list_view.tag_filter.remove_filter_button_${t}`,type:"tertiary",onClick:()=>c(t),disabled:1===r.length,"aria-label":u({id:"l8Z2nP",defaultMessage:"Remove filter"}),children:(0,y.Y)(o.C,{})})]},e.id)))]}),(0,y.FD)("div",{css:z,children:[(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.add_filter_button",onClick:()=>d($),icon:(0,y.Y)(s.PlusIcon,{}),children:(0,y.Y)(p.A,{id:"rY00Iw",defaultMessage:"Add filter"})}),(0,y.FD)("div",{css:(0,n.AH)({display:"flex",gap:g.spacing.sm},""),children:[(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.clear_filters_button",onClick:()=>t([]),children:(0,y.Y)(p.A,{id:"NPlcrl",defaultMessage:"Clear filters"})}),(0,y.Y)(o.B,{htmlType:"submit",componentId:"mlflow.experiment_list_view.tag_filter.apply_filters_button",type:"primary",children:(0,y.Y)(p.A,{id:"sWbj1n",defaultMessage:"Apply filters"})})]})]})]})}var V={name:"1m5f2z8",styles:"overflow:hidden;display:flex;flex-direction:column"},W={name:"xt6tct",styles:"flex:1;display:flex;flex-direction:column;overflow:hidden"};const U=()=>{const[e,t]=function(){var e;const t="experimentSearchFilter",[i,n]=(0,v.ok)();return[null!==(e=i.get(t))&&void 0!==e?e:"",function(e){e?i.set(t,e):i.delete(t),n(i)}]}(),{tagsFilter:i,setTagsFilter:u,isTagsFilterOpen:h,setIsTagsFilterOpen:f}=function(){var e;const[t,i]=(0,l.useState)(!1),n="experimentTagsFilter",[o,a]=(0,v.ok)();return{tagsFilter:(null!==(e=o.getAll(n))&&void 0!==e?e:[]).map(L).filter((e=>null!==e)),setTagsFilter:function(e){o.delete(n);const t=e.filter((e=>""!==e.key&&""!==e.value));if(0!==t.length)for(const i of t)o.append(n,O(i));a(o),i(!1)},isTagsFilterOpen:t,setIsTagsFilterOpen:i}}(),{data:x,isLoading:w,error:_,hasNextPage:S,hasPreviousPage:Y,onNextPage:T,onPreviousPage:k,pageSizeSelect:F,sorting:I,setSorting:M}=(0,c.f)({searchFilter:e,tagsFilter:i}),A=(0,c.M)(),{EditTagsModal:E,showEditExperimentTagsModal:N}=(({onSuccess:e})=>{const t=(0,R.n)({mutationFn:async({toAdd:e,toDelete:t,experimentId:i})=>Promise.all([...e.map((({key:e,value:t})=>B.x.setExperimentTag({experiment_id:i,key:e,value:t}))),...t.map((({key:e})=>B.x.deleteExperimentTag({experiment_id:i,key:e})))])}),{EditTagsModal:i,showEditTagsModal:n,isLoading:o}=(0,H.Q)({valueRequired:!0,saveTagsHandler:(i,n,l)=>{const{addedOrModifiedTags:o,deletedTags:a}=(0,b.Rf)(n,l);return new Promise(((n,l)=>{if(!i)return l();t.mutate({experimentId:i.experimentId,toAdd:o,toDelete:a},{onSuccess:()=>{n(),null===e||void 0===e||e()},onError:l})}))}});return{EditTagsModal:i,showEditExperimentTagsModal:(0,l.useCallback)((e=>n({experimentId:e.experimentId,name:e.name,tags:e.tags.filter((e=>(0,b.oD)(e.key)))})),[n]),isLoading:o}})({onSuccess:A}),[j,$]=(0,l.useState)({}),[q,z]=(0,l.useState)(""),[U,Q]=(0,l.useState)(!1),[Z,G]=(0,l.useState)(!1),J=Object.entries(j).filter((([e,t])=>t)).map((([e,t])=>e)),{theme:X}=(0,o.u)(),ee=(0,v.Zp)(),te=(0,m.A)();return(0,y.FD)(g.m,{css:V,children:[(0,y.Y)(a.S,{shrinks:!1}),(0,y.Y)(s.Header,{title:(0,y.Y)(p.A,{id:"ZqHpEG",defaultMessage:"Experiments"}),buttons:(0,y.FD)(y.FK,{children:[(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.new_experiment_button",type:"primary",onClick:()=>{Q(!0)},"data-testid":"create-experiment-button",children:(0,y.Y)(p.A,{id:"9ut1Fj",defaultMessage:"Create"})}),(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.compare_experiments_button",onClick:()=>{const e=r.Ay.getCompareExperimentsPageRoute(J);ee(e)},"data-testid":"compare-experiment-button",disabled:J.length<2,children:(0,y.Y)(p.A,{id:"YECxws",defaultMessage:"Compare"})}),(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.bulk_delete_button",onClick:()=>G(!0),"data-testid":"delete-experiments-button",disabled:J.length<1,danger:!0,children:(0,y.Y)(p.A,{id:"L/4iQO",defaultMessage:"Delete"})})]})}),(0,y.Y)(a.S,{shrinks:!1}),_&&(0,y.Y)(s.Alert,{css:(0,n.AH)({marginBlockEnd:X.spacing.sm},""),type:"error",message:_ instanceof D.s?_.getMessageField():_.message||(0,y.Y)(p.A,{id:"9Bj7oS",defaultMessage:"A network error occurred."}),componentId:"mlflow.experiment_list_view.error",closable:!1}),(0,y.FD)("div",{css:W,children:[(0,y.FD)(s.TableFilterLayout,{children:[(0,y.Y)(s.TableFilterInput,{"data-testid":"search-experiment-input",placeholder:te.formatMessage({id:"9vT4HV",defaultMessage:"Filter experiments by name"}),componentId:"mlflow.experiment_list_view.search",defaultValue:e,onChange:e=>{z(e.target.value)},onSubmit:()=>{t(q)},onClear:()=>{t("")},showSearchButton:!0}),(0,y.FD)(o.ax.Root,{componentId:"mlflow.experiment_list_view.tag_filter",open:h,onOpenChange:f,children:[(0,y.Y)(o.ax.Trigger,{asChild:!0,children:(0,y.Y)(o.B,{componentId:"mlflow.experiment_list_view.tag_filter.trigger",icon:(0,y.Y)(s.FilterIcon,{}),endIcon:(0,y.Y)(s.ChevronDownIcon,{}),type:i.length>0?"primary":void 0,children:(0,y.Y)(p.A,{id:"55mClg",defaultMessage:"Tag filter"})})}),(0,y.Y)(o.ax.Content,{children:(0,y.Y)(K,{tagsFilter:i,setTagsFilter:u})})]})]}),(0,y.Y)(C,{experiments:x,isLoading:w,isFiltered:Boolean(e),rowSelection:j,setRowSelection:$,cursorPaginationProps:{hasNextPage:S,hasPreviousPage:Y,onNextPage:T,onPreviousPage:k,pageSizeSelect:F},sortingProps:{sorting:I,setSorting:M},onEditTags:N})]}),(0,y.Y)(d.D,{isOpen:U,onClose:()=>{Q(!1)},onExperimentCreated:A}),(0,y.Y)(P,{experiments:(null!==x&&void 0!==x?x:[]).filter((({experimentId:e})=>J.includes(e))),isOpen:Z,onClose:()=>G(!1),onExperimentsDeleted:()=>{A(),$({})}}),E]})};var Q=U},97026:function(e,t,i){i.d(t,{u:function(){return a}});var n=i(31014),l=i(23823),o=i(50111);class a extends n.Component{constructor(e){super(e),this.state={isSubmitting:!1},this.onRequestCloseHandler=this.onRequestCloseHandler.bind(this),this.handleSubmitWrapper=this.handleSubmitWrapper.bind(this)}onRequestCloseHandler(){this.state.isSubmitting||this.props.onClose()}handleSubmitWrapper(){return this.setState({isSubmitting:!0}),this.props.handleSubmit().finally((()=>{this.props.onClose(),this.setState({isSubmitting:!1})}))}render(){return(0,o.Y)(l.d,{"data-testid":"confirm-modal",title:this.props.title,visible:this.props.isOpen,onOk:this.handleSubmitWrapper,okText:this.props.confirmButtonText,okButtonProps:this.props.confirmButtonProps,confirmLoading:this.state.isSubmitting,onCancel:this.onRequestCloseHandler,centered:!0,children:(0,o.Y)("div",{className:"modal-explanatory-text",children:this.props.helpText})})}}}}]);
//# sourceMappingURL=3044.833a108e.chunk.js.map