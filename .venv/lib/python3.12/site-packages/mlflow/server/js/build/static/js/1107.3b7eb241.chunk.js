"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[1107],{3159:function(e,t,s){s.d(t,{S9:function(){return O},PK:function(){return B},nl:function(){return G},I$:function(){return j},Ay:function(){return z}});var i=s(89555),n=s(31014),r=s(10811),o=s(76010),a=s(68621),l=s(26809),c=s(9133),d=s.n(c),u=s(82645),h=s(26458),p=s(89933),m=s(64912),g=s(68048),y=s(50111);function v({columns:e,values:t,styles:s={},testId:i,scroll:n}){return(0,y.Y)(g.LegacyTable,{className:"mlflow-html-table-view","data-testid":i,dataSource:t,columns:e,scroll:n,size:"middle",pagination:!1,style:s})}var x=s(85017),A=s(48624),C=s(58481);class f extends n.Component{render(){const{runUuids:e}=this.props;return(0,y.Y)("div",{className:"metrics-summary",children:e.length>1?this.renderMetricTables():this.renderRunTable(e[0])})}renderRunTable(e){const{metricKeys:t,latestMetrics:s,minMetrics:i,maxMetrics:n,intl:r}=this.props,o=[{title:r.formatMessage({id:"YINJEO",defaultMessage:"Metric"}),dataIndex:"metricKey",sorter:(e,t)=>e.metricKey<t.metricKey?-1:e.metricKey>t.metricKey?1:0,width:350},...this.dataColumns()];return 0===t.length?null:(0,y.Y)(v,{columns:o,values:k(e,t,s,i,n,r),scroll:{y:300}})}renderMetricTables(){const{runExperimentIds:e,runUuids:t,runDisplayNames:s,metricKeys:i,latestMetrics:r,minMetrics:o,maxMetrics:a,intl:l}=this.props,c=[{title:l.formatMessage({id:"d1Ou4x",defaultMessage:"Run"}),dataIndex:"runLink",sorter:(e,t)=>e.runName<t.runName?-1:e.runName>t.runName?1:0,width:350},...this.dataColumns()];return i.map((i=>(0,y.FD)(n.Fragment,{children:[(0,y.Y)("h1",{children:i}),(0,y.Y)(v,{columns:c,values:I(i,e,t,s,r,o,a,l),scroll:{y:300}})]},i)))}dataColumns(){return[{title:this.props.intl.formatMessage({id:"umeTwG",defaultMessage:"Latest"}),dataIndex:"latestFormatted",sorter:(e,t)=>e.latestValue-t.latestValue,width:200,ellipsis:!0},{title:this.props.intl.formatMessage({id:"iQzwqe",defaultMessage:"Min"}),dataIndex:"minFormatted",sorter:(e,t)=>e.minValue-t.minValue,width:200,ellipsis:!0},{title:this.props.intl.formatMessage({id:"+hkg/y",defaultMessage:"Max"}),dataIndex:"maxFormatted",sorter:(e,t)=>e.maxValue-t.maxValue,width:200,ellipsis:!0}]}}const I=(e,t,s,i,n,r,o,a)=>s.map(((s,l)=>{const c=i[l];return{runName:c,runLink:(0,y.Y)(A.N_,{to:C.Ay.getRunPageRoute(t[s]||"",s),children:c}),key:s,...N(s,e,n,r,o,a)}})),k=(e,t,s,i,n,r)=>t.map((t=>({metricKey:t,key:t,...N(e,t,s,i,n,r)})));var b={name:"nkt64x",styles:"margin-right:10px"},M={name:"nkt64x",styles:"margin-right:10px"},S={name:"nkt64x",styles:"margin-right:10px"};const N=(e,t,s,i,n,r)=>{const o=L(s,e,t),a=L(i,e,t),l=L(n,e,t),c=w(o),d=w(a),u=w(l);return{latestFormatted:(0,y.Y)("span",{title:c,css:b,children:R(o,r)}),minFormatted:(0,y.Y)("span",{title:d,css:M,children:R(a,r)}),maxFormatted:(0,y.Y)("span",{title:u,css:S,children:R(l,r)}),latestValue:c,minValue:d,maxValue:u}},L=(e,t,s)=>e[t]&&e[t][s],w=e=>e&&e.value,R=(e,t)=>void 0===e?"":t.formatMessage({id:"eQgPEi",defaultMessage:"{value} (step={step})"},{value:e.value,step:e.step}),Y=(0,m.Ay)(f);var U=(0,r.Ng)(((e,t)=>{const{runUuids:s}=t,i={},n={},r={},o={};return s.forEach((t=>{const s=(0,h.K4)(t,e);i[t]=s&&s.experimentId,n[t]=(0,x.d0)(t,e),r[t]=(0,x.qP)(t,e),o[t]=(0,x.KQ)(t,e)})),{runExperimentIds:i,latestMetrics:n,minMetrics:r,maxMetrics:o}}))(Y),D=s(51079),T=s.n(D),P=s(25869),K=s(59403);const E=({icon:e,className:t,style:s,onClick:i,...n})=>(0,y.Y)(K.B,{componentId:"codegen_mlflow_app_src_common_components_iconbutton.tsx_20",type:"link",className:t,style:{padding:0,...s},onClick:i,...n,children:e});class q extends n.Component{constructor(...e){super(...e),this.renderContent=()=>{const{experimentId:e,runItems:t}=this.props;return(0,y.Y)("div",{children:t.map((({name:t,runId:s,color:i,y:n},r)=>{const a=`${s}-${r}`,l=C.Ay.getRunPageRoute(e,s);return(0,y.Y)(A.N_,{to:l,children:(0,y.FD)("p",{style:{color:i},children:[(0,y.Y)("i",{className:"fa fa-external-link-o",style:{marginRight:5}}),`${t}, ${o.A.formatMetric(n)}`]})},a)}))})},this.renderTitle=()=>{const{handleClose:e}=this.props;return(0,y.FD)("div",{children:[(0,y.Y)("span",{children:"Jump to individual runs"}),(0,y.Y)(E,{icon:(0,y.Y)("i",{className:"fa fa-times"}),onClick:e,style:{float:"right",marginLeft:"7px"}})]})}}componentDidMount(){document.addEventListener("keydown",this.props.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.props.handleKeyDown)}render(){const{visible:e,x:t,y:s,handleVisibleChange:i}=this.props;return(0,y.Y)(g.LegacyPopover,{content:this.renderContent(),title:this.renderTitle(),placement:"left",visible:e,onVisibleChange:i,children:(0,y.Y)("div",{style:{left:t,top:s,position:"absolute"}})})}}var F=s(7204),H=s(47019),V=s(32039);const B="line",O="bar",G=1e4,X=1e5,j=e=>{const t=["run_id",...Object.keys(e[0].history[0])],s=e.flatMap((({runUuid:e,history:t})=>t.map((t=>[e,...Object.values(t)]))));return[t].concat(s).map((e=>e.join(","))).join("\n")};class Z extends n.Component{constructor(e){super(e),this._isMounted=!1,this.displayPopover=void 0,this.intervalId=void 0,this.legendClickTimeout=null,this.prevLegendClickTime=Math.inf,this.lastClickedLegendCurveId=null,this.MAX_DOUBLE_CLICK_INTERVAL_MS=300,this.SINGLE_CLICK_EVENT_DELAY_MS=this.MAX_DOUBLE_CLICK_INTERVAL_MS+10,this.onFocus=()=>{this.setState({focused:!0})},this.onBlur=()=>{this.setState({focused:!1})},this.clearEventListeners=()=>{window.removeEventListener("focus",this.onFocus),window.removeEventListener("blur",this.onBlur)},this.clearInterval=()=>{clearInterval(this.intervalId),this.intervalId=null},this.allRunsCompleted=()=>this.props.completedRunUuids.length===this.props.runUuids.length,this.isHangingRunUuid=e=>{const t=this.props.latestMetricsByRunUuid[e];if(!t)return!1;const s=Object.values(t).map((({timestamp:e})=>e)),i=Math.max(...s);return(new Date).getTime()-i>6048e5},this.getActiveRunUuids=()=>{const{completedRunUuids:e,runUuids:t}=this.props;return d().difference(t,e).filter(d().negate(this.isHangingRunUuid))},this.shouldPoll=()=>!(this.allRunsCompleted()||0===this.getActiveRunUuids().length),this.updateUrlState=e=>{const{runUuids:t,metricKey:s,location:i,navigate:n}=this.props,r=JSON.parse(T().parse(i.search).experiments),o={...this.getUrlState(),...e},{selectedXAxis:a,selectedMetricKeys:l,showPoint:c,yAxisLogScale:d,lineSmoothness:u,layout:h,deselectedCurves:p,lastLinearYAxisRange:m}=o;n(C.Ay.getMetricPageRoute(t,s,r,l,h,a,d,u,c,p,m),{replace:!0})},this.getNumTotalMetrics=()=>this.props.metricsWithRunInfoAndHistory.map((({history:e})=>e.length)).reduce(((e,t)=>e+t),0),this.loadMetricHistory=(e,t)=>{if(this.getNumTotalMetrics()>=X)return o.A.logErrorAndNotifyUser("The total number of metric data points exceeded 100,000. Cannot fetch more metrics."),Promise.resolve([]);this.setState({loading:!0});const s=e.flatMap((e=>t.map((t=>({runUuid:e,metricKey:t}))))).filter((({runUuid:e,metricKey:t})=>this.props.latestMetricsByRunUuid[e].hasOwnProperty(t))).map((async({runUuid:e,metricKey:t})=>{const s=[],i=(0,F.yk)();s.push(i);let n=(await this.props.getMetricHistoryApi(e,t,25e3,void 0,i)).value.next_page_token;for(;n;){if(this.getNumTotalMetrics()>=X)return{requestIds:s,success:!1};const i=(0,F.yk)();s.push(i);n=(await this.props.getMetricHistoryApi(e,t,25e3,n,i)).value.next_page_token}return{requestIds:s,success:!0}}));return Promise.all(s).then((e=>(this._isMounted&&this.setState({loading:!1}),e.every((({success:e})=>e))||o.A.logErrorAndNotifyUser("The total number of metric data points exceeded 100,000. Aborted fetching metrics."),e.flatMap((({requestIds:e})=>e)))))},this.loadRuns=e=>{const t=[];return e.forEach((e=>{const s=(0,F.yk)();this.props.getRunApi(e),t.push(s)})),t},this.getMetrics=()=>{const e=this.getUrlState(),t=new Set(e.selectedMetricKeys),{selectedXAxis:s}=e,{metricsWithRunInfoAndHistory:i}=this.props,n=i.filter((e=>t.has(e.metricKey)));return n.forEach((e=>{const t=s===p.c1&&e.history[0]&&d().isNumber(e.history[0].step);e.history.sort(t?o.A.compareByStepAndTimestamp:o.A.compareByTimestamp)})),n},this.handleYAxisLogScaleChange=e=>{const t=this.getUrlState(),s=d().cloneDeep(t.layout),i=e?"log":"linear";if(!e&&t.lastLinearYAxisRange&&t.lastLinearYAxisRange.length>0)return s.yaxis={type:"linear",range:t.lastLinearYAxisRange},void this.updateUrlState({layout:s,lastLinearYAxisRange:[]});if(!t.layout.yaxis||!t.layout.yaxis.range)return s.yaxis={type:i,autorange:!0,..."log"===i?{exponentformat:"e"}:{}},void this.updateUrlState({layout:s,lastLinearYAxisRange:[]});let n=[];const r=t.layout.yaxis.range;e?r[0]<=0?(n=r,s.yaxis={type:"log",autorange:!0,exponentformat:"e"}):s.yaxis={type:"log",range:[Math.log(r[0])/Math.log(10),Math.log(r[1])/Math.log(10)],exponentformat:"e"}:s.yaxis={type:"linear",range:[Math.pow(10,r[0]),Math.pow(10,r[1])]},this.updateUrlState({layout:s,lastLinearYAxisRange:n})},this.handleXAxisChange=e=>{const t=this.getUrlState(),s={[p.up]:"date",[p.gW]:"linear",[p.c1]:"linear"}[e.target.value]||"linear",i={...t.layout,xaxis:{autorange:!0,type:s}};this.updateUrlState({selectedXAxis:e.target.value,layout:i})},this.handleLayoutChange=e=>{this.displayPopover=!1;const t=this.getUrlState(),{"xaxis.range[0]":s,"xaxis.range[1]":i,"yaxis.range[0]":n,"yaxis.range[1]":r,"xaxis.autorange":o,"yaxis.autorange":a,"yaxis.showspikes":l,"xaxis.showspikes":c,...d}=e;let u={...t.layout,...d},h=[...t.lastLinearYAxisRange];const p=u.xaxis||{};void 0!==s&&void 0!==i&&(p.range=[s,i],p.autorange=!1),c&&(p.showspikes=!0),o&&(p.autorange=!0);const m=u.yaxis||{};if(void 0!==n&&void 0!==r&&(m.range=[n,r],m.autorange=!1),l&&(m.showspikes=!0),a){h=[];const e=t.layout&&t.layout.yaxis&&"log"===t.layout.yaxis.type?"log":"linear";m.autorange=!0,m.type=e}"log"===m.type&&(m.exponentformat="e"),u={...u,xaxis:p,yaxis:m},this.updateUrlState({layout:u,lastLinearYAxisRange:h})},this.handleDownloadCsv=()=>{const e=j(this.props.metricsWithRunInfoAndHistory),t=new Blob([e],{type:"application/csv;charset=utf-8"});(0,H.saveAs)(t,"metrics.csv")},this.handleLegendClick=({curveNumber:e,data:t})=>{const s=this.getUrlState(),i=Date.now();if(i-this.prevLegendClickTime<this.MAX_DOUBLE_CLICK_INTERVAL_MS&&e===this.lastClickedLegendCurveId)this.handleLegendDoubleClick({curveNumber:e,data:t}),this.prevLegendClickTime=Math.inf;else{const n=Z.getCurveKey(t[e]);this.legendClickTimeout=window.setTimeout((()=>{const e=new Set(s.deselectedCurves);e.has(n)?e.delete(n):e.add(n),this.updateUrlState({deselectedCurves:Array.from(e)})}),this.SINGLE_CLICK_EVENT_DELAY_MS),this.prevLegendClickTime=i}return this.lastClickedLegendCurveId=e,!1},this.handleLegendDoubleClick=({curveNumber:e,data:t})=>{window.clearTimeout(this.legendClickTimeout);const s=Z.getCurveKey(t[e]),i=t.map((e=>Z.getCurveKey(e))).filter((e=>e!==s));return this.updateUrlState({deselectedCurves:i}),!1},this.handleMetricsSelectChange=e=>{const t=this.getUrlState().selectedMetricKeys||[],s=e.filter((e=>!t.includes(e)));this.updateUrlState({selectedMetricKeys:e}),this.loadMetricHistory(this.props.runUuids,s).then((e=>{this.setState({loading:!1}),this.setState((t=>({historyRequestIds:[...t.historyRequestIds,...e]})))}))},this.handleShowPointChange=e=>this.updateUrlState({showPoint:e}),this.handleLineSmoothChange=e=>this.updateUrlState({lineSmoothness:e}),this.handleKeyDownOnPopover=({key:e})=>{"Escape"===e&&this.setState({popoverVisible:!1})},this.updatePopover=e=>{this.displayPopover=!this.displayPopover,setTimeout((()=>{if(this.displayPopover){this.displayPopover=!1;const{popoverVisible:t,popoverX:s,popoverY:i}=this.state,{points:n,event:{clientX:r,clientY:o}}=e,a=s===r&&i===o,l=n.sort(((e,t)=>t.y-e.y)).map((e=>({runId:e.data.runId,name:e.data.name,color:e.fullData.marker.color,y:e.y})));this.setState({popoverVisible:!t||!a,popoverX:r,popoverY:o,popoverRunItems:l})}}),300)},this.state={historyRequestIds:[],popoverVisible:!1,popoverX:0,popoverY:0,popoverRunItems:[],focused:!0,loading:!1},this.displayPopover=!1,this.intervalId=null}hasMultipleExperiments(){return this.props.experimentIds&&this.props.experimentIds.length>1}componentDidMount(){this._isMounted=!0,this.loadMetricHistory(this.props.runUuids,this.getUrlState().selectedMetricKeys),this.shouldPoll()&&(window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),this.intervalId=setInterval((()=>{if(this.state.focused){const e=this.getActiveRunUuids();this.loadMetricHistory(e,this.getUrlState().selectedMetricKeys),this.loadRuns(e),this.shouldPoll()||(this.clearEventListeners(),this.clearInterval())}}),G))}componentWillUnmount(){this._isMounted=!1,this.clearEventListeners(),this.clearInterval()}getUrlState(){return o.A.getMetricPlotStateFromUrl(this.props.location.search)}static predictChartType(e){return e&&e.length&&d().every(e,(e=>e.history&&1===e.history.length))?O:B}static isComparing(e){const t=T().parse(e),s=t&&t["?runs"];return!!s&&JSON.parse(s).length>1}getAxisType(){const e=this.getUrlState();return e.layout&&e.layout.yaxis&&"log"===e.layout.yaxis.type?"log":"linear"}static getCurveKey(e){return"bar"===e.type?e.runId:o.A.getCurveKey(e.runId,e.metricName)}render(){const{experimentIds:e,runUuids:t,runDisplayNames:s,distinctMetricKeys:n,location:r}=this.props,{popoverVisible:o,popoverX:l,popoverY:c,popoverRunItems:d,loading:h}=this.state,m=this.getUrlState(),{showPoint:g,selectedXAxis:v,selectedMetricKeys:x,lineSmoothness:A}=m,C="log"===this.getAxisType(),{historyRequestIds:f}=this.state,I=this.getMetrics(),k=Z.predictChartType(I);return(0,y.FD)("div",{className:"mlflow-metrics-plot-container",children:[(0,y.Y)(p.jC,{numRuns:this.props.runUuids.length,numCompletedRuns:this.props.completedRunUuids.length,distinctMetricKeys:n,selectedXAxis:v,selectedMetricKeys:x,handleXAxisChange:this.handleXAxisChange,handleMetricsSelectChange:this.handleMetricsSelectChange,handleShowPointChange:this.handleShowPointChange,handleYAxisLogScaleChange:this.handleYAxisLogScaleChange,handleLineSmoothChange:this.handleLineSmoothChange,chartType:k,lineSmoothness:A,yAxisLogScale:C,showPoint:g,handleDownloadCsv:this.handleDownloadCsv,disableSmoothnessControl:this.props.containsInfinities}),(0,y.Y)("div",{className:"metrics-plot-data",children:(0,y.FD)(a.Ay,{requestIds:f,shouldOptimisticallyRender:0===f.length,children:[this.hasMultipleExperiments()?null:(0,y.Y)(q,{experimentId:e[0],visible:o,x:l,y:c,runItems:d,handleKeyDown:this.handleKeyDownOnPopover,handleClose:()=>this.setState({popoverVisible:!1}),handleVisibleChange:e=>this.setState({popoverVisible:e})}),(0,y.Y)(K.S,{size:"large",css:(0,i.AH)({visibility:h?"visible":"hidden"},"")}),(0,y.Y)(u.gT,{runUuids:t,runDisplayNames:s,xAxis:v,metrics:this.getMetrics(),metricKeys:x,showPoint:g,chartType:k,isComparing:Z.isComparing(r.search),lineSmoothness:A,extraLayout:m.layout,deselectedCurves:m.deselectedCurves,onLayoutChange:this.handleLayoutChange,onClick:this.updatePopover,onLegendClick:this.handleLegendClick,onLegendDoubleClick:this.handleLegendDoubleClick}),(0,y.Y)(U,{runUuids:t,runDisplayNames:s,metricKeys:x})]})})]})}}Z.defaultProps={containsInfinities:!1};const W={getMetricHistoryApi:l.Ly,getRunApi:l.aO};var z=(0,P.h)((0,r.Ng)(((e,t)=>{const{runUuids:s}=t,i=s.filter((t=>"RUNNING"!==(0,h.K4)(t,e).status)),{latestMetricsByRunUuid:n,metricsByRunUuid:r}=e.entities,a=d().flatMap(s,(e=>{const t=n[e];return t?Object.keys(t):[]})),l=[...new Set(a)].sort(),c=[];let u=!1;const p=d().flatMap(s,(t=>{const s=o.A.getRunDisplayName((0,h.K4)(t,e),t);c.push(s);const i=r[t];return i?Object.keys(i).map((e=>{const n=i[e].map((e=>(0,V.rj)(e)));return n.some((({value:e})=>"number"===typeof e&&!isNaN(e)&&!isFinite(e)))&&(u=!0),{metricKey:e,history:n,runUuid:t,runDisplayName:s}})):[]}));return{runDisplayNames:c,latestMetricsByRunUuid:n,distinctMetricKeys:l,metricsWithRunInfoAndHistory:p,completedRunUuids:i,containsInfinities:u}}),W)(Z))},20193:function(e,t,s){s.d(t,{o:function(){return p}});var i=s(89555),n=s(59403),r=s(68048),o=s(70169),a=s(9133),l=s(31014),c=s(50111);const d=(e,t,s)=>(0,a.keys)(e).reduce(((e,s)=>Math.abs(Number(s)-t)<Math.abs(e-t)?Number(s):Number(e)),s),u=(e,t,s)=>"down"===s?Math.max(...Object.keys(e).filter((e=>Number(e)<t)).map(Number)):Math.min(...Object.keys(e).filter((e=>Number(e)>t)).map(Number));var h={name:"b9l38d",styles:"width:min-content"};const p=({max:e=1,min:t=0,step:s,marks:p,value:m,onChange:g,disabled:y,onAfterChange:v,componentId:x,className:A})=>{const{theme:C}=(0,n.u)(),f=!(0,a.isEmpty)(p),I=f&&Object.keys(p).length<10,[k,b]=(0,l.useState)(void 0);return(0,c.FD)("div",{css:(0,i.AH)({display:"flex",height:C.general.heightSm,gap:C.spacing.md,alignItems:"center"},""),children:[(0,c.FD)(r.Slider.Root,{disabled:y,css:(0,i.AH)({flex:1,position:"relative","span:last-child":{zIndex:2}},""),className:A,min:t,max:e,value:[null!==m&&void 0!==m?m:0],onValueCommit:([e])=>null===v||void 0===v?void 0:v(e),onKeyDown:e=>{if(f&&(e.preventDefault(),["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key))){const t=u(p,null!==m&&void 0!==m?m:0,"ArrowLeft"===e.key||"ArrowDown"===e.key?"down":"up");null===v||void 0===v||v(t),g(t)}},onValueChange:([e])=>{g(f?d(p,e,null!==m&&void 0!==m?m:0):e)},step:null!==s&&void 0!==s?s:void 0,children:[I&&(0,c.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,marginRight:14},""),children:(0,a.keys)(p).map((s=>(0,c.Y)("div",{css:(0,i.AH)({position:"absolute",zIndex:1,top:0,right:0,bottom:0,marginLeft:-1.5,marginTop:6,pointerEvents:"none",borderRadius:"100%",backgroundColor:C.colors.actionPrimaryBackgroundDefault,height:8,width:8,opacity:.5},""),style:{left:Number(s)/(e-t)*100+"%"}},s)))}),(0,c.Y)(r.Slider.Track,{className:"TRACK",children:(0,c.Y)(r.Slider.Range,{})}),(0,c.Y)(r.Slider.Thumb,{css:(0,i.AH)({position:"relative",height:14,width:14},"")})]}),(0,c.Y)(o.I,{componentId:null!==x&&void 0!==x?x:"mlflow.experiment_tracking.common.line_smooth_slider",type:"number",disabled:y,min:t,max:e,css:h,step:s,value:null!==k&&void 0!==k?k:m,onBlur:()=>{(0,a.isUndefined)(k)||(f?(null===v||void 0===v||v(d(p,k,null!==m&&void 0!==m?m:0)),g(d(p,k,null!==m&&void 0!==m?m:0))):(null===v||void 0===v||v((0,a.clamp)(k,t,e)),g((0,a.clamp)(k,t,e))),b(void 0))},onChange:({target:s,nativeEvent:i})=>{if(i instanceof InputEvent)b(Number(s.value));else if(f){const e=u(p,null!==m&&void 0!==m?m:0,Number(s.value)<Number(m)?"down":"up");g(e)}else g((0,a.clamp)(Number(s.value),t,e))}})]})}},27705:function(e,t,s){s.d(t,{g:function(){return o}});var i=s(31014),n=s(76010),r=s(50111);class o extends i.Component{constructor(...e){super(...e),this.state={error:null}}componentDidCatch(e,t){this.setState({error:e}),console.error(e,t)}renderErrorMessage(e){return this.props.showServerError?(0,r.FD)("div",{children:["Error message: ",e.message]}):""}render(){const{children:e}=this.props,{error:t}=this.state;return t?(0,r.Y)("div",{children:(0,r.FD)("p",{children:[(0,r.Y)("i",{"data-testid":"icon-fail",className:"fa fa-exclamation-triangle mlflow-icon-fail",css:a.wrapper}),(0,r.Y)("span",{children:" Something went wrong with this section. "}),(0,r.Y)("span",{children:"If this error persists, please report an issue "}),(0,r.Y)("a",{href:n.A.getSupportPageUrl(),target:"_blank",children:"here"}),".",this.renderErrorMessage(t)]})}):e}}const a={wrapper:{marginLeft:-2}}},34860:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHcAAAB3CAYAAAA5Od+KAAAAAXNSR0IArs4c6QAABBdpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDpERTk4ODkyMDVDMEQxMUU4QjcwMkI4NjVBQkFBMDNBNzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpERTk4ODkyMTVDMEQxMUU4QjcwMkI4NjVBQkFBMDNBNzwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpERTk4ODkyMzVDMEQxMUU4QjcwMkI4NjVBQkFBMDNBNzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDpERTk4ODkyMjVDMEQxMUU4QjcwMkI4NjVBQkFBMDNB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"},68621:function(e,t,s){s.d(t,{dD:function(){return d}});var i=s(31014),n=s(10811),r=s(26458),o=s(96277),a=s(47664),l=s(50111);class c extends i.Component{constructor(...e){super(...e),this.state={shouldRender:!1,shouldRenderError:!1}}static getErrorRequests(e,t){return e.filter((e=>void 0!==e.error&&!(t&&t.includes(e.id)&&e.error.getErrorCode()===a.tG.RESOURCE_DOES_NOT_EXIST)))}static getDerivedStateFromProps(e){const t=!!e.requests.length&&e.requests.every((e=>e&&!1===e.active)),s=c.getErrorRequests(e.requests,e.requestIdsWith404sToIgnore);return{shouldRender:t,shouldRenderError:s.length>0,requestErrors:s}}getRenderedContent(){const{children:e,requests:t,customSpinner:s,permissionDeniedView:i,suppressErrorThrow:n,customRequestErrorHandlerFn:r}=this.props,{shouldRender:c,shouldRenderError:u,requestErrors:h}=this.state,p=h.filter((e=>e.error.getErrorCode()===a.tG.PERMISSION_DENIED));return"function"===typeof e?e(!c,u,t,h):c||u||this.props.shouldOptimisticallyRender?p.length>0&&i?i:(u&&!n&&(r?r(h):d(h)),e):s||(0,l.Y)(o.y,{})}render(){return this.getRenderedContent()}}c.defaultProps={requests:[],requestIdsWith404sToIgnore:[],shouldOptimisticallyRender:!1};const d=e=>{throw console.error("ERROR",e),Error(`A request error occurred.: ${e.error}`)};t.Ay=(0,n.Ng)(((e,t)=>({requests:(0,r.EW)(t.requestIds,e)})))(c)},79445:function(e,t,s){s.d(t,{W:function(){return l}});var i=s(31014),n=s(68048),r=s(27705),o=s(50111);const a=i.lazy((()=>s.e(4850).then(s.bind(s,84850)))),l=({fallback:e,...t})=>(0,o.Y)(r.g,{children:(0,o.Y)(i.Suspense,{fallback:null!==e&&void 0!==e?e:(0,o.Y)(n.LegacySkeleton,{active:!0}),children:(0,o.Y)(a,{...t})})})},82645:function(e,t,s){s.d(t,{gT:function(){return C},mV:function(){return y}});var i=s(4473),n=s(68341),r=s(31014),o=s(76010),a=s(9133),l=s.n(a),c=s(47019),d=s(89933),u=s(3159),h=s(79445),p=s(32039),m=s(64912),g=s(50111);const y=(e,t)=>{if(t<=1||!e||e.length<=1||e.every((t=>t===e[0])))return e;const s=t/(d.W0+1),i=[];let n=0;for(let r=0;r<e.length;r++)if(isNaN(e[r]))i.push(e[r]);else{n=n*s+(1-s)*e[r];const t=n/(1-Math.pow(s,r+1));i.push(t)}return i},v={width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"};var x=(0,n.A)("annotationData");class A extends r.Component{constructor(...e){super(...e),this.regenerateInfinityAnnotations=()=>{var e;const{metrics:t,xAxis:s,extraLayout:n}=this.props,r="log"===(null===n||void 0===n||null===(e=n.yaxis)||void 0===e?void 0:e.type),o={};t.forEach((e=>{const{metricKey:t,history:i}=e;o[t]=(0,p.cX)({xValues:C.getXValuesForLineChart(i,s,this.props.intl),yValues:i.map((e=>"number"===typeof e.value?e.value:Number(e.value))),isLogScale:r,stringFormatter:e=>this.props.intl.formatMessage(e,{metricKey:t})})})),(0,i.A)(this,x)[x]=o},Object.defineProperty(this,x,{writable:!0,value:{}}),this.getPlotPropsForLineChart=()=>{const{metrics:e,xAxis:t,showPoint:s,lineSmoothness:n,isComparing:r,deselectedCurves:a}=this.props,l=new Set(a),c=[],d=[],u={data:e.map((e=>{const{metricKey:a,runDisplayName:u,history:h,runUuid:p}=e,m=h.map((e=>"number"===typeof e.value?e.value:Number(e.value))),g=m.filter((e=>!isNaN(e))).length<=1,v=!l.has(o.A.getCurveKey(p,a))||"legendonly";return(0,i.A)(this,x)[x]&&a in(0,i.A)(this,x)[x]&&!0===v&&(c.push(...(0,i.A)(this,x)[x][a].shapes),d.push(...(0,i.A)(this,x)[x][a].annotations)),{name:C.getLineLegend(a,u,r),x:C.getXValuesForLineChart(h,t),y:(g?m:y(m,n)).map((e=>isFinite(e)?e:NaN)),text:m.map((e=>isNaN(e)?e:e.toFixed(5))),type:"scattergl",mode:g?"markers":"lines+markers",marker:{opacity:g||s?1:0},hovertemplate:g||1===n?"%{y}":"Value: %{text}<br>Smoothed: %{y}",visible:v,runId:p,metricName:a}}))};return u.layout={...u.layout,...this.props.extraLayout,shapes:c,annotations:d},u},this.getPlotPropsForBarChart=()=>{const{runUuids:e,runDisplayNames:t,deselectedCurves:s}=this.props,i=this.props.metrics.reduce(((e,t)=>{const{runUuid:s,metricKey:i,history:n}=t,r=n[0]&&n[0].value;return e[i]?e[i][s]=r:e[i]={metricKey:i,[s]:r},e}),{}),n=l().sortBy(Object.values(i),"metricKey"),r=n.map((e=>e.metricKey)),a=new Set(s),c={data:e.map(((e,s)=>{const i=a.has(e)?{visible:"legendonly"}:{};return{name:o.A.truncateString(t[s],24),x:r,y:n.map((t=>t[e])),type:"bar",runId:e,...i}})),layout:{barmode:"group"}};return c.layout={...c.layout,...this.props.extraLayout},c}}static getXValuesForLineChart(e,t,s){if(0===e.length)return[];switch(t){case d.c1:return e.map((({step:e})=>e));case d.gW:{const{timestamp:t}=l().minBy(e,"timestamp");return e.map((({timestamp:e})=>(e-t)/1e3))}default:return e.map((({timestamp:e})=>e))}}componentDidMount(){this.regenerateInfinityAnnotations()}componentDidUpdate(){this.regenerateInfinityAnnotations()}render(){const{onLayoutChange:e,onClick:t,onLegendClick:s,onLegendDoubleClick:i}=this.props,n=this.props.chartType===u.S9?this.getPlotPropsForBarChart():this.getPlotPropsForLineChart();return(0,g.Y)("div",{className:"metrics-plot-view-container",children:(0,g.Y)(h.W,{...n,useResizeHandler:!0,onRelayout:e,onClick:t,onLegendClick:s,onLegendDoubleClick:i,style:{width:"100%",height:"100%"},layout:l().cloneDeep(n.layout),config:{displaylogo:!1,scrollZoom:!0,modeBarButtonsToRemove:["sendDataToCloud"],modeBarButtonsToAdd:[{name:"Download plot data as CSV",icon:v,click:()=>{const e=(0,u.I$)(this.props.metrics),t=new Blob([e],{type:"application/csv;charset=utf-8"});(0,c.saveAs)(t,"metrics.csv")}}]}})})}}A.getLineLegend=(e,t,s)=>{let i=e;return s&&(i+=`, ${o.A.truncateString(t,24)}`),i};const C=(0,m.Ay)(A)},89933:function(e,t,s){s.d(t,{W0:function(){return v},jC:function(){return f},gW:function(){return y},c1:function(){return g},up:function(){return m}});var i=s(31014),n=s(68048),r=s(59403),o=s(50111);const a=e=>(0,o.FD)("div",{css:l.wrapper,className:e.className,children:[(0,o.Y)("div",{css:l.track,children:(0,o.Y)("div",{css:l.progressTrack,style:{width:`${e.percent}%`}})}),e.format(e.percent)]}),l={wrapper:e=>({display:"flex",alignItems:"center",gap:e.spacing.sm}),track:e=>({backgroundColor:e.colors.backgroundSecondary,height:e.spacing.sm,flex:1,borderRadius:e.spacing.sm}),progressTrack:e=>({backgroundColor:e.colors.primary,height:e.spacing.sm,borderRadius:e.spacing.sm})};var c=s(3159),d=s(88443),u=s(64912),h=s(20193);const p=n.Radio.Group,m="wall",g="step",y="relative",v=100;var x={name:"1vuhrro",styles:"text-align:justify;text-align-last:left"};class A extends i.Component{constructor(...e){super(...e),this.handleMetricsSelectFilterChange=(e,t)=>t.props.title.toUpperCase().includes(e.toUpperCase()),this.getAllMetricKeys=()=>{const{distinctMetricKeys:e}=this.props;return e.map((e=>({title:e,value:e,key:e})))}}render(){const{chartType:e,yAxisLogScale:t,lineSmoothness:s,showPoint:i,numRuns:l,numCompletedRuns:u,disableSmoothnessControl:A}=this.props,f=(0,o.Y)(d.A,{id:"0gIYIc",defaultMessage:'Make the line between points "smoother" based on Exponential Moving Average. Smoothing can be useful for displaying the overall trend when the logging frequency is high.'}),I=(0,o.Y)(d.A,{id:"UEDu0c",defaultMessage:"MLflow UI automatically fetches metric histories for active runs and updates the metrics plot with a {interval} second interval.",values:{interval:Math.round(c.nl/1e3)}});return(0,o.FD)("div",{className:"plot-controls",css:[C.controlsWrapper,e===c.PK&&C.centeredControlsWrapper,""],children:[e===c.PK?(0,o.FD)("div",{children:[(0,o.Y)("div",{className:"inline-control",children:(0,o.FD)("div",{className:"control-label",children:[(0,o.Y)(d.A,{id:"nEoTsR",defaultMessage:"Completed Runs"})," ",(0,o.Y)(n.LegacyTooltip,{title:I,children:(0,o.Y)(n.QuestionMarkIcon,{})}),(0,o.Y)(a,{percent:Math.round(100*u/l),format:()=>`${u}/${l}`})]})}),(0,o.FD)("div",{className:"inline-control",children:[(0,o.Y)("div",{className:"control-label",children:(0,o.Y)(d.A,{id:"yzxYIm",defaultMessage:"Points:"})}),(0,o.Y)(n.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_120","data-testid":"show-point-toggle",defaultChecked:i,onChange:this.props.handleShowPointChange})]}),!A&&(0,o.FD)("div",{className:"block-control",children:[(0,o.FD)("div",{className:"control-label",children:[(0,o.Y)(d.A,{id:"T4eipT",defaultMessage:"Line Smoothness"})," ",(0,o.Y)(n.LegacyTooltip,{title:f,children:(0,o.Y)(n.QuestionMarkIcon,{})})]}),(0,o.Y)(h.o,{"data-testid":"smoothness-toggle",min:1,max:v,onChange:this.props.handleLineSmoothChange,value:s})]}),(0,o.FD)("div",{className:"block-control",children:[(0,o.Y)("div",{className:"control-label",children:(0,o.Y)(d.A,{id:"L26D19",defaultMessage:"X-axis:"})}),(0,o.FD)(p,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_154",name:"metrics-plot-x-axis-radio-group",css:C.xAxisControls,onChange:this.props.handleXAxisChange,value:this.props.selectedXAxis,children:[(0,o.Y)(n.Radio,{value:g,"data-testid":"x-axis-radio",children:(0,o.Y)(d.A,{id:"nQoUED",defaultMessage:"Step"})}),(0,o.Y)(n.Radio,{value:m,"data-testid":"x-axis-radio",children:(0,o.Y)(d.A,{id:"8flziy",defaultMessage:"Time (Wall)"})}),(0,o.Y)(n.Radio,{value:y,"data-testid":"x-axis-radio",children:(0,o.Y)(d.A,{id:"aNnPar",defaultMessage:"Time (Relative)"})})]})]})]}):null,(0,o.FD)("div",{className:"block-control",children:[(0,o.Y)("div",{className:"control-label",children:(0,o.Y)(d.A,{id:"QC5Vjq",defaultMessage:"Y-axis:"})}),(0,o.Y)(n.LegacySelect,{placeholder:this.props.intl.formatMessage({id:"aXw0NO",defaultMessage:"Please select metric"}),value:this.props.selectedMetricKeys,onChange:this.props.handleMetricsSelectChange,mode:"multiple",css:C.axisSelector,children:this.getAllMetricKeys().map((e=>(0,o.Y)(n.LegacySelect.Option,{value:e.value,children:e.title},e.key)))})]}),(0,o.FD)("div",{className:"inline-control",children:[(0,o.Y)("div",{className:"control-label",children:(0,o.Y)(d.A,{id:"HGG+BI",defaultMessage:"Y-axis Log Scale:"})}),(0,o.Y)(n.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_220",defaultChecked:t,onChange:this.props.handleYAxisLogScaleChange})]}),(0,o.Y)("div",{className:"inline-control",children:(0,o.FD)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_222",css:x,onClick:this.props.handleDownloadCsv,children:[(0,o.Y)(d.A,{id:"3S3Ah4",defaultMessage:"Download data"}),(0,o.Y)("i",{className:"fa fa-download"})]})})]})}}A.defaultProps={disableSmoothnessControl:!1};const C={xAxisControls:e=>({label:{marginTop:e.spacing.xs,marginBottom:e.spacing.xs}}),controlsWrapper:{minWidth:"20%",maxWidth:"30%"},axisSelector:{width:"100%"},centeredControlsWrapper:{justifyContent:"center"}},f=(0,u.Ay)(A)},96277:function(e,t,s){s.d(t,{y:function(){return o}});var i=s(34860),n=s(89555),r=s(50111);function o({showImmediately:e}){return(0,r.Y)("div",{css:t=>a.spinner(t,e),children:(0,r.Y)("img",{alt:"Page loading...",src:i})})}const a={spinner:(e,t)=>({width:100,marginTop:100,marginLeft:"auto",marginRight:"auto",img:{position:"absolute",opacity:0,top:"50%",left:"50%",width:2*e.general.heightBase,height:2*e.general.heightBase,marginTop:-e.general.heightBase,marginLeft:-e.general.heightBase,animation:`${n.i7`
          0% {
            opacity: 1;
          }
          100% {
            opacity: 1;
            -webkit-transform: rotate(360deg);
                transform: rotate(360deg);
            }
          `} 3s linear infinite`,animationDelay:t?"0s":"0.5s"}})}}}]);
//# sourceMappingURL=1107.3b7eb241.chunk.js.map