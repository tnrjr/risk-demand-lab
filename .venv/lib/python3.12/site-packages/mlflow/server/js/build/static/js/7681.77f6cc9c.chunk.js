(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[7681],{1670:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r,i,o=n(31014);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function s({title:e,titleId:t,...n},s){return o.createElement("svg",a({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,r||(r=o.createElement("path",{d:"M8 3C3.45 3 1.4375 6.33333 1 8C1.4375 9.66667 3.45 13 8 13C12.55 13 14.5625 9.66667 15 8C14.5625 6.33333 12.55 3 8 3Z",fill:"currentColor",stroke:"currentColor"})),i||(i=o.createElement("circle",{cx:8,cy:8,r:2.25,fill:"currentColor",stroke:"white",strokeWidth:1.5})))}const l=o.forwardRef(s);n.p},3546:function(e,t,n){"use strict";n.d(t,{ts:function(){return u},sO:function(){return d},sR:function(){return p},Px:function(){return m}});var r=n(9133),i=n(31014),o=n(48624),a=n(83028),s=n(45653);const l=e=>(0,r.isArray)(e)?e.join():e,c={searchFilter:{deserializeLocalStorage:l,deserializeQueryString:l},orderByAsc:{serializeQueryString(e){return e.toString()},deserializeQueryString(e){return"true"===e}},datasetsFilter:{serializeQueryString(e){const t=e.map((({name:e,digest:t,context:n})=>({name:e,digest:t,context:n})));return(0,s.Qr)(JSON.stringify(t))},deserializeQueryString(e){try{const t=JSON.parse((0,s.yv)(e));return Array.isArray(t)?t:[]}catch{return[]}}},compareRunCharts:{serializeQueryString(e){return(0,s.Qr)(JSON.stringify(e))},deserializeQueryString(e){try{const t=JSON.parse((0,s.yv)(e));if(!Array.isArray(t))return;return t}catch{return}}},compareRunsMode:{serializeLocalStorage(){}}},d=["searchFilter","orderByKey","orderByAsc","startTime","lifecycleFilter","modelVersionFilter","datasetsFilter"],u="isPreview",p=()=>{const[e]=(0,o.ok)(),t=(0,i.useMemo)((()=>(0,r.pick)(Object.fromEntries(e.entries()),d)),[e]),n="true"===e.get(u),{searchFilter:s,orderByKey:l,orderByAsc:p,startTime:m,lifecycleFilter:h,modelVersionFilter:g,datasetsFilter:v}=t,f=(0,r.keys)(t).length<1,{experimentId:y}=(0,o.g)(),x=e.get("experiments"),C=(0,i.useMemo)((()=>y?[y]:x?(e=>{try{return e?JSON.parse(e):[]}catch{return[]}})(x):[]),[y,x]);return[(0,i.useMemo)((()=>{if(f)return null;const e=(e=>{const t={...e};for(const r of Object.keys(t)){var n;const e=null===(n=c[r])||void 0===n?void 0:n.deserializeQueryString;e&&(t[r]=e(t[r]))}return t})((0,r.omitBy)({searchFilter:s,orderByKey:l,orderByAsc:p,startTime:m,lifecycleFilter:h,modelVersionFilter:g,datasetsFilter:v},r.isNil));return(0,r.assign)((0,a.G)(),e)}),[s,l,p,m,h,g,v,f]),C,n]},m=()=>{const[,e]=(0,o.ok)();return(t,n)=>{const i=(e=>{const t={...e};for(const r of Object.keys(t)){var n;const e=null===(n=c[r])||void 0===n?void 0:n.serializeQueryString;e&&(t[r]=e(t[r]))}return t})(t);e((e=>((0,r.entries)(i).forEach((([t,n])=>{e.set(t,n)})),e.delete(u),e)),n)}}},5900:function(e,t,n){"use strict";n.d(t,{i:function(){return xe}});var r=n(31014),i=n(30152),o=n(59264),a=n(36118),s=n(73724),l=n(75627),c=n(6922),d=n(24789),u=n(9133),p=n(91144);const m=(e,t,n,r)=>{const i=(0,u.compact)(t.map((t=>{var i;const o=null===(i=e[t])||void 0===i?void 0:i[n];return o?((e,t,n=!0)=>{const r=(0,u.orderBy)((0,u.compact)((0,u.values)(e).map((({metricsHistory:e})=>e)).flat()),"timestamp");if(r.length<2)return;const i=new Date(t[0]).valueOf(),o=new Date(t[1]).valueOf();let a=n?(0,u.first)(r):void 0;for(let l=0;l<r.length;l++){const e=r[l];if(e.timestamp>i){a=r[l-1]||e;break}}let s=n?(0,u.last)(r):void 0;for(let l=r.length-1;l>=0;l--){const e=r[l];if(e.timestamp<o){s=r[l+1]||e;break}}return(0,u.isUndefined)(a)||(0,u.isUndefined)(s)?void 0:[a.step,s.step]})(o,r,!1):void 0}))),o=(0,u.min)(i.map((([e])=>e))),a=(0,u.max)(i.map((([,e])=>e)));if(!(0,u.isUndefined)(o)&&!(0,u.isUndefined)(a))return[o,a]},h=(e,t,n,r=1e3)=>{const i=(0,u.compact)(t.map((t=>{var i;const o=e[t];if(!o)return null;const{runUuid:a,...s}=o,l=(0,u.values)(s).flatMap((e=>{var t;return null!==(t=e.metricsHistory)&&void 0!==t?t:[]})),c=(null===(i=(0,u.minBy)(l,"timestamp"))||void 0===i?void 0:i.timestamp)||0;return[n[0]*r+c,n[1]*r+c]}))),o=(0,u.min)(i.map((([e])=>e))),a=(0,u.max)(i.map((([,e])=>e)));if(!(0,u.isUndefined)(o)&&!(0,u.isUndefined)(a))return[o,a]};var g=n(10811);var v=n(81850),f=n(50684),y=n(21616),x=n(75145),C=n(6531),b=n(50111);const M=e=>{if((0,p.Iq)()&&e.yAxisKey===i.Kb.EXPRESSION){var t;const n=(null===(t=e.yAxisExpressions)||void 0===t?void 0:t.map((e=>e.expression)))||[];return(null===n||void 0===n?void 0:n.join(" vs "))||""}return e.selectedMetricKeys&&0!==e.selectedMetricKeys.length?e.selectedMetricKeys.join(" vs "):e.metricKey},w=["png","svg","csv","csv-full"],_=({config:e,chartRunData:t,onDelete:n,onEdit:o,onDownloadFullMetricHistoryCsv:_,groupBy:E,fullScreen:R,setFullScreenChart:I,autoRefreshEnabled:k,hideEmptyCharts:A,globalLineChartConfig:Y,isInViewport:D,isInViewportDeferred:T,positionInSection:L,...F})=>{var K;const{xAxisKey:N,selectedXAxisMetricKey:O,lineSmoothness:H}=(0,C.x)(e,Y),B=(0,r.useCallback)((()=>{null===I||void 0===I||I({config:e,title:M(e),subtitle:null})}),[e,I]),P=(0,r.useMemo)((()=>t.filter((({hidden:e})=>!e)).reverse()),[t]),U=(0,r.useMemo)((()=>P.some((e=>e.groupParentInfo))),[P]),z=(0,r.useMemo)((()=>{var t;const n=null!==(t=e.selectedMetricKeys)&&void 0!==t?t:[e.metricKey],r=P.flatMap((({metrics:e})=>Object.keys(e)));return 0===(0,u.intersection)(n,(0,u.uniq)(r)).length}),[e,P]),V=(0,r.useMemo)((()=>{if(U){return[...(0,u.compact)(P.map((e=>e.groupParentInfo))).flatMap((e=>e.runUuids)),...(0,u.compact)(P.filter((e=>!e.groupParentInfo&&!e.belongsToGroup)).map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid})))]}return(0,u.compact)(P.map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid})))}),[P,U]),G=(0,r.useMemo)((()=>{const t=(e=>{var t;const n=[e.metricKey];var r;if(!(0,p.Iq)()||e.yAxisKey!==i.Kb.EXPRESSION)return null!==(r=e.selectedMetricKeys)&&void 0!==r?r:n;const o=null===(t=e.yAxisExpressions)||void 0===t?void 0:t.reduce(((e,t)=>(t.variables.forEach((t=>e.add(t))),e)),new Set);return void 0===o?n:Array.from(o)})(e),n=O?[O]:[];return t.concat(n)}),[e,O]),{setTooltip:j,resetTooltip:W,destroyTooltip:$,selectedRunUuid:q}=(0,l.uN)(e,l.QS.MultipleTracesWithScanline),X=R||D,Q=R||T,{aggregateFunction:J}=E||{},Z=(0,g.d4)((e=>(0,u.pick)(e.entities.sampledMetricsByRunUuid,V)),g.bN),[ee,te]=(0,r.useState)((()=>{if(e.range&&!(0,u.isUndefined)(e.range.yMin)&&!(0,u.isUndefined)(e.range.yMax))return[e.range.yMin,e.range.yMax]})),{setOffsetTimestamp:ne,stepRange:re,xRangeLocal:ie,setXRangeLocal:oe}=((e,t,n,i,o,s="linear")=>{const[l,c]=(0,r.useState)((()=>{if(e.range&&!(0,u.isUndefined)(e.range.xMin)&&!(0,u.isUndefined)(e.range.xMax))return[e.range.xMin,e.range.xMax]})),[d,p]=(0,r.useState)(void 0);return{setOffsetTimestamp:p,stepRange:(0,r.useMemo)((()=>{if(l){if(t===a.fj.TIME&&(0,u.isString)(l[0])&&(0,u.isString)(l[1]))return m(i,o,n,l);if(t===a.fj.TIME_RELATIVE&&d&&(0,u.isNumber)(l[0])&&(0,u.isNumber)(l[1]))return m(i,o,n,d);if(t===a.fj.STEP&&(0,u.isNumber)(l[0])&&(0,u.isNumber)(l[1])){const e=Math.floor("log"===s?10**l[0]:l[0]),t=Math.ceil("log"===s?10**l[1]:l[1]);return e&&t?[e-1,t+1]:void 0}}}),[t,n,l,i,o,d,s]),xRangeLocal:l,setXRangeLocal:c}})(e,N,e.metricKey,Z,V,N===a.fj.STEP?e.xAxisScaleType:"linear"),{resultsByRunUuid:ae,isLoading:se,isRefreshing:le}=(0,d.S)({runUuids:V,metricKeys:G,enabled:Q,maxResults:320,range:re,autoRefreshEnabled:k});(0,r.useEffect)((()=>{$()}),[$,se]);const ce=(0,r.useMemo)((()=>P.map((t=>{const n=G.reduce(((n,r)=>{var i,o;const s=null===(i=ae[t.uuid])||void 0===i||null===(o=i[r])||void 0===o?void 0:o.metricsHistory;return s&&(n[r]=e.ignoreOutliers?(0,a.c1)(s):s),n}),{});return{...t,metricsHistory:n}}))),[G,ae,P,e.ignoreOutliers]),de=(0,v.B)({enabled:U,ungroupedRunsData:ce,metricKeys:G,sampledDataResultsByRunUuid:ae,aggregateFunction:J,selectedXAxisMetricKey:N===a.fj.METRIC?O:void 0,ignoreOutliers:null!==(K=e.ignoreOutliers)&&void 0!==K&&K}),ue=U?de:ce,[pe,me]=(0,f.H)(),he=X,ge=se||!Q,ve=(0,b.Y)("div",{css:[S.lineChartCardWrapper,{height:R?"100%":void 0},""],children:he?ge?(0,b.Y)(c.Us,{}):(0,b.Y)(s.h,{runsData:ue,metricKey:e.metricKey,selectedMetricKeys:e.selectedMetricKeys,scaleType:e.scaleType,xAxisKey:N,xAxisScaleType:e.xAxisScaleType,yAxisKey:e.yAxisKey,yAxisExpressions:e.yAxisExpressions,selectedXAxisMetricKey:O,lineSmoothness:H,useDefaultHoverBox:!1,onHover:j,onUnhover:W,selectedRunUuid:q,onUpdate:({layout:e})=>{if(!R){let t=null===ee||void 0===ee?void 0:ee[0],n=null===ee||void 0===ee?void 0:ee[1],r=null===ie||void 0===ie?void 0:ie[0],i=null===ie||void 0===ie?void 0:ie[1];const{autorange:o,range:s}=e.yaxis||{};!(0,u.isEqual)(o?[void 0,void 0]:s,[t,n])&&$(),o?(t=void 0,n=void 0):s&&(t=s[0],n=s[1]);const{autorange:l,range:c}=e.xaxis||{};if(l)r=void 0,i=void 0;else if(c){const e=(0,u.compact)(P.map((({runInfo:e})=>null===e||void 0===e?void 0:e.runUuid))),t=P.flatMap((({groupParentInfo:e})=>{var t;return null!==(t=null===e||void 0===e?void 0:e.runUuids)&&void 0!==t?t:[]}));if((0,p.v$)()||N!==a.fj.TIME_RELATIVE)if(N===a.fj.TIME_RELATIVE_HOURS){const n=h(ae,[...e,...t],c,36e5);ne([...n])}else ne(void 0);else{const n=h(ae,[...e,...t],c);ne([...n])}r=c[0],i=c[1]}(0,u.isEqual)({xMin:null===ie||void 0===ie?void 0:ie[0],xMax:null===ie||void 0===ie?void 0:ie[1],yMin:null===ee||void 0===ee?void 0:ee[0],yMax:null===ee||void 0===ee?void 0:ee[1]},{xMin:r,xMax:i,yMin:t,yMax:n})||(oe((0,u.isUndefined)(r)||(0,u.isUndefined)(i)?void 0:[r,i]),te((0,u.isUndefined)(t)||(0,u.isUndefined)(n)?void 0:[t,n]))}},xRange:ie,yRange:ee,fullScreen:R,displayPoints:e.displayPoints,onSetDownloadHandler:me,positionInSection:null!==L&&void 0!==L?L:0}):null}),fe=(0,r.useCallback)((t=>{var n,r;const i=null!==(n=null===(r=e.selectedMetricKeys)||void 0===r?void 0:r.join("-"))&&void 0!==n?n:e.metricKey;if("csv-full"!==t)"csv"!==t?null===pe||void 0===pe||pe(t,i):(0,y.Fz)(ue,e.selectedMetricKeys||[e.metricKey],i);else{const t=[...(0,u.compact)(ue.map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid}))),...(0,u.compact)(ue.filter((({groupParentInfo:e})=>e)).flatMap((e=>{var t;return null===(t=e.groupParentInfo)||void 0===t?void 0:t.runUuids})))];null===_||void 0===_||_(t,e.selectedMetricKeys||[e.metricKey])}}),[ue,e,pe,_]);return A&&z?null:R?ve:(0,b.Y)(c.Ox,{onEdit:o,onDelete:n,title:M(e),uuid:e.uuid,dragGroupKey:c.cN.GENERAL_AREA,supportedDownloadFormats:w,onClickDownload:fe,toggleFullScreenChart:z?void 0:B,isRefreshing:le,isHidden:!X,...F,children:z?(0,b.Y)(x.u,{}):ve})},S={lineChartCardWrapper:{overflow:"hidden"}};var E=n(89555),R=n(10661),I=n(59403),k=n(68048);var A={name:"1wcfv52",styles:"margin-right:0"},Y={name:"1wcfv52",styles:"margin-right:0"};const D=({config:e,chartRunData:t,onDelete:n,onEdit:i,fullScreen:o,setFullScreenChart:a,hideEmptyCharts:s,isInViewport:d,...p})=>{const{theme:m}=(0,I.u)(),h=e.xaxis.datasetName||e.yaxis.datasetName?(0,b.FD)("div",{css:(0,E.AH)({flex:1,display:"flex",alignItems:"center",overflow:"hidden",gap:m.spacing.xs},""),children:[(0,b.FD)(I.T.Text,{title:e.xaxis.key,ellipsis:!0,bold:!0,children:[e.xaxis.datasetName&&(0,b.FD)(b.FK,{children:[(0,b.Y)(k.Tag,{componentId:"mlflow.charts.scatter_card_title.dataset_tag",css:A,children:e.xaxis.datasetName})," "]}),e.xaxis.key]}),(0,b.Y)(I.T.Text,{children:"vs"}),(0,b.FD)(I.T.Text,{title:e.xaxis.key,ellipsis:!0,bold:!0,children:[e.yaxis.datasetName&&(0,b.FD)(b.FK,{children:[(0,b.Y)(k.Tag,{componentId:"mlflow.charts.scatter_card_title.dataset_tag",css:Y,children:e.yaxis.datasetName})," "]}),e.yaxis.key]})]}):`${e.xaxis.key} vs. ${e.yaxis.key}`,g=(0,r.useMemo)((()=>t.filter((({hidden:e})=>!e))),[t]),v=(0,r.useMemo)((()=>{var t,n;const r=[null!==(t=e.xaxis.dataAccessKey)&&void 0!==t?t:e.xaxis.key,null!==(n=e.yaxis.dataAccessKey)&&void 0!==n?n:e.yaxis.key],i=g.flatMap((({metrics:e})=>Object.keys(e)));return 0===(0,u.intersection)(r,(0,u.uniq)(i)).length}),[e,g]),{setTooltip:C,resetTooltip:M,selectedRunUuid:w}=(0,l.uN)(e),_=o||d,[S,D]=(0,f.H)(),L=(0,b.Y)("div",{css:[T.scatterChartCardWrapper,{height:o?"100%":void 0},""],children:_?(0,b.Y)(R.i,{runsData:g,xAxis:e.xaxis,yAxis:e.yaxis,onHover:C,onUnhover:M,useDefaultHoverBox:!1,selectedRunUuid:w,onSetDownloadHandler:D}):null});return s&&v?null:o?L:(0,b.Y)(c.Ox,{onEdit:i,onDelete:n,title:h,uuid:e.uuid,dragGroupKey:c.cN.GENERAL_AREA,toggleFullScreenChart:v?void 0:()=>{null===a||void 0===a||a({config:e,title:h,subtitle:null})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:t=>{const n=[e.xaxis.key,e.yaxis.key].join("-");if("csv"!==t&&"csv-full"!==t)null===S||void 0===S||S(t,n);else{const t=[],r=[];for(const n of["xaxis","yaxis"])"PARAM"===e[n].type?t.push(e[n].key):r.push(e[n].key);(0,y.LL)(g,r,t,n)}},...p,children:v?(0,b.Y)(x.u,{}):L})},T={scatterChartCardWrapper:{overflow:"hidden"}};var L=n(66117);const F=({config:e,chartRunData:t,onDelete:n,onEdit:i,fullScreen:o,setFullScreenChart:a,hideEmptyCharts:s,...d})=>{const p=`${e.xaxis.key} vs. ${e.yaxis.key} vs. ${e.zaxis.key}`,m=(0,r.useMemo)((()=>t.filter((({hidden:e})=>!e))),[t]),h=(0,r.useMemo)((()=>{const t=[e.xaxis.key,e.yaxis.key,e.zaxis.key],n=m.flatMap((({metrics:e})=>Object.keys(e)));return 0===(0,u.intersection)(t,(0,u.uniq)(n)).length}),[e,m]),{setTooltip:g,resetTooltip:v,selectedRunUuid:C}=(0,l.uN)(e),[M,w]=(0,f.H)(),_=(0,b.Y)("div",{css:[K.contourChartCardWrapper,{height:o?"100%":void 0},""],children:(0,b.Y)(L.a,{runsData:m,xAxis:e.xaxis,yAxis:e.yaxis,zAxis:e.zaxis,useDefaultHoverBox:!1,onHover:g,onUnhover:v,selectedRunUuid:C,onSetDownloadHandler:w})});return s&&h?null:o?_:(0,b.Y)(c.Ox,{onEdit:i,onDelete:n,title:p,uuid:e.uuid,dragGroupKey:c.cN.GENERAL_AREA,toggleFullScreenChart:h?void 0:()=>{null===a||void 0===a||a({config:e,title:p,subtitle:null})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:t=>{const n=[e.xaxis.key,e.yaxis.key,e.zaxis.key].join("-");if("csv"!==t&&"csv-full"!==t)null===M||void 0===M||M(t,n);else{const t=[],r=[];for(const n of["xaxis","yaxis","zaxis"])"PARAM"===e[n].type?t.push(e[n].key):r.push(e[n].key);(0,y.LL)(m,r,t,n)}},...d,children:h?(0,b.Y)(x.u,{}):_})},K={contourChartCardWrapper:{overflow:"hidden"}};var N,O,H,B;function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(null,arguments)}function U({title:e,titleId:t,...n},i){return r.createElement("svg",P({width:80,height:42,viewBox:"0 0 80 42",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,N||(N=r.createElement("path",{d:"M1.28418 2.34094L39.4998 17.0908L76.3746 7.87216",stroke:"#CF797B",strokeLinecap:"round"})),O||(O=r.createElement("path",{d:"M1.95459 20.443L40.1702 25.1361L77.045 21.1134M1.95459 36.5338L40.1702 35.1929L77.045 25.1361",stroke:"#A88E6F",strokeLinecap:"round"})),H||(H=r.createElement("g",{opacity:.8},r.createElement("path",{d:"M1.28418 1V40.3341",stroke:"#338ECC",strokeLinecap:"round"}),r.createElement("path",{d:"M40.6189 2.07251V39.9763",stroke:"#338ECC",strokeLinecap:"round"}),r.createElement("path",{d:"M77.7156 2.07251V39.9763",stroke:"url(#paint0_linear_2781_406689)",strokeWidth:4,strokeLinecap:"square"}))),B||(B=r.createElement("defs",null,r.createElement("linearGradient",{id:"paint0_linear_2781_406689",x1:78.2156,y1:2.07251,x2:78.2156,y2:39.9763,gradientUnits:"userSpaceOnUse"},r.createElement("stop",{stopColor:"#D04F5E"}),r.createElement("stop",{offset:1,stopColor:"#4D9734"})))))}const z=r.forwardRef(U);n.p;var V=n(21809),G=n(70391),j=n(88443),W=n(21879);var $={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},q={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"};const X=({onEdit:e})=>{const{theme:t}=(0,I.u)();return(0,b.Y)("div",{css:$,children:(0,b.FD)("div",{css:q,children:[(0,b.Y)(z,{}),(0,b.Y)(I.T.Title,{css:(0,E.AH)({marginTop:t.spacing.md},""),color:"secondary",level:3,children:(0,b.Y)(j.A,{id:"VPU43C",defaultMessage:"Compare parameter importance"})}),(0,b.Y)(I.T.Text,{css:(0,E.AH)({marginBottom:t.spacing.md},""),color:"secondary",children:(0,b.Y)(j.A,{id:"V9FtFz",defaultMessage:"Use the parallel coordinates chart to compare how various parameters in model affect your model metrics."})}),(0,b.Y)(I.B,{componentId:"mlflow.charts.parallel_coords_chart_configure_button",type:"primary",onClick:e,children:(0,b.Y)(j.A,{id:"ga32oj",defaultMessage:"Configure chart"})})]})})};var Q={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},J={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"};const Z=()=>{const{theme:e}=(0,I.u)();return(0,b.Y)("div",{css:Q,children:(0,b.FD)("div",{css:J,children:[(0,b.Y)(z,{}),(0,b.Y)(I.T.Title,{css:(0,E.AH)({marginTop:e.spacing.md,textAlign:"center"},""),color:"secondary",level:3,children:(0,b.Y)(j.A,{id:"glxGz2",defaultMessage:"Parallel coordinates chart does not support aggregated string values."})}),(0,b.Y)(I.T.Text,{css:(0,E.AH)({marginBottom:e.spacing.md},""),color:"secondary",children:(0,b.Y)(j.A,{id:"QPC4hV",defaultMessage:"Use other parameters or disable run grouping to continue."})})]})})};var ee={name:"82a6rk",styles:"flex:1"};const te=({config:e,chartRunData:t,onDelete:n,onEdit:i,groupBy:o,fullScreen:a,setFullScreenChart:s,hideEmptyCharts:d,isInViewport:u,...p})=>{const m=(0,W.e)(),h=(0,r.useMemo)((()=>null!==e&&void 0!==e&&e.showAllRuns?t:null===t||void 0===t?void 0:t.filter((({hidden:e})=>!e))),[t,null===e||void 0===e?void 0:e.showAllRuns]),g=(0,r.useMemo)((()=>{var t;return null===(t=e.selectedParams)||void 0===t?void 0:t.some((e=>null===h||void 0===h?void 0:h.some((t=>{var n;return isNaN(Number(null===(n=t.params[e])||void 0===n?void 0:n.value))}))),[e.selectedParams,h])}),[e.selectedParams,h]),v=(0,r.useCallback)((t=>{m((n=>{var r;const i=null===(r=n.compareRunCharts)||void 0===r?void 0:r.map((n=>{if(n.uuid===e.uuid){return{...n,showAllRuns:t}}return n}));return{...n,compareRunCharts:i}}))}),[e.uuid,m]),[f,C]=(0,r.useMemo)((()=>{const t=(0,G.ad)(e);return[t,t?(0,G.fM)(h,e.selectedParams,e.selectedMetrics):[]]}),[e,h]),M=(0,r.useMemo)((()=>0===C.length),[C]),w=a||u,{setTooltip:_,resetTooltip:S,selectedRunUuid:E,closeContextMenu:R}=(0,l.uN)(e),I=g&&o,A=f&&!I,Y=(0,b.Y)(b.FK,{children:e.showAllRuns?(0,b.Y)(j.A,{id:"oY+vPi",defaultMessage:"Showing all runs"}):(0,b.Y)(j.A,{id:"1hI96w",defaultMessage:"Showing only visible runs"})}),D=(0,b.Y)(b.FK,{children:f?I?(0,b.Y)(Z,{}):0===C.length?(0,b.Y)(x.u,{}):(0,b.Y)("div",{css:[ne.parallelChartCardWrapper,{height:a?"100%":void 0},""],children:w?(0,b.Y)(V.A,{data:C,selectedParams:e.selectedParams,selectedMetrics:e.selectedMetrics,onHover:_,onUnhover:S,axesRotateThreshold:8,selectedRunUuid:E,closeContextMenu:R,fallback:(0,b.Y)(c.Us,{css:ee})}):null}):(0,b.Y)(X,{onEdit:i})});if(a)return D;if(d&&M)return null;const T=f&&!I&&!M;return(0,b.Y)(c.Ox,{onEdit:i,onDelete:n,title:"Parallel Coordinates",subtitle:A?Y:null,uuid:e.uuid,tooltip:(0,b.Y)(j.A,{id:"XvzXs3",defaultMessage:"The parallel coordinates chart shows runs with columns that are either numbers or strings. If a column has string entries, the runs corresponding to the 30 most recent unique values will be shown. Only runs with all relevant metrics and/or parameters will be displayed."}),dragGroupKey:c.cN.PARALLEL_CHARTS_AREA,toggleFullScreenChart:T?()=>{null===s||void 0===s||s({config:e,title:"Parallel Coordinates",subtitle:A?Y:null})}:void 0,additionalMenuContent:(0,b.FD)(b.FK,{children:[(0,b.Y)(k.DropdownMenu.Separator,{}),(0,b.FD)(k.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_runschartsparallelchartcard.tsx_293",checked:!e.showAllRuns,onClick:()=>v(!1),children:[(0,b.Y)(k.DropdownMenu.ItemIndicator,{}),(0,b.Y)(j.A,{id:"d8I3cy",defaultMessage:"Show only visible"})]}),(0,b.FD)(k.DropdownMenu.CheckboxItem,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_runschartsparallelchartcard.tsx_300",checked:e.showAllRuns,onClick:()=>v(!0),children:[(0,b.Y)(k.DropdownMenu.ItemIndicator,{}),(0,b.Y)(j.A,{id:"e7K2T3",defaultMessage:"Show all runs"})]})]}),supportedDownloadFormats:["csv"],onClickDownload:t=>{const n=[...e.selectedMetrics,...e.selectedParams].join("-");"csv"===t&&(0,y.LL)(h,e.selectedMetrics,e.selectedParams,n)},...p,children:D})},ne={parallelChartCardWrapper:{display:"flex",overflow:"hidden",cursor:"pointer"}};var re=n(62758),ie=n(88464),oe=n(31276);var ae={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},se={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"};const le=({onEdit:e})=>{const{theme:t}=(0,I.u)();return(0,b.Y)("div",{css:ae,children:(0,b.FD)("div",{css:se,children:[(0,b.Y)(I.T.Title,{css:(0,E.AH)({marginTop:t.spacing.md},""),color:"secondary",level:3,children:(0,b.Y)(j.A,{id:"RCjxf0",defaultMessage:"Compare runs"})}),(0,b.Y)(I.T.Text,{css:(0,E.AH)({marginBottom:t.spacing.md},""),color:"secondary",children:(0,b.Y)(j.A,{id:"sblqXA",defaultMessage:"Use the runs difference view to compare model and system metrics, parameters, attributes, and tags across runs."})}),(0,b.Y)(I.B,{componentId:"mlflow.charts.difference_chart_configure_button",type:"primary",onClick:e,children:(0,b.Y)(j.A,{id:"NDEhn/",defaultMessage:"Configure chart"})})]})})},ce=({config:e,chartRunData:t,onDelete:n,onEdit:o,groupBy:a,fullScreen:s,setFullScreenChart:l,hideEmptyCharts:d,...u})=>{const[p,m]=(0,r.useMemo)((()=>{var n;return[Boolean(null===(n=e.compareGroups)||void 0===n?void 0:n.length),t.filter((({hidden:e})=>!e)).reverse()]}),[t,e]),h=(0,r.useMemo)((()=>!p),[p]),g=(0,re.Ez)(),v=(0,r.useCallback)((()=>{g({...e,showChangeFromBaseline:!e.showChangeFromBaseline})}),[e,g]),f=(0,r.useCallback)((()=>{g({...e,showDifferencesOnly:!e.showDifferencesOnly})}),[e,g]),{formatMessage:y}=(0,ie.A)(),x=(0,b.Y)(b.FK,{children:p?(0,b.Y)(oe.I,{previewData:m,groupBy:a,cardConfig:e,setCardConfig:t=>{g(t(e))}}):(0,b.Y)(le,{onEdit:o})});let C;return a&&i.Nf.some((t=>e.compareGroups.includes(t)))&&(C=y({id:"csNr/8",defaultMessage:"Disable grouped runs to compare parameters, tag, or attributes"})),s?x:d&&h?null:(0,b.Y)(c.Ox,{onEdit:o,onDelete:n,title:e.chartName,uuid:e.uuid,dragGroupKey:c.cN.GENERAL_AREA,toggleFullScreenChart:()=>{null===l||void 0===l||l({config:e,title:e.chartName,subtitle:null})},toggles:[{toggleLabel:y({id:"4tpkvx",defaultMessage:"Show change from baseline"}),currentToggle:e.showChangeFromBaseline,setToggle:v},{toggleLabel:y({id:"e7GTKi",defaultMessage:"Show differences only"}),currentToggle:e.showDifferencesOnly,setToggle:f}],tooltip:C,...u,children:x})};var de=n(34389),ue=n(99061),pe=n(25866),me=n(20193);var he={name:"1tc6xju",styles:"flex:1;overflow:auto"},ge={name:"82a6rk",styles:"flex:1"},ve={name:"1hfe3dm",styles:'&[data-orientation="horizontal"]{width:auto;}'};const fe=({config:e,chartRunData:t,onDelete:n,onEdit:i,groupBy:o,fullScreen:a,setFullScreenChart:s,...l})=>{const{theme:d}=(0,I.u)(),u=(0,r.useRef)(null),[p,m]=(0,r.useState)(0),[h,g]=(0,r.useState)(e),v=(0,re.Ez)(),f=(0,r.useCallback)((t=>{e.step!==t&&v({...e,step:t})}),[e,v]),y=(0,r.useCallback)((e=>{g((t=>t.step===e?t:{...t,step:e}))}),[]),x=1===e.imageKeys.length?e.imageKeys[0]:pe._g,C=(0,r.useMemo)((()=>t.filter((({hidden:e})=>!e)).reverse()),[t]),M=(0,r.useCallback)((t=>{v(t(e))}),[e,v]),{stepMarks:w,maxMark:_,minMark:S}=(0,ue._)({data:C,selectedImageKeys:e.imageKeys||[]}),R=Object.keys(w).length;(0,r.useEffect)((()=>{1===R&&h.step!==S&&(f(S),y(S))}),[S,R,h.step,f,y]);const k=C.filter((e=>e.tags[pe.Cr])).length>pe.Lf,A=(0,b.FD)("div",{css:(0,E.AH)({display:"flex",flexDirection:"column",height:a?"100%":void 0,width:"100%",overflow:"hidden",marginTop:d.spacing.sm,gap:d.spacing.md},""),children:[(0,b.Y)("div",{ref:u,css:he,children:(0,b.Y)(de.f,{previewData:C,groupBy:o,cardConfig:h,setCardConfig:M})}),(0,b.Y)("div",{css:(0,E.AH)({justifyContent:"center",alignItems:"center",display:"inline-flex",gap:d.spacing.md},""),children:(0,b.Y)("div",{css:ge,children:(0,b.Y)(me.o,{value:h.step,onChange:y,max:_,min:S,marks:w,disabled:Object.keys(w).length<=1,onAfterChange:f,css:ve})})})]});if(a)return A;const Y=A;return(0,b.Y)(c.Ox,{onEdit:i,onDelete:n,title:x,subtitle:k&&`Displaying images from first ${pe.Lf} runs`,uuid:e.uuid,dragGroupKey:c.cN.GENERAL_AREA,toggleFullScreenChart:()=>{null===s||void 0===s||s({config:e,title:x,subtitle:null})},...l,children:Y})},ye=({cardConfig:e,chartRunData:t,index:n,sectionIndex:a,onStartEditChart:s,onRemoveChart:l,setFullScreenChart:c,groupBy:d,fullScreen:u,canMoveDown:p,canMoveUp:m,previousChartUuid:h,nextChartUuid:g,onReorderWith:v,autoRefreshEnabled:f,onDownloadFullMetricHistoryCsv:y,hideEmptyCharts:x,globalLineChartConfig:C,height:M,isInViewport:w,isInViewportDeferred:S})=>{const E=(0,r.useMemo)((()=>({onReorderWith:v,canMoveDown:p,canMoveUp:m,previousChartUuid:h,nextChartUuid:g})),[v,p,m,h,g]),R=(0,r.useMemo)((()=>({onEdit:()=>s(e),onDelete:()=>l(e),setFullScreenChart:c})),[s,l,c,e]),I=(0,r.useMemo)((()=>({fullScreen:u,autoRefreshEnabled:f,groupBy:d,hideEmptyCharts:x,height:M,isInViewport:w,isInViewportDeferred:S,...R,...E})),[u,f,d,R,E,x,M,w,S]),k=(0,r.useMemo)((()=>t.filter((({hidden:e})=>!e)).reverse()),[t]);return e.type===i.zL.PARALLEL?(0,b.Y)(te,{config:e,chartRunData:t,...I}):e.type===i.zL.DIFFERENCE?(0,b.Y)(ce,{config:e,chartRunData:t,...I}):e.type===i.zL.IMAGE?(0,b.Y)(fe,{config:e,chartRunData:t,...I}):e.type===i.zL.BAR?(0,b.Y)(o.X,{config:e,chartRunData:k,...I}):e.type===i.zL.LINE?(0,b.Y)(_,{config:e,chartRunData:k,onDownloadFullMetricHistoryCsv:y,globalLineChartConfig:C,positionInSection:n,...I}):e.type===i.zL.SCATTER?(0,b.Y)(D,{config:e,chartRunData:k,...I}):e.type===i.zL.CONTOUR?(0,b.Y)(F,{config:e,chartRunData:k,...I}):null},xe=(0,r.memo)(ye)},6211:function(e,t,n){"use strict";n.d(t,{h:function(){return c}});var r,i,o,a=n(31014);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}function l({title:e,titleId:t,...n},l){return a.createElement("svg",s({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:l,"aria-labelledby":t},n),e?a.createElement("title",{id:t},e):null,r||(r=a.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),i||(i=a.createElement("path",{d:"M12.9749 4.94148C12.9188 4.71702 12.221 4.73284 12.0618 4.71515C11.1779 4.61693 10.2817 4.66052 9.39271 4.66052C8.11919 4.66052 7.15648 4.97961 6.24753 5.90922C5.86197 6.30355 5.5235 6.77684 5.23295 7.24378C4.99434 7.62726 4.65544 7.93479 4.40569 8.31299C3.93777 9.02154 3.56281 9.80723 3.56281 10.6699C3.56281 11.1806 3.37479 11.598 3.76962 12.0669C4.19449 12.5714 4.6863 12.9507 5.27978 13.2649C5.88594 13.5858 6.42202 13.8619 7.13723 13.8619C7.74338 13.8619 8.34952 13.8619 8.95567 13.8619C9.45735 13.8619 9.96042 13.8731 10.4619 13.8619C11.1412 13.8468 11.9484 13.1895 12.413 12.7381C13.581 11.6035 14.2393 9.88016 14.2393 8.24665C14.2393 7.69923 14.3797 7.17063 14.3797 6.62723C14.3797 6.40084 14.4779 5.87696 14.2744 5.71411C13.9268 5.43606 13.5785 5.13789 13.1857 4.94148",stroke:"#338ECC",strokeLinecap:"round"})),o||(o=a.createElement("path",{d:"M11.9213 6.83789C11.2761 6.83789 10.6309 6.83789 9.98577 6.83789C9.19776 6.83789 8.80182 7.44144 8.2844 7.97734C7.58163 8.70521 7.28544 9.67306 7.28544 10.666C7.28544 10.9641 7.22004 11.177 7.46104 11.3645C7.6831 11.5372 8.10719 11.6142 8.37806 11.6142C9.07316 11.6142 9.91042 11.5583 10.4462 11.0523C10.9277 10.5975 11.473 10.3701 11.8159 9.75284C12.045 9.34042 12.2022 8.86324 12.2022 8.38317C12.2022 8.14903 12.2022 7.9149 12.2022 7.68077C12.2022 7.4241 12.0208 7.38817 11.9213 7.18909",stroke:"#338ECC",strokeLinecap:"round"})))}const c=a.forwardRef(l);n.p},6531:function(e,t,n){"use strict";n.d(t,{x:function(){return a}});var r=n(9133),i=n(31014),o=n(36118);const a=(e,t)=>(0,i.useMemo)((()=>{const n=(0,r.pick)(e,["xAxisKey","selectedXAxisMetricKey","lineSmoothness"]);if(!t)return n;const i=t.xAxisKey;if(e.useGlobalLineSmoothing&&!(0,r.isUndefined)(t.lineSmoothness)&&(n.lineSmoothness=t.lineSmoothness),!(0,r.isUndefined)(i)&&e.useGlobalXaxisKey){n.xAxisKey=i;const e=null===t||void 0===t?void 0:t.selectedXAxisMetricKey;i===o.fj.METRIC&&e&&(n.selectedXAxisMetricKey=e)}return n}),[e,t])},6604:function(e,t,n){"use strict";n.d(t,{TB:function(){return f},cK:function(){return g},e9:function(){return x},iH:function(){return y},jA:function(){return v},t4:function(){return h}});var r=n(9133),i=n(81866),o=n(25866),a=n(50361),s=n(32378),l=n(21616),c=n(26809),d=n(7204),u=n(91144);const p={ALL:null,LAST_HOUR:36e5,LAST_24_HOURS:864e5,LAST_7_DAYS:6048e5,LAST_30_DAYS:2592e6,LAST_YEAR:31104e6},m=new RegExp(`(${["attribute","attributes","attr","run","metric","metrics","param","params","parameter","tag","tags","dataset","datasets","model","models"].join("|")})\\.\\S+\\s*(>|<|>=|<=|=|!=| like| ilike| rlike| in)`,"i"),h=3e4,g=e=>m.test(e),v=e=>`attributes.run_name RLIKE '${e.replace(/'/g,"\\'")}'`,f=(e,t,n,r,i)=>{const l=t.lifecycleFilter===s.gy.ACTIVE?a.qi.ACTIVE_ONLY:a.qi.DELETED_ONLY,{runsPinned:d}=t,m=(({orderByKey:e,orderByAsc:t})=>e?t?[e+" ASC"]:[e+" DESC"]:[])(t),h=(({startTime:e},t)=>{const n=p[e];return e&&n&&"ALL"!==e?"attributes.start_time >= "+(t-n):null})(t,n),f=(({searchFilter:e},t,n)=>{if((0,u.ey)()&&e.length>0&&!g(e))return v(e);const r=[];return e&&r.push(e),t&&r.push(t),n&&r.push(n),0!==r.length?r.join(" and "):void 0})(t,h,(({datasetsFilter:e})=>0===e.length?null:`dataset.name IN (${e.map((e=>`'${e.name}'`)).join(",")}) AND dataset.digest IN (${e.map((e=>`'${e.digest}'`)).join(",")})`)(t));return{experimentIds:e,filter:f,runViewType:l,orderBy:m,shouldFetchParents:(({orderByKey:e,searchFilter:t})=>!e&&!t||e===o.T8.DATE)(t),pageToken:r,runsPinned:d,maxResults:i||c.Aj}},y=(e,t,n)=>{const o=e.filter((e=>e.data.tags.some((e=>e.key===l.tS)))),a=(0,r.chunk)(o,i.SF).map((e=>{let r;const i=t({run_id:e.map((e=>e.info.run_id))},(0,d.yk)(),r);return n(i)}));return Promise.all(a)},x=e=>{const{lifecycleFilter:t,modelVersionFilter:n,datasetsFilter:r,searchFilter:i,startTime:a}=e;return Boolean(t!==o.ae||n!==o.eR||0!==r.length||i||a!==o.xx)}},6922:function(e,t,n){"use strict";n.d(t,{H8:function(){return u},Ox:function(){return C},Us:function(){return M},b7:function(){return p},cN:function(){return m},rZ:function(){return d}});var r=n(89555),i=n(59403),o=n(68048),a=n(31014),s=n(88443),l=n(9133),c=n(50111);const d="mlflow-charts-drag-handle",u="--drag-transform",p=`var(${u})`;let m=function(e){return e.PARALLEL_CHARTS_AREA="PARALLEL_CHARTS_AREA",e.GENERAL_AREA="GENERAL_AREA",e}({});var h={name:"andpxo",styles:"display:flex;overflow:hidden"},g={name:"19mhjsb",styles:"overflow:hidden;flex:1;flex-shrink:1"},v={name:"ucb1au",styles:"overflow:hidden;white-space:nowrap;text-overflow:ellipsis"},f={name:"1989ovb",styles:"vertical-align:middle"};const y=({title:e,subtitle:t,onDelete:n,onEdit:u,children:p,uuid:m,dragGroupKey:y,tooltip:C="",onReorderWith:b=l.noop,canMoveDown:M,canMoveUp:w,previousChartUuid:_,nextChartUuid:S,additionalMenuContent:E,toggleFullScreenChart:R,toggles:I,supportedDownloadFormats:k=[],onClickDownload:A,isHidden:Y,height:D,isRefreshing:T=!1})=>{const{theme:L}=(0,i.u)(),F=(0,a.useCallback)((()=>b(m||"",_||"")),[b,m,_]),K=(0,a.useCallback)((()=>b(m||"",S||"")),[b,m,S]),N=a.isValidElement(e);return(0,c.FD)("div",{css:(0,r.AH)({height:null!==D&&void 0!==D?D:360,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:L.colors.backgroundPrimary,padding:12,paddingBottom:L.spacing.sm,border:`1px solid ${L.colors.border}`,borderRadius:L.general.borderRadiusBase,transition:"opacity 0.12s",position:"relative"},""),"data-testid":"experiment-view-compare-runs-card",children:[(0,c.FD)("div",{css:h,children:[(0,c.Y)("div",{"data-testid":"experiment-view-compare-runs-card-drag-handle",css:(0,r.AH)({marginTop:N?L.spacing.sm:L.spacing.xs,marginRight:L.spacing.sm,cursor:"grab"},""),className:d,children:(0,c.Y)(o.DragIcon,{})}),N?e:(0,c.FD)("div",{css:g,children:[(0,c.Y)(i.T.Title,{title:String(e),level:4,withoutMargins:!0,css:v,children:e}),t&&(0,c.Y)("span",{css:x.subtitle(L),children:t}),C&&(0,c.Y)(o.LegacyInfoTooltip,{css:f,title:C})]}),T&&(0,c.Y)("div",{css:(0,r.AH)({width:L.general.heightSm,height:L.general.heightSm,display:"flex",alignItems:"center",justifyContent:"center"},""),children:(0,c.Y)(i.S,{})}),I&&(0,c.Y)("div",{css:(0,r.AH)({display:"flex",padding:`0px ${L.spacing.lg}px`,gap:L.spacing.md,alignItems:"flex-start"},""),children:I.map((e=>(0,c.Y)(o.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_262",checked:e.currentToggle,onChange:e.setToggle,label:e.toggleLabel},e.toggleLabel)))}),(0,c.Y)(i.B,{componentId:"fullscreen_button_chartcard",icon:(0,c.Y)(o.FullscreenIcon,{}),onClick:R,disabled:!R}),(0,c.FD)(o.DropdownMenu.Root,{modal:!1,children:[(0,c.Y)(o.DropdownMenu.Trigger,{asChild:!0,children:(0,c.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_cards_chartcard.common.tsx_158",type:"tertiary",icon:(0,c.Y)(o.OverflowIcon,{}),"data-testid":"experiment-view-compare-runs-card-menu"})}),(0,c.FD)(o.DropdownMenu.Content,{align:"end",minWidth:100,children:[(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_288",onClick:u,"data-testid":"experiment-view-compare-runs-card-edit",children:"Configure"}),(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_291",onClick:n,"data-testid":"experiment-view-compare-runs-card-delete",children:"Delete"}),k.length>0&&A&&(0,c.FD)(c.FK,{children:[(0,c.Y)(o.DropdownMenu.Separator,{}),k.includes("csv")&&(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_298",onClick:()=>A("csv"),children:(0,c.Y)(s.A,{id:"5YOBk/",defaultMessage:"Export as CSV"})}),k.includes("svg")&&(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_316",onClick:()=>A("svg"),children:(0,c.Y)(s.A,{id:"LiW/yM",defaultMessage:"Download as SVG"})}),k.includes("png")&&(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_324",onClick:()=>A("png"),children:(0,c.Y)(s.A,{id:"s5ygFF",defaultMessage:"Download as PNG"})})]}),(0,c.Y)(o.DropdownMenu.Separator,{}),(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_334",disabled:!w,onClick:F,"data-testid":"experiment-view-compare-runs-move-up",children:(0,c.Y)(s.A,{id:"IAyAgH",defaultMessage:"Move up"})}),(0,c.Y)(o.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_cards_chartcard.common.tsx_344",disabled:!M,onClick:K,"data-testid":"experiment-view-compare-runs-move-down",children:(0,c.Y)(s.A,{id:"Z6kodo",defaultMessage:"Move down"})}),E]})]})]}),p]})},x={chartEntry:e=>({height:360,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:e.colors.backgroundPrimary,padding:e.spacing.md,border:`1px solid ${e.colors.border}`,borderRadius:e.general.borderRadiusBase}),chartComponentWrapper:()=>({overflow:"hidden"}),subtitle:e=>({color:e.colors.textSecondary,fontSize:11,marginRight:4,verticalAlign:"middle"})},C=(0,a.memo)(y);var b={name:"cgzj3x",styles:"display:flex;height:100%;justify-content:center;align-items:center"};const M=(0,a.forwardRef)((({className:e,style:t},n)=>(0,c.Y)("div",{css:b,className:e,style:t,ref:n,children:(0,c.Y)(i.S,{})})))},10661:function(e,t,n){"use strict";n.d(t,{i:function(){return g}});var r=n(59403),i=n(9133),o=n(31014),a=n(79445),s=n(97604),l=n(25790),c=n(36118),d=n(23541),u=n(50684),p=n(6922),m=n(50111);const h={displaylogo:!1,scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},g=o.memo((({runsData:e,xAxis:t,yAxis:n,markerSize:g=10,className:v,margin:f=c.am,onUpdate:y,onHover:x,onUnhover:C,width:b,height:M,useDefaultHoverBox:w=!0,selectedRunUuid:_,onSetDownloadHandler:S})=>{const{theme:E}=(0,r.u)(),{layoutHeight:R,layoutWidth:I,setContainerDiv:k,containerDiv:A,isDynamicSizeSupported:Y}=(0,c.xN)(),D=(0,o.useMemo)((()=>{const r=[],o=[],a=[],s=[];for(const c of e){var l,d,u,p;const{runInfo:e,metrics:m,params:h,color:g,uuid:v,displayName:f}=c,{runUuid:y,runName:x}=e||{},C="METRIC"===t.type?m:h,b="METRIC"===n.type?m:h,M=null===C||void 0===C||null===(l=C[null!==(d=t.dataAccessKey)&&void 0!==d?d:t.key])||void 0===l?void 0:l.value,w=null===b||void 0===b||null===(u=b[null!==(p=n.dataAccessKey)&&void 0!==p?p:n.key])||void 0===u?void 0:u.value;(0,i.isNil)(M)||(0,i.isNil)(w)||(r.push(M),o.push(w),a.push(g||E.colors.primary),y?s.push([y,x||y]):s.push([v,f]))}return[{x:r,y:o,customdata:s,text:e.map((({displayName:e})=>e)),hovertemplate:w?"<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>":void 0,hoverinfo:w?void 0:"none",hoverlabel:w?c.rv:void 0,type:"scatter",mode:"markers",textposition:"bottom center",marker:{size:g,color:a}}]}),[e,t,n,E,g,w]),T=(0,o.useMemo)((()=>(0,c.y)(E)),[E]),[L,F]=(0,o.useState)({width:b||I,height:M||R,margin:f,xaxis:{title:t.key,tickfont:{size:11,color:E.colors.textSecondary}},yaxis:{title:n.key,tickfont:{size:11,color:E.colors.textSecondary}},template:{layout:T}});(0,o.useEffect)((()=>{F((e=>{const r={...e,width:b||I,height:M||R,margin:f};return r.xaxis&&(r.xaxis.title=t.key),r.yaxis&&(r.yaxis.title=n.key),r}))}),[I,R,f,t.key,n.key,b,M]);const{setHoveredPointIndex:K}=(0,l.pO)(A,_,e,l.nD),N=(0,o.useCallback)((({points:e})=>{var t,n,r,i;const o=null===(t=e[0])||void 0===t||null===(n=t.customdata)||void 0===n?void 0:n[0];K(null!==(r=null===(i=e[0])||void 0===i?void 0:i.pointIndex)&&void 0!==r?r:-1),o&&(null===x||void 0===x||x(o,void 0,{}))}),[x,K]),O=(0,o.useCallback)((()=>{null===C||void 0===C||C(),K(-1)}),[C,K]),H=(0,s.l)(N),B=(0,o.useMemo)((()=>(0,c.eY)(e)),[e]);(0,o.useEffect)((()=>{const e=D.map((e=>({...e,mode:"text+markers"})));null===S||void 0===S||S((0,u.W)(e,L))}),[L,S,D]);const P=(0,m.Y)("div",{css:[c.gz.chartWrapper(E),c.gz.scatterChartHighlightStyles,""],className:v,ref:k,children:(0,m.Y)(a.W,{data:D,useResizeHandler:!Y,css:c.gz.chart(E),layout:L,config:h,onUpdate:y,onHover:H,onUnhover:O,fallback:(0,m.Y)(p.Us,{})})});return(0,m.Y)(d.A,{labelData:B,children:P})}))},16026:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}});var r=n(89555),i=n(59403),o=(n(31014),n(50111));var a={name:"aj4kza",styles:"white-space:nowrap;text-overflow:ellipsis;overflow:hidden"};const s=({label:e,color:t,dashStyle:n})=>{const{theme:s}=(0,i.u)();return(0,o.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",textOverflow:"ellipsis",flexShrink:0,marginRight:s.spacing.md,maxWidth:"100%"},""),children:[(0,o.Y)(l,{color:t,dashStyle:n}),(0,o.Y)(i.T.Text,{color:"secondary",size:"sm",css:a,children:e})]})},l=({color:e,dashStyle:t})=>{const{theme:n}=(0,i.u)(),a=t?(e=>{switch(e){case"dot":return"3";case"dash":return"6, 3";case"longdash":return"9, 3";case"dashdot":return"6, 3, 3, 3";case"longdashdot":return"9, 3, 3, 3";default:return""}})(t):void 0,s=n.typography.fontSizeSm/2;return(0,o.Y)("svg",{css:(0,r.AH)({height:n.typography.fontSizeSm,width:24,marginRight:n.spacing.xs,flexShrink:0},""),children:(0,o.Y)("path",{d:`M0,${s}h24`,style:{strokeWidth:3,stroke:e,strokeDasharray:a}})})};t.A=({labelData:e,height:t,fullScreen:n})=>{const{theme:a}=(0,i.u)();return(0,o.Y)("div",{css:(0,r.AH)({display:"flex",flexWrap:"wrap",height:t,alignContent:n?"flex-start":"normal",gap:n?a.spacing.sm:0,overflowY:"auto",overflowX:"hidden",marginTop:n?a.spacing.lg:a.spacing.sm},""),children:e.map((e=>{var t;return(0,o.Y)(s,{...e},null!==(t=e.uuid)&&void 0!==t?t:e.label)}))})}},19415:function(e,t,n){"use strict";n.d(t,{z:function(){return Ee}});var r=n(89555),i=n(59403),o=n(23823),a=n(68048),s=n(31014),l=n(88464),c=n(88443),d=n(30152),u=n(77198),p=n(6211),m=n(73549),h=n(43270),g=n(74035),v=n(32582),f=n(99790),y=n(21616),x=n(50111);const C=({title:e,compact:t=!1,children:n})=>{const{theme:o}=(0,i.u)();return(0,x.FD)("div",{css:(0,r.AH)({marginBottom:t?o.spacing.sm:2*o.spacing.md},""),"data-testid":"experiment-view-compare-runs-config-field",children:[(0,x.Y)(i.T.Title,{level:4,children:e}),n]})},b=({value:e,onChange:t,metricKeyList:n,paramKeyList:r})=>{const{formatMessage:i}=(0,l.A)(),o=!(null!==r&&void 0!==r&&r.length)&&!(null!==n&&void 0!==n&&n.length);return(0,x.FD)(a.LegacySelect,{css:_.selectFull,value:o?i({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):e,disabled:o,onChange:t,dangerouslySetAntdProps:{showSearch:!0},children:[null!==n&&void 0!==n&&n.length?(0,x.Y)(a.LegacySelect.OptGroup,{label:i({id:"jH0+gA",defaultMessage:"Metrics"}),children:n.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:(0,y.GF)("METRIC",e),children:e},(0,y.GF)("METRIC",e))))}):null,null!==r&&void 0!==r&&r.length?(0,x.Y)(a.LegacySelect.OptGroup,{label:i({id:"kWUhea",defaultMessage:"Params"}),children:r.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:(0,y.GF)("PARAM",e),children:e},(0,y.GF)("PARAM",e))))}):null]})},M=({value:e,id:t,onChange:n,metricOptions:r=[],paramOptions:i=[]})=>{const{formatMessage:o}=(0,l.A)(),s=!i.length&&!r.length;return(0,x.FD)(a.SimpleSelect,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select",id:t,css:_.selectFull,value:s?o({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):e,disabled:s,onChange:({target:e})=>{n(e.value)},contentProps:{matchTriggerWidth:!0,maxHeight:500},children:[null!==r&&void 0!==r&&r.length?(0,x.Y)(a.SimpleSelectOptionGroup,{label:o({id:"jH0+gA",defaultMessage:"Metrics"}),children:r.map((({datasetName:e,key:t,metricKey:n})=>(0,x.FD)(a.SimpleSelectOption,{value:t,children:[e&&(0,x.Y)(a.Tag,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select.tag",children:e})," ",n]},t)))}):null,null!==i&&void 0!==i&&i.length?(0,x.Y)(a.SimpleSelectOptionGroup,{label:o({id:"kWUhea",defaultMessage:"Params"}),children:i.map((({key:e,paramKey:t})=>(0,x.Y)(a.SimpleSelectOption,{value:e,children:t},e)))}):null]})},w=[{value:5,label:(0,x.Y)(c.A,{id:"Mc6Dhy",defaultMessage:"5"})},{value:10,label:(0,x.Y)(c.A,{id:"2K8tsp",defaultMessage:"10"})},{value:20,label:(0,x.Y)(c.A,{id:"zwO8+l",defaultMessage:"20"})}],_={selectFull:{width:"100%"}};var S=n(9133);var E={name:"1d3w5wq",styles:"width:100%"};const R=({metricKeysByDataset:e,value:t,onChange:n})=>(0,x.Y)(a.SimpleSelect,{css:E,componentId:"mlflow.charts.chart_configure.metric_with_dataset_select",id:"mlflow.charts.chart_configure.metric_with_dataset_select",value:t,onChange:({target:t})=>{const r=null===e||void 0===e?void 0:e.find((({dataAccessKey:e})=>e===t.value));r&&n(r)},contentProps:{matchTriggerWidth:!0,maxHeight:400},children:null===e||void 0===e?void 0:e.map((({datasetName:e,metricKey:t,dataAccessKey:n})=>(0,x.FD)(a.SimpleSelectOption,{value:n,children:[e&&(0,x.Y)(a.Tag,{componentId:"mlflow.charts.chart_configure.metric_with_dataset_select.tag",children:e})," ",t]},n)))}),I=({state:e,onStateChange:t,metricKeyList:n,metricKeysByDataset:r})=>{var i;const o=(0,s.useCallback)(((e,n,r)=>{t((t=>({...t,metricKey:e,datasetName:n,dataAccessKey:r})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);(0,s.useEffect)((()=>{e.metricKey||null===r||void 0===r||!r[0]?!e.metricKey&&null!==n&&void 0!==n&&n[0]&&o(n[0]):o(r[0].metricKey,r[0].datasetName,r[0].dataAccessKey)}),[e.metricKey,o,n,r]);const l=0===n.length;return(0,x.Y)(x.FK,{children:(0,x.Y)(C,{title:"Metric",children:(0,S.isEmpty)(r)?(0,x.Y)(a.LegacySelect,{css:k.selectFull,value:l?"No metrics available":e.metricKey,onChange:e=>o(e),disabled:l,dangerouslySetAntdProps:{showSearch:!0},children:n.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))}):(0,x.Y)(R,{metricKeysByDataset:r,onChange:({metricKey:e,datasetName:t,dataAccessKey:n})=>o(e,t,n),value:null!==(i=e.dataAccessKey)&&void 0!==i?i:e.metricKey})})})},k={selectFull:{width:"100%"}},A=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:r})=>{const i=(0,s.useCallback)((e=>{t((t=>({...t,selectedParams:e})))}),[t]),o=(0,s.useCallback)((e=>{t((t=>({...t,selectedMetrics:e})))}),[t]),l=0===n.length,c=0===r.length;return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:"Params",children:(0,x.Y)(a.LegacySelect,{mode:c?void 0:"multiple",onChange:i,style:{width:275},value:c?"No parameters available":e.selectedParams,disabled:c,children:r.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:e,children:e},e)))})}),(0,x.Y)(C,{title:"Metrics",children:(0,x.Y)(a.LegacySelect,{mode:l?void 0:"multiple",onChange:o,style:{width:275},value:l?"No metrics available":e.selectedMetrics,disabled:l,children:n.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:e,children:e},e)))})})]})};var Y=n(70169),D=n(91144),T=n(36118),L=n(20193),F=n(49698);var K={name:"1d3w5wq",styles:"width:100%"};const N=({metricKeyList:e,selectedMetricKeys:t,updateSelectedMetrics:n})=>{const r=0===e.length;return(0,x.Y)(a.LegacySelect,{mode:"multiple",placeholder:r?(0,x.Y)(c.A,{id:"M5bYHa",defaultMessage:"No metrics available"}):(0,x.Y)(c.A,{id:"eQqRYQ",defaultMessage:"Select metrics"}),css:K,value:r?[]:t,onChange:n,disabled:r,dangerouslySetAntdProps:{showSearch:!0},children:e.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})},O=({chartExpression:e,index:t,updateYAxisExpression:n,removeYAxisExpression:o,metricKeyList:a})=>{const{theme:l}=(0,i.u)(),{compileExpression:c}=(0,F.l)(),[d,u]=(0,s.useState)(!0);return(0,x.FD)("span",{css:(0,r.AH)({display:"flex",width:"100%",gap:l.spacing.sm},""),children:[(0,x.Y)(Y.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsyaxismetricandexpressionselector.tsx_122",value:e.expression,onChange:e=>(e=>{const r=c(e,a);void 0===r?(u(!1),n({rpn:[],variables:[],expression:e},t)):(u(!0),n(r,t))})(e.target.value),validationState:d?void 0:"error"}),(0,x.Y)(i.B,{componentId:"mlflow.charts.line-chart-expressions-remove",icon:(0,x.Y)(i.C,{}),onClick:()=>o(t)})]})},H=({state:e,onStateChange:t,metricKeyList:n,updateSelectedMetrics:o})=>{const{theme:l}=(0,i.u)(),u=(0,D.Iq)()&&e.xAxisKey!==T.fj.METRIC,[p,m]=(0,s.useState)(e.yAxisExpressions||[]),h=(e,t)=>{m((n=>{const r=[...n];return r[t]=e,r}))},g=e=>{m((t=>{const n=[...t];return n.splice(e,1),n}))};(0,s.useEffect)((()=>{const e=setTimeout((()=>{var e;e=p,t((t=>({...t,yAxisExpressions:e})))}),300);return()=>{clearTimeout(e)}}),[p,t]);const v=(0,s.useCallback)((e=>{t((t=>{const n=t;return{...n,yAxisKey:e,range:{...n.range,yMin:void 0,yMax:void 0}}}))}),[t]);return(0,x.FD)(x.FK,{children:[u&&(0,x.Y)(C,{title:"Metric type",compact:!0,children:(0,x.FD)(a.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsyaxismetricandexpressionselector.tsx_221",name:"runs-charts-field-group-metric-type-y-axis",value:e.yAxisKey||d.Kb.METRIC,onChange:({target:{value:e}})=>v(e),children:[(0,x.Y)(a.Radio,{value:d.Kb.METRIC,children:(0,x.Y)(c.A,{id:"hW7XxH",defaultMessage:"Logged metrics"})},d.Kb.METRIC),(0,x.Y)(a.Radio,{value:d.Kb.EXPRESSION,children:(0,x.Y)(c.A,{id:"tkAOSa",defaultMessage:"Custom expression"})},d.Kb.EXPRESSION)]})}),u&&e.yAxisKey===d.Kb.EXPRESSION?(0,x.Y)(C,{title:"Expression",compact:!0,children:(0,x.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",alignItems:"flex-start",gap:l.spacing.sm},""),children:[p.map(((e,t)=>(0,x.Y)(O,{chartExpression:e,index:t,updateYAxisExpression:h,removeYAxisExpression:g,metricKeyList:n},t))),(0,x.Y)(i.B,{componentId:"mlflow.charts.line-chart-expressions-add-new",icon:(0,x.Y)(a.PlusIcon,{}),onClick:()=>{m((e=>[...e,{rpn:[],variables:[],expression:""}]))},children:"Add new"})]})}):(0,x.Y)(C,{title:"Metric",compact:!0,children:N({metricKeyList:n,selectedMetricKeys:e.selectedMetricKeys,updateSelectedMetrics:o})})]})};const B="_GLOBAL",P=({theme:e,metricKeyList:t,selectedXAxisMetricKey:n,updateSelectedXAxisMetricKey:i,disabled:o=!1})=>{const s=0===t.length;return(0,x.FD)(a.Radio,{value:T.fj.METRIC,disabled:o,children:[(0,x.Y)(c.A,{id:"M/c4l0",defaultMessage:"Metric"}),(0,x.Y)(a.LegacySelect,{css:(0,r.AH)({marginTop:e.spacing.xs,width:"100%"},""),value:n||void 0,placeholder:s?(0,x.Y)(c.A,{id:"ER3oVW",defaultMessage:"No metrics available"}):(0,x.Y)(c.A,{id:"BOz0T2",defaultMessage:"Select metric"}),onClick:e=>{e.preventDefault(),e.stopPropagation()},onChange:i,disabled:s||o,dangerouslySetAntdProps:{showSearch:!0},children:t.map((e=>(0,x.Y)(a.LegacySelect.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})]})},U=e=>(0,S.isUndefined)(e)?e:e<=0?void 0:Math.log10(e),z=e=>(0,S.isUndefined)(e)?e:Math.pow(10,e);var V={name:"4c6dm7",styles:"display:flex;flex-direction:row;justify-content:space-between"};const G=({state:e,onStateChange:t,metricKeyList:n})=>{var u,p,m,h,g,v,f,y;const b=(0,D.Iq)(),{theme:M}=(0,i.u)(),w=(0,l.A)(),[_,E]=(0,s.useState)({xMin:"log"===e.xAxisScaleType?z(null===(u=e.range)||void 0===u?void 0:u.xMin):null===(p=e.range)||void 0===p?void 0:p.xMin,xMax:"log"===e.xAxisScaleType?z(null===(m=e.range)||void 0===m?void 0:m.xMax):null===(h=e.range)||void 0===h?void 0:h.xMax,yMin:"log"===e.scaleType?z(null===(g=e.range)||void 0===g?void 0:g.yMin):null===(v=e.range)||void 0===v?void 0:v.yMin,yMax:"log"===e.scaleType?z(null===(f=e.range)||void 0===f?void 0:f.yMax):null===(y=e.range)||void 0===y?void 0:y.yMax}),R=(0,s.useCallback)((e=>{t((t=>({...t,metricKey:e})))}),[t]),I=(0,s.useCallback)((e=>{t((t=>({...t,metricKey:e[0],selectedMetricKeys:e})))}),[t]),k=(0,s.useCallback)(((e,n=!1)=>{t((t=>{const r=t;return{...r,xAxisKey:e,selectedXAxisMetricKey:"",range:{...r.range,xMin:void 0,xMax:void 0},useGlobalXaxisKey:null!==n&&void 0!==n?n:r.useGlobalXaxisKey,selectedYAxisMetricKey:d.Kb.METRIC}}))}),[t]),A=e=>!(0,S.isUndefined)(e)&&e<=0,F=(0,s.useCallback)((e=>{t((t=>{const n=t;let r=e?U(_.xMin):_.xMin,i=e?U(_.xMax):_.xMax;return e&&A(_.xMin)&&_.xMax&&_.xMax>1?(E((e=>({...e,xMin:1}))),r=0):e&&(A(_.xMin)||A(_.xMax))&&(E((e=>({...e,xMin:void 0,xMax:void 0}))),r=void 0,i=void 0),{...n,xAxisScaleType:e?"log":"linear",range:{...n.range,xMin:r,xMax:i}}}))}),[t,_.xMin,_.xMax]),K=(0,s.useCallback)((e=>{t((t=>({...t,selectedXAxisMetricKey:e,xAxisKey:T.fj.METRIC})))}),[t]),N=(0,s.useCallback)((e=>{t((t=>{const n=t;let r=e?U(_.yMin):_.yMin,i=e?U(_.yMax):_.yMax;return e&&A(_.yMin)&&_.yMax&&_.yMax>1?(E((e=>({...e,yMin:1}))),r=0):e&&(A(_.yMin)||A(_.yMax))&&(E((e=>({...e,yMin:void 0,yMax:void 0}))),r=void 0,i=void 0),{...n,scaleType:e?"log":"linear",range:{...n.range,yMin:r,yMax:i}}}))}),[t,_.yMin,_.yMax]),O=(0,s.useCallback)((e=>{t((t=>({...t,ignoreOutliers:e})))}),[t]),G=(0,s.useCallback)((e=>{t((t=>({...t,lineSmoothness:e})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);(0,s.useEffect)((()=>{!e.metricKey&&null!==n&&void 0!==n&&n[0]&&R(n[0])}),[e.metricKey,R,n]),(0,s.useEffect)((()=>{(0,S.isUndefined)(e.selectedMetricKeys)&&!(0,S.isUndefined)(e.metricKey)&&""!==e.metricKey&&I([e.metricKey])}),[e.selectedMetricKeys,e.metricKey,I]);const W=(e,n)=>{q(e,n)||t((t=>{const r=t;return{...r,range:{...r.range,xMin:"log"===r.xAxisScaleType?U(e):e,xMax:"log"===r.xAxisScaleType?U(n):n}}}))},$=(e,n)=>{q(e,n)||t((t=>{const r=t;return{...r,range:{...r.range,yMin:"log"===r.scaleType?U(e):e,yMax:"log"===r.scaleType?U(n):n}}}))},q=(e,t)=>(!(0,S.isUndefined)(e)||!(0,S.isUndefined)(t))&&!(!(0,S.isUndefined)(e)&&!(0,S.isUndefined)(t)),X=(e,t)=>"log"===e&&A(t)?(0,x.Y)(a.FormUI.Message,{message:(0,x.Y)(c.A,{id:"o21MFS",defaultMessage:"Invalid log value"}),type:"warning"}):null,Q="metric-";return(0,x.FD)(x.FK,{children:[(0,x.Y)(i.T.Title,{level:4,color:"secondary",children:"X-axis"}),(0,x.Y)(C,{title:"Type",compact:!0,children:b?(0,x.FD)(a.SimpleSelect,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_436",id:"x-axis-type",width:"100%",value:e.useGlobalXaxisKey?B:e.xAxisKey,contentProps:{matchTriggerWidth:!0,textOverflowMode:"ellipsis"},onChange:({target:{value:e}})=>{e.startsWith(Q)?K(e.slice(7)):e===T.fj.STEP?k(T.fj.STEP):e===T.fj.TIME?k(T.fj.TIME):e===T.fj.TIME_RELATIVE?k(T.fj.TIME_RELATIVE):e===B&&k(T.fj.STEP,!0)},children:[(0,x.Y)(a.SimpleSelectOption,{value:B,children:(0,x.Y)(c.A,{id:"srbhok",defaultMessage:"Use workspace settings"})}),(0,x.Y)(a.SimpleSelectOption,{value:T.fj.STEP,children:(0,x.Y)(c.A,{id:"IfcpiM",defaultMessage:"Step"})}),(0,x.FD)(a.SimpleSelectOption,{value:T.fj.TIME,children:[(0,x.Y)(c.A,{id:"2Hf+yU",defaultMessage:"Time (wall)"}),(0,x.Y)(o.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_474",content:(0,x.Y)(c.A,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(a.QuestionMarkIcon,{css:j.timeStepQuestionMarkIcon})]})})]}),(0,x.FD)(a.SimpleSelectOption,{value:T.fj.TIME_RELATIVE,children:[(0,x.Y)(c.A,{id:"Y47tVZ",defaultMessage:"Time (relative)"}),(0,x.Y)(o.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_494",content:(0,x.Y)(c.A,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(a.QuestionMarkIcon,{css:j.timeStepQuestionMarkIcon})]})})]}),n.length>0&&(0,x.Y)(a.SimpleSelectOptionGroup,{label:"Metrics",children:n.map((e=>(0,x.Y)(a.SimpleSelectOption,{value:`${Q}${e}`,"data-testid":`${Q}${e}`,children:e},e)))})]}):(0,x.FD)(a.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_524",name:"runs-charts-field-group-x-axis",value:e.useGlobalXaxisKey?B:e.xAxisKey,onChange:({target:{value:e}})=>{e===B?k(T.fj.STEP,!0):k(e)},children:[(0,x.Y)(a.Radio,{value:B,children:(0,x.Y)(c.A,{id:"srbhok",defaultMessage:"Use workspace settings"})}),(0,x.Y)(a.Radio,{value:T.fj.STEP,children:(0,x.Y)(c.A,{id:"IfcpiM",defaultMessage:"Step"})}),(0,x.FD)(a.Radio,{value:T.fj.TIME,children:[(0,x.Y)(c.A,{id:"2Hf+yU",defaultMessage:"Time (wall)"}),(0,x.FD)(a.LegacyTooltip,{title:(0,x.Y)(c.A,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),placement:"right",children:[" ",(0,x.Y)(a.QuestionMarkIcon,{css:j.timeStepQuestionMarkIcon})]})]}),(0,x.FD)(a.Radio,{value:T.fj.TIME_RELATIVE,children:[(0,x.Y)(c.A,{id:"Y47tVZ",defaultMessage:"Time (relative)"}),(0,x.FD)(a.LegacyTooltip,{title:(0,x.Y)(c.A,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),placement:"right",children:[" ",(0,x.Y)(a.QuestionMarkIcon,{css:j.timeStepQuestionMarkIcon})]})]}),P({theme:M,metricKeyList:n,selectedXAxisMetricKey:e.selectedXAxisMetricKey,updateSelectedXAxisMetricKey:K})]})}),e.xAxisKey===T.fj.STEP&&(0,x.Y)(x.FK,{children:(0,x.FD)(C,{title:"X-axis scale",compact:!0,children:[(0,x.FD)("div",{css:(0,r.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,x.FD)("div",{children:[(0,x.Y)(Y.I,{componentId:"mlflow.charts.line_chart_configure.x_axis_min","aria-label":"x-axis-min",name:"min",type:"number",value:_.xMin,onChange:e=>(e=>{const t=e?Number(e):void 0;E((e=>({...e,xMin:t}))),W(t,_.xMax)})(e.target.value),max:_.xMax,placeholder:"Min"}),X(e.xAxisScaleType,_.xMin)]}),(0,x.FD)("div",{children:[(0,x.Y)(Y.I,{componentId:"mlflow.charts.line_chart_configure.x_axis_max","aria-label":"x-axis-max",name:"max",type:"number",value:_.xMax,onChange:e=>(e=>{const t=e?Number(e):void 0;E((e=>({...e,xMax:t}))),W(_.xMin,t)})(e.target.value),min:_.xMin,placeholder:"Max"}),X(e.xAxisScaleType,_.xMax)]})]}),(0,x.Y)("div",{style:{padding:M.spacing.xs}}),(0,x.Y)(a.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_628","aria-label":"x-axis-log",checked:"log"===e.xAxisScaleType,onChange:F,label:"Log scale",activeLabel:"On",inactiveLabel:"Off",disabledLabel:"Disabled"})]})}),(0,x.Y)(i.T.Title,{level:4,color:"secondary",css:(0,r.AH)({paddingTop:M.spacing.lg},""),children:"Y-axis"}),(0,x.Y)(H,{state:e,onStateChange:t,metricKeyList:n,updateSelectedMetrics:I}),(0,x.FD)(C,{title:"Y-axis scale",compact:!0,children:[(0,x.FD)("div",{css:(0,r.AH)({display:"flex",gap:M.spacing.sm},""),children:[(0,x.FD)("div",{children:[(0,x.Y)(Y.I,{componentId:"mlflow.charts.line_chart_configure.y_axis_min","aria-label":"y-axis-min",name:"min",type:"number",value:_.yMin,onChange:e=>(e=>{const t=e?Number(e):void 0;E((e=>({...e,yMin:t}))),$(t,_.yMax)})(e.target.value),max:_.yMax,placeholder:"Min"}),X(e.scaleType,_.yMin)]}),(0,x.FD)("div",{children:[(0,x.Y)(Y.I,{componentId:"mlflow.charts.line_chart_configure.y_axis_max","aria-label":"y-axis-max",name:"max",type:"number",value:_.yMax,onChange:e=>(e=>{const t=e?Number(e):void 0;E((e=>({...e,yMax:t}))),$(_.yMin,t)})(e.target.value),min:_.yMin,placeholder:"Max"}),X(e.scaleType,_.yMax)]})]}),(0,x.Y)(o.S,{size:"xs"}),(0,x.Y)(a.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_682","aria-label":"y-axis-log",checked:"log"===e.scaleType,onChange:N,label:"Log scale",activeLabel:"On",inactiveLabel:"Off",disabledLabel:"Disabled"}),(0,x.Y)(o.S,{size:"xs"}),(0,x.FD)("div",{css:V,children:[(0,x.FD)("div",{children:[(0,x.Y)(i.T.Text,{bold:!0,children:(0,x.Y)(c.A,{id:"7FvLl2",defaultMessage:"Ignore outliers"})}),(0,x.Y)(o.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_703",delayDuration:0,content:(0,x.Y)(c.A,{id:"mN6m2e",defaultMessage:"Only display data points between the p5 and p95 of the data. This can help with chart readability in cases where outliers significantly affect the Y-axis range"}),side:"right",children:(0,x.FD)("span",{children:[" ",(0,x.Y)(a.QuestionMarkIcon,{css:j.timeStepQuestionMarkIcon})]})})]}),(0,x.Y)(a.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_716","aria-label":"y-axis-ignore-outliers",checked:e.ignoreOutliers,onChange:O,label:" ",activeLabel:w.formatMessage({id:"bXA79t",defaultMessage:"On"}),inactiveLabel:w.formatMessage({id:"73ydH0",defaultMessage:"Off"}),disabledLabel:w.formatMessage({id:"Ka1jM2",defaultMessage:"Disabled"})})]})]}),(0,x.Y)(i.T.Title,{level:4,color:"secondary",css:(0,r.AH)({paddingTop:M.spacing.lg},""),children:"Advanced"}),(0,x.Y)(C,{title:w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),compact:!0,children:(0,x.FD)(a.SegmentedControlGroup,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_747",name:w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),value:e.displayPoints,onChange:({target:e})=>{t((t=>({...t,displayPoints:e.value})))},children:[(0,x.FD)(a.SegmentedControlButton,{value:void 0,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"7nPjTL",defaultMessage:"Auto"})].join(": "),children:[(0,x.Y)(c.A,{id:"7nPjTL",defaultMessage:"Auto"})," ",(0,x.Y)(a.LegacyTooltip,{title:(0,x.Y)(c.A,{id:"ax3YJx",defaultMessage:"Show points on line charts if there are fewer than 60 data points per trace"}),children:(0,x.Y)(o.I,{})})]}),(0,x.Y)(a.SegmentedControlButton,{value:!0,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"QUMV9L",defaultMessage:"On"})].join(": "),children:(0,x.Y)(c.A,{id:"QUMV9L",defaultMessage:"On"})}),(0,x.Y)(a.SegmentedControlButton,{value:!1,"aria-label":[w.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),w.formatMessage({id:"NtaCJN",defaultMessage:"Off"})].join(": "),children:(0,x.Y)(c.A,{id:"NtaCJN",defaultMessage:"Off"})})]})}),(0,x.FD)(C,{title:(0,x.Y)(x.FK,{children:(0,x.Y)(c.A,{id:"qkRBUr",defaultMessage:"Line smoothing"})}),compact:!0,children:[(0,x.FD)(a.Radio.Group,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigurelinechart.tsx_838",name:"use-global-line-smoothness",value:Boolean(e.useGlobalLineSmoothing),onChange:({target:e})=>{t((t=>({...t,useGlobalLineSmoothing:!0===e.value})))},children:[(0,x.Y)(a.Radio,{value:!0,children:"Use workspace settings"}),(0,x.Y)(a.Radio,{value:!1,children:"Custom"})]}),(0,x.Y)(L.o,{"data-testid":"smoothness-toggle",min:0,max:100,onChange:G,value:e.lineSmoothness?e.lineSmoothness:0,disabled:e.useGlobalLineSmoothing})]})]})},j={selectFull:{width:"100%"},timeStepQuestionMarkIcon:()=>({svg:{width:12,height:12}})};var W=n(10811),$=n(73724),q=n(75627),X=n(24789),Q=n(81850),J=n(6531),Z=n(6922);const ee=(0,W.Ng)((({entities:{metricsByRunUuid:e}})=>({metricsByRunUuid:e})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.metricsByRunUuid===t.entities.metricsByRunUuid})((({previewData:e,cardConfig:t,metricsByRunUuid:n,groupBy:r,globalLineChartConfig:i})=>{var o,a,l,c,u;const{lineSmoothness:p,selectedXAxisMetricKey:m,xAxisKey:h}=(0,J.x)(t,i),g=(0,s.useMemo)((()=>e.some((e=>e.groupParentInfo))),[e]),{aggregateFunction:v}=r||{},f=(0,s.useMemo)((()=>{if(g){return[...(0,S.compact)(e.map((e=>e.groupParentInfo))).flatMap((e=>e.runUuids)),...(0,S.compact)(e.filter((e=>!e.groupParentInfo&&!e.belongsToGroup)).map((e=>{var t,n;return null!==(t=null===(n=e.runInfo)||void 0===n?void 0:n.runUuid)&&void 0!==t?t:void 0})))]}return(0,S.compact)(e.map((e=>e.runInfo))).map((e=>{var t;return null!==(t=e.runUuid)&&void 0!==t?t:""}))}),[e,g]),y=(0,s.useMemo)((()=>{const e=(e=>{var t;const n=[e.metricKey];var r;if(!(0,D.Iq)()||e.yAxisKey!==d.Kb.EXPRESSION)return null!==(r=e.selectedMetricKeys)&&void 0!==r?r:n;const i=null===(t=e.yAxisExpressions)||void 0===t?void 0:t.reduce(((e,t)=>(t.variables.forEach((t=>e.add(t))),e)),new Set);return void 0===i?n:Array.from(i)})(t),n=m?[m]:[];return e.concat(n)}),[t,m]),{resultsByRunUuid:C,isLoading:b}=(0,X.S)({runUuids:f,metricKeys:y,enabled:!0,maxResults:320,autoRefreshEnabled:!1}),M=(0,s.useMemo)((()=>e.map((e=>{const n=y.reduce(((n,r)=>{var i,o;const a=null===(i=C[e.uuid])||void 0===i||null===(o=i[r])||void 0===o?void 0:o.metricsHistory;return a&&(n[r]=t.ignoreOutliers?(0,T.c1)(a):a),n}),{});return{...e,metricsHistory:n}}))),[y,C,e,t.ignoreOutliers]),w=(0,Q.B)({enabled:g,ungroupedRunsData:M,metricKeys:y,sampledDataResultsByRunUuid:C,aggregateFunction:v,selectedXAxisMetricKey:h===T.fj.METRIC?m:void 0,ignoreOutliers:null!==(o=t.ignoreOutliers)&&void 0!==o&&o}),_=g?w:M,{setTooltip:E,resetTooltip:R}=(0,q.uN)(t,q.QS.MultipleTracesWithScanline);if(b)return(0,x.Y)(Z.Us,{});const I=(e,t)=>{if(!(0,S.isUndefined)(e)&&!(0,S.isUndefined)(t))return[e,t]},k=I(null===(a=t.range)||void 0===a?void 0:a.xMin,null===(l=t.range)||void 0===l?void 0:l.xMax),A=I(null===(c=t.range)||void 0===c?void 0:c.yMin,null===(u=t.range)||void 0===u?void 0:u.yMax);return(0,x.Y)($.h,{runsData:_,metricKey:t.metricKey,selectedMetricKeys:t.selectedMetricKeys,scaleType:t.scaleType,xAxisScaleType:t.xAxisScaleType,lineSmoothness:p,xAxisKey:h,selectedXAxisMetricKey:m,displayPoints:t.displayPoints,yAxisExpressions:t.yAxisExpressions,yAxisKey:t.yAxisKey,useDefaultHoverBox:!1,onHover:E,onUnhover:R,xRange:k,yRange:A})}));var te=n(59264),ne=n(65243);var re=n(66117);var ie=n(10661);var oe=n(21809),ae=n(70391);var se={name:"i1civq",styles:"display:flex;justify-content:center;align-items:center;text-align:center"},le={name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"};const ce=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:r})=>{const{formatMessage:i}=(0,l.A)(),o=(0,s.useCallback)(((e,n)=>{const r=(0,y.tG)(e,"METRIC")?"METRIC":"PARAM",i=(0,y.dz)(e,r);t((e=>({...e,[n]:{key:i,type:r}})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);return(0,s.useEffect)((()=>{var t,i,a;const s=null===n||void 0===n?void 0:n[0],l=null===r||void 0===r?void 0:r[0];null!==(t=e.xaxis)&&void 0!==t&&t.key||(s?o((0,y.GF)("METRIC",s),"xaxis"):l&&o((0,y.GF)("PARAM",l),"xaxis")),null!==(i=e.yaxis)&&void 0!==i&&i.key||(s?o((0,y.GF)("METRIC",s),"yaxis"):l&&o((0,y.GF)("PARAM",l),"yaxis")),null!==(a=e.zaxis)&&void 0!==a&&a.key||(s?o((0,y.GF)("METRIC",s),"zaxis"):l&&o((0,y.GF)("PARAM",l),"zaxis"))}),[e.xaxis,e.yaxis,e.zaxis,o,n,r]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:i({id:"2Us2jl",defaultMessage:"X axis"}),children:(0,x.Y)(b,{value:e.xaxis.key?(0,y.GF)(e.xaxis.type,e.xaxis.key):"",onChange:e=>{o(e,"xaxis")},paramKeyList:r,metricKeyList:n})}),(0,x.Y)(C,{title:i({id:"8YmId5",defaultMessage:"Y axis"}),children:(0,x.Y)(b,{value:e.yaxis.key?(0,y.GF)(e.yaxis.type,e.yaxis.key):"",onChange:e=>{o(e,"yaxis")},paramKeyList:r,metricKeyList:n})}),(0,x.Y)(C,{title:i({id:"cB0/61",defaultMessage:"Z axis"}),children:(0,x.Y)(b,{value:e.zaxis.key?(0,y.GF)(e.zaxis.type,e.zaxis.key):"",onChange:e=>{o(e,"zaxis")},paramKeyList:r,metricKeyList:n})})]})};w.push({value:100,label:(0,x.Y)(c.A,{id:"Bbm59f",defaultMessage:"100"})},{value:250,label:(0,x.Y)(c.A,{id:"W8bOkn",defaultMessage:"250"})},{value:500,label:(0,x.Y)(c.A,{id:"Bnruyp",defaultMessage:"500"})});const de=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:r})=>{const{formatMessage:i}=(0,l.A)(),o=(0,s.useCallback)(((e,n)=>{const r=(0,y.tG)(e,"METRIC")?"METRIC":"PARAM",i=(0,y.dz)(e,r);t((e=>({...e,[n]:{key:i,type:r}})))}),[t]);(0,s.useCallback)((e=>{t((t=>({...t,runsCountToCompare:e})))}),[t]);return(0,s.useEffect)((()=>{var t,i;const a=null===n||void 0===n?void 0:n[0],s=null===r||void 0===r?void 0:r[0];null!==(t=e.xaxis)&&void 0!==t&&t.key||(a?o((0,y.GF)("METRIC",a),"xaxis"):s&&o((0,y.GF)("PARAM",s),"xaxis")),null!==(i=e.yaxis)&&void 0!==i&&i.key||(a?o((0,y.GF)("METRIC",a),"yaxis"):s&&o((0,y.GF)("PARAM",s),"yaxis"))}),[e.xaxis,e.yaxis,o,n,r]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:i({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,x.Y)(b,{value:e.xaxis.key?(0,y.GF)(e.xaxis.type,e.xaxis.key):"",onChange:e=>{o(e,"xaxis")},paramKeyList:r,metricKeyList:n})}),(0,x.Y)(C,{title:i({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,x.Y)(b,{value:e.yaxis.key?(0,y.GF)(e.yaxis.type,e.yaxis.key):"",onChange:e=>{o(e,"yaxis")},paramKeyList:r,metricKeyList:n})})]})};var ue=n(73150);var pe={name:"8irbms",styles:"display:inline-flex;align-items:center"};const me=({state:e,onStateChange:t,metricKeyList:n,paramKeyList:o,groupBy:u})=>{const p=(0,s.useCallback)((e=>{t((t=>{const n=t.compareGroups;return n.includes(e)?{...t,compareGroups:n.filter((t=>t!==e))}:{...t,compareGroups:[...n,e]}}))}),[t]),m=(0,s.useCallback)((e=>t((t=>({...t,chartName:e.target.value})))),[t]),h=(0,s.useCallback)((e=>t((t=>({...t,showChangeFromBaseline:e})))),[t]),g=(0,s.useCallback)((e=>t((t=>({...t,showDifferencesOnly:e})))),[t]),{theme:v}=(0,i.u)(),{formatMessage:f}=(0,l.A)();return(0,x.FD)(x.FK,{children:[(0,x.FD)(C,{title:f({id:"46xd2Z",defaultMessage:"Compare"}),children:[(0,x.Y)(a.Checkbox.Group,{id:"checkbox-group",defaultValue:e.compareGroups,children:Object.values(d.K8).map((t=>{var n;const r=!!u&&d.Nf.includes(t);return(0,x.FD)("div",{css:pe,children:[(0,x.Y)(a.Checkbox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_98",value:t,isChecked:null===(n=e.compareGroups)||void 0===n?void 0:n.includes(t),onChange:()=>p(t),disabled:r,children:t},t),r&&(0,x.Y)(a.LegacyInfoTooltip,{title:(0,x.Y)(c.A,{id:"LKAZ2n",defaultMessage:"Disable grouped runs to compare"})})]},t)}))}),(0,x.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",padding:`${v.spacing.md}px 0px`,gap:v.spacing.sm},""),children:[(0,x.Y)(a.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_129",checked:e.showChangeFromBaseline,onChange:h,label:f({id:"9g0sMx",defaultMessage:"Show change from baseline"})}),(0,x.Y)(a.Switch,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_138",checked:e.showDifferencesOnly,onChange:g,label:f({id:"nWeQCU",defaultMessage:"Show differences only"})})]})]}),(0,x.Y)(C,{title:f({id:"ZgAOhX",defaultMessage:"Chart name"}),children:(0,x.Y)(Y.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfiguredifferencechart.tsx_157",value:e.chartName,onChange:m})})]})};var he=n(99061);const ge=({previewData:e,state:t,onStateChange:n,imageKeyList:r})=>{const{stepMarks:i,maxMark:o,minMark:c}=(0,he._)({data:e,selectedImageKeys:t.imageKeys||[]}),d=((0,s.useCallback)((e=>{n((t=>({...t,imageKeys:e})))}),[n]),(0,s.useCallback)((e=>{n((t=>({...t,step:e})))}),[n])),{formatMessage:u}=(0,l.A)(),p=e=>{n((t=>{var n;const r=t;var i;return null!==(n=r.imageKeys)&&void 0!==n&&n.includes(e)?{...r,imageKeys:null===(i=r.imageKeys)||void 0===i?void 0:i.filter((t=>t!==e))}:{...r,imageKeys:[...r.imageKeys||[],e]}}))};return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:u({id:"6Jan3t",defaultMessage:"Images"}),children:(0,x.FD)(a.DialogCombobox,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_config_runschartsconfigureimagechart.tsx_84",value:t.imageKeys,label:"Images",multiSelect:!0,children:[(0,x.Y)(a.DialogComboboxTrigger,{onClear:()=>{n((e=>({...e,imageKeys:[]})))},minWidth:275}),(0,x.Y)(a.DialogComboboxContent,{matchTriggerWidth:!0,children:(0,x.Y)(a.DialogComboboxOptionList,{children:r.map((e=>{var n;return(0,x.Y)(a.DialogComboboxOptionListCheckboxItem,{value:e,onChange:p,checked:null===(n=t.imageKeys)||void 0===n?void 0:n.includes(e)},e)}))})})]})}),(0,x.Y)(C,{title:"Step",children:(0,x.Y)(L.o,{max:o,min:c,marks:i,value:t.step,disabled:Object.keys(i).length<=1,onChange:d})})]})};var ve=n(34389),fe=n(25866);var ye={name:"1bivvgq",styles:"width:100%;overflow:auto hidden"};const xe=({state:e,onStateChange:t,paramKeyList:n,metricKeysByDataset:r})=>{const{formatMessage:i}=(0,l.A)(),o=(0,s.useMemo)((()=>{var e;return null!==(e=null===r||void 0===r?void 0:r.map((({dataAccessKey:e,metricKey:t,datasetName:n})=>({key:JSON.stringify(["METRIC",e]),dataAccessKey:e,datasetName:n,metricKey:t}))))&&void 0!==e?e:[]}),[r]),a=(0,s.useMemo)((()=>{var e;return null!==(e=null===n||void 0===n?void 0:n.map((e=>({key:JSON.stringify(["PARAM",e]),paramKey:e}))))&&void 0!==e?e:[]}),[n]),c=(0,s.useCallback)((e=>n=>{const r=o.find((({key:e})=>e===n));if(r){const{dataAccessKey:n,datasetName:i,metricKey:o}=r;t((t=>({...t,[e]:{key:o,type:"METRIC",datasetName:i,dataAccessKey:n}})))}const i=a.find((({key:e})=>e===n));i&&t((t=>({...t,[e]:{key:i.paramKey,type:"PARAM"}})))}),[t,o,a]);(0,s.useEffect)((()=>{for(const n of["xaxis","yaxis"]){var t;null!==(t=e[n])&&void 0!==t&&t.key||(null!==o&&void 0!==o&&o[0]?c(n)(o[0].key):null!==a&&void 0!==a&&a[0]&&c(n)(a[0].key))}}),[e,o,a,c]);const d=(0,s.useCallback)((t=>{if("METRIC"===e[t].type){const n=o.find((({dataAccessKey:n})=>n===e[t].dataAccessKey));if(n)return n.key}if("PARAM"===e[t].type){const n=a.find((({paramKey:n})=>n===e[t].key));if(n)return n.key}return""}),[e,o,a]),u=(0,s.useMemo)((()=>d("xaxis")),[d]),p=(0,s.useMemo)((()=>d("yaxis")),[d]);return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:i({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,x.Y)(M,{value:u,onChange:c("xaxis"),metricOptions:o,paramOptions:a,id:"mlflow.charts.chart_configure.scatter.x_axis"})}),(0,x.Y)(C,{title:i({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,x.Y)(M,{value:p,onChange:c("yaxis"),metricOptions:o,paramOptions:a,id:"mlflow.charts.chart_configure.scatter.y_axis"})})]})};var Ce=n(31276);const be={[d.zL.BAR]:({previewData:e,cardConfig:t})=>{var n;const{resetTooltip:r,setTooltip:i}=(0,q.uN)(t),o=null!==(n=t.dataAccessKey)&&void 0!==n?n:t.metricKey;return(0,x.Y)(ne.u,{useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1,metricKey:o,runsData:e,margin:te.J,onHover:i,onUnhover:r})},[d.zL.CONTOUR]:({previewData:e,cardConfig:t})=>{const{resetTooltip:n,setTooltip:r}=(0,q.uN)(t),i=(0,s.useMemo)((()=>{const{xaxis:e,yaxis:n,zaxis:r}=t;return JSON.stringify({xaxis:e,yaxis:n,zaxis:r})}),[t]);return(0,x.Y)(re.a,{xAxis:t.xaxis,yAxis:t.yaxis,zAxis:t.zaxis,runsData:e,onHover:r,onUnhover:n,useDefaultHoverBox:!1},i)},[d.zL.LINE]:ee,[d.zL.PARALLEL]:({previewData:e,cardConfig:t,groupBy:n})=>{const r=(0,ae.ad)(t),{setTooltip:i,resetTooltip:o}=(0,q.uN)(t);if((0,s.useMemo)((()=>{var n;return null===(n=t.selectedParams)||void 0===n?void 0:n.some((t=>null===e||void 0===e?void 0:e.some((e=>{var n;return isNaN(Number(null===(n=e.params[t])||void 0===n?void 0:n.value))}))),[t.selectedParams,e])}),[t.selectedParams,e])&&n)return(0,x.Y)("div",{css:se,children:(0,x.Y)(c.A,{id:"kTkJkb",defaultMessage:"Parallel coordinates chart does not support aggregated string values. Use other parameters or disable run grouping to continue."})});const l=r?(0,ae.fM)(e,t.selectedParams,t.selectedMetrics):[];return r?l.length?(0,x.Y)(oe.A,{selectedMetrics:t.selectedMetrics,selectedParams:t.selectedParams,data:l,axesRotateThreshold:6,onHover:i,onUnhover:o,fallback:(0,x.Y)(Z.Us,{})}):(0,x.Y)(a.Empty,{description:(0,x.Y)(c.A,{id:"lTrmPI",defaultMessage:"No matching data found for the available runs."}),image:(0,x.Y)(a.NoIcon,{})}):(0,x.Y)("div",{css:le,children:"Select at least two metrics and params first"})},[d.zL.SCATTER]:({previewData:e,cardConfig:t})=>{const{resetTooltip:n,setTooltip:r}=(0,q.uN)(t),i=(0,s.useMemo)((()=>{const{xaxis:e,yaxis:n}=t;return JSON.stringify({xaxis:e,yaxis:n})}),[t]);return(0,x.Y)(ie.i,{xAxis:t.xaxis,yAxis:t.yaxis,runsData:e,onHover:r,onUnhover:n,useDefaultHoverBox:!1},i)},[d.zL.DIFFERENCE]:Ce.I,[d.zL.IMAGE]:({previewData:e,cardConfig:t,setCardConfig:n,groupBy:r})=>{var i;if(e.some((e=>Boolean(e.tags[fe.Cr])))&&0===(null===t||void 0===t||null===(i=t.imageKeys)||void 0===i?void 0:i.length))return(0,x.Y)(a.Empty,{title:(0,x.Y)(c.A,{id:"qN1Uqj",defaultMessage:"No images configured for preview"}),description:(0,x.Y)(c.A,{id:"Zpi7wv",defaultMessage:"Please use controls on the left to select images to be compared"})});const o=(0,x.Y)(ve.f,{previewData:e,cardConfig:t,setCardConfig:n,groupBy:r});return(0,x.Y)("div",{css:ye,children:o})}};var Me={name:"1uahl7",styles:"width:1280px"},we={name:"1d3w5wq",styles:"width:100%"},_e={name:"1nbuksq",styles:"overflow:auto;flex-grow:1"},Se={name:"yawz8a",styles:"min-height:500px;height:100%;width:500px;padding:32px 0px"};const Ee=({onCancel:e,onSubmit:t,config:n,chartRunData:y,metricKeyList:b,metricKeysByDataset:M,paramKeyList:w,groupBy:_,supportedChartTypes:E,globalLineChartConfig:R})=>{const k=e=>!E||E.includes(e),{theme:Y}=(0,i.u)(),D=`1px solid ${Y.colors.actionDefaultBorderDefault}`,[T,L]=(0,s.useState)(n),F=Boolean(T.uuid),K=(0,s.useCallback)((e=>{if(!e)return;const t=d.i$.getEmptyChartCardByType(e,!0);t&&L(t)}),[]),N=(0,s.useMemo)((()=>y.filter((({hidden:e})=>!e)).reverse()),[y]),O=(0,s.useMemo)((()=>{const e=new Set;return N.forEach((t=>{Object.keys(t.images).forEach((t=>{e.add(t)}))})),Array.from(e).sort()}),[N]),{formatMessage:H}=(0,l.A)();let B=!1;if(T.type===d.zL.LINE){var P;B=0===(null!==(P=T.selectedMetricKeys)&&void 0!==P?P:[]).length}return(0,x.Y)(o.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsconfiguremodal.tsx_232",visible:!0,onCancel:e,onOk:()=>t(T),title:H(F?{id:"kBXHTA",defaultMessage:"Edit chart"}:{id:"6y36Fr",defaultMessage:"Add new chart"}),okButtonProps:{"data-testid":"experiment-view-compare-runs-chart-modal-confirm",disabled:B},cancelText:H({id:"TlVXcS",defaultMessage:"Cancel"}),okText:H(F?{id:"vPnoNk",defaultMessage:"Save changes"}:{id:"UzZf+2",defaultMessage:"Add chart"}),size:"wide",css:Me,dangerouslySetAntdProps:{bodyStyle:{overflowY:"hidden",display:"flex"}},children:(0,x.FD)("div",{css:(0,r.AH)({display:"flex",width:"100%",gridTemplateColumns:"300px 1fr",gap:Y.spacing.md,borderTop:D,borderBottom:D},""),children:[(0,x.FD)("div",{css:(0,r.AH)({overflowY:"auto",borderRight:D,padding:`${Y.spacing.md}px ${Y.spacing.md}px ${Y.spacing.md}px 0px`,width:"300px"},""),children:[!F&&(0,x.Y)(C,{title:"Chart type",children:(0,x.FD)(a.SimpleSelect,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsconfiguremodal.tsx_296",id:"chart-type-select",css:we,value:T.type,onChange:({target:e})=>{const t=e.value;Object.values(d.zL).includes(t)&&K(t)},children:[k(d.zL.BAR)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.BAR,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(u.h,{}),(0,x.Y)(c.A,{id:"gdK07H",defaultMessage:"Bar chart"})]})}),k(d.zL.SCATTER)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.SCATTER,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(g.h,{}),(0,x.Y)(c.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]})}),k(d.zL.LINE)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.LINE,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(m.h,{}),(0,x.Y)(c.A,{id:"CyTYL6",defaultMessage:"Line chart"})]})}),k(d.zL.PARALLEL)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.PARALLEL,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(h.h,{}),(0,x.Y)(c.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]})}),k(d.zL.CONTOUR)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.CONTOUR,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(p.h,{}),(0,x.Y)(c.A,{id:"6XfILf",defaultMessage:"Contour chart"})]})}),k(d.zL.DIFFERENCE)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.DIFFERENCE,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(v.h,{}),(0,x.Y)(c.A,{id:"G5mMJI",defaultMessage:"Difference view"})]})}),k(d.zL.IMAGE)&&(0,x.Y)(a.SimpleSelectOption,{value:d.zL.IMAGE,children:(0,x.FD)("div",{css:Re.chartTypeOption(Y),children:[(0,x.Y)(f.h,{}),(0,x.Y)(c.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})})]})}),(U=T.type,U===d.zL.BAR?(0,x.Y)(I,{metricKeyList:b,metricKeysByDataset:M,state:T,onStateChange:L}):U===d.zL.CONTOUR?(0,x.Y)(ce,{metricKeyList:b,paramKeyList:w,state:T,onStateChange:L}):U===d.zL.LINE?(0,x.Y)(G,{metricKeyList:b,state:T,onStateChange:L}):U===d.zL.PARALLEL?(0,x.Y)(A,{metricKeyList:b,paramKeyList:w,state:T,onStateChange:L}):U===d.zL.SCATTER?(0,S.isEmpty)(M)?(0,x.Y)(de,{metricKeyList:b,paramKeyList:w,state:T,onStateChange:L}):(0,x.Y)(xe,{paramKeyList:w,metricKeysByDataset:M,state:T,onStateChange:L}):U===d.zL.DIFFERENCE?(0,x.Y)(me,{metricKeyList:b,paramKeyList:w,state:T,onStateChange:L,groupBy:_}):U===d.zL.IMAGE?(0,x.Y)(ge,{previewData:N,imageKeyList:O,state:T,onStateChange:L}):null)]}),(0,x.Y)("div",{css:_e,children:(0,x.Y)(q.W,{contextData:{runs:y},component:ue.X,hoverOnly:!0,children:(0,x.Y)("div",{css:Se,children:(e=>{if(!e)return null;const t=be[e];return t?(0,x.Y)(t,{previewData:N,cardConfig:T,groupBy:_,setCardConfig:L,globalLineChartConfig:R}):null})(T.type)})})})]})});var U},Re={chartTypeOption:e=>({display:"grid",gridTemplateColumns:`${e.general.iconSize+e.spacing.xs}px 1fr`,gap:e.spacing.xs,alignItems:"center"}),field:{display:"grid",gridTemplateColumns:"80px 1fr",marginBottom:16}}},21039:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});const r={CARD_PREVIEW:1,CARD_DRAGGED:2,TOOLTIP_CONTAINER:3,SEARCH_BAR:3,TOOLTIP:4}},21809:function(e,t,n){"use strict";var r=n(68048),i=n(31014),o=n(50111);const a=i.lazy((()=>Promise.all([n.e(9800),n.e(5275)]).then(n.bind(n,47300))));t.A=({fallback:e,...t})=>(0,o.Y)(i.Suspense,{fallback:null!==e&&void 0!==e?e:(0,o.Y)(r.LegacySkeleton,{}),children:(0,o.Y)(a,{...t})})},21879:function(e,t,n){"use strict";n.d(t,{e:function(){return s},i:function(){return a}});var r=n(31014),i=n(50111);const o=r.createContext((e=>e)),a=({children:e,setUIState:t})=>(0,i.Y)(o.Provider,{value:t,children:e}),s=()=>r.useContext(o)},22853:function(e,t,n){"use strict";n.d(t,{v:function(){return s}});var r=n(31014),i=n(21879),o=n(58898),a=n(91144);const s=(e,t=!0)=>{const n=(0,i.e)(),s=(0,r.useRef)(e);s.current=e;const l=(0,r.useCallback)(((e,r,i)=>{n((n=>{if(e===o.oy.CUSTOM&&r){var l;const e={...n.runsVisibilityMap},o=null===(l=s.current.find((({rowUuid:e,groupParentInfo:t})=>e===r&&t)))||void 0===l?void 0:l.groupParentInfo;if(o&&(0,a.Bh)()&&!1===t)for(const t of o.runUuids)e[t]=!i;else e[r]=!i;return{...n,runsVisibilityMap:e}}return[o.oy.SHOWALL,o.oy.HIDEALL,o.oy.FIRST_10_RUNS,o.oy.FIRST_20_RUNS].includes(e)?{...n,runsHiddenMode:e,runsHidden:[],runsVisibilityMap:{}}:n}))}),[n,t]),c=(0,r.useCallback)(((e,r)=>{n((n=>{if(e===o.oy.SHOWALL)return{...n,runsHiddenMode:o.oy.SHOWALL,runsHidden:[]};if(e===o.oy.HIDEALL)return{...n,runsHiddenMode:o.oy.HIDEALL,runsHidden:[]};if(e===o.oy.FIRST_10_RUNS)return{...n,runsHiddenMode:o.oy.FIRST_10_RUNS,runsHidden:[]};if(e===o.oy.FIRST_20_RUNS)return{...n,runsHiddenMode:o.oy.FIRST_20_RUNS,runsHidden:[]};if(r){var i;const e=s.current.filter((({hidden:e})=>e)).map((({groupParentInfo:e,rowUuid:t,runUuid:n})=>e?t:n)),l=null===(i=s.current.find((({rowUuid:e,groupParentInfo:t})=>e===r&&t)))||void 0===i?void 0:i.groupParentInfo;if(l&&(0,a.Bh)()&&!1===t){let t=[];return t=l.allRunsHidden?e.filter((e=>!l.runUuids.includes(e))):e.concat(l.runUuids.filter((t=>!e.includes(t)))),{...n,runsHiddenMode:o.oy.CUSTOM,runsHidden:t}}const c=e.includes(r)?e.filter((e=>e!==r)):[...e,r];return{...n,runsHiddenMode:o.oy.CUSTOM,runsHidden:c}}return n}))}),[n,t]);return(0,a.Rn)()?l:c}},23541:function(e,t,n){"use strict";var r=n(89555),i=(n(31014),n(16026)),o=n(59403),a=n(50111);t.A=({labelData:e,fullScreen:t,children:n})=>{const{theme:s}=(0,o.u)(),l=t?100:32,c=t?s.spacing.lg:s.spacing.md;return(0,a.FD)(a.FK,{children:[(0,a.Y)("div",{css:(0,r.AH)({height:`calc(100% - ${l+c}px)`},""),children:n}),(0,a.Y)(i.A,{labelData:e,height:l,fullScreen:t})]})}},24789:function(e,t,n){"use strict";n.d(t,{S:function(){return h}});var r=n(9133),i=n(31014),o=n(10811),a=n(36118),s=n(16297),l=n(32039),c=n(76010),d=n(91144),u=n(74823),p=n(88464);const m=u.J1`
  query GetMetricHistoryBulkInterval($data: MlflowGetMetricHistoryBulkIntervalInput!)
  @component(name: "MLflow.ExperimentRunTracking") {
    mlflowGetMetricHistoryBulkInterval(input: $data) {
      __typename
      metrics {
        timestamp
        step
        runId
        key
        value
      }
      apiError {
        code
        message
      }
    }
  }
`,h=e=>{const{metricKeys:t,enabled:n,autoRefreshEnabled:h,runUuids:g}=e,v=(0,d.X1)()&&1===t.length&&g.length<=100,f=(e=>{const{metricKeys:t,runUuids:n,enabled:d,maxResults:u,range:p,autoRefreshEnabled:m}=e,h=(0,o.wA)(),{resultsByRunUuid:g,isLoading:v,isRefreshing:f}=(0,o.d4)((e=>{const i=(0,a.Cx)(p);let o=!1,s=!1;const l=n.map((n=>{const r=t.reduce(((t,r)=>{var a,l;const c=null===(a=e.entities.sampledMetricsByRunUuid[n])||void 0===a||null===(l=a[r])||void 0===l?void 0:l[i];return c?(s=s||Boolean(c.loading),o=o||Boolean(c.refreshing),t[r]=c,t):t}),{});return{runUuid:n,...r}}));return{isLoading:s,isRefreshing:o,resultsByRunUuid:(0,r.keyBy)(l,"runUuid")}}),((e,t)=>(0,r.isEqual)(e.resultsByRunUuid,t.resultsByRunUuid)&&e.isLoading===t.isLoading&&e.isRefreshing===t.isRefreshing)),y=(0,i.useCallback)((()=>{t.forEach((e=>{(0,r.chunk)(n,100).forEach((t=>{const n=(0,s.H)(t,e,u,p,"all");h(n)}))}))}),[h,u,n,t,p]),x=(0,i.useRef)(void 0),C=(0,i.useRef)(m&&e.enabled);C.current=m&&e.enabled;const b=(0,i.useMemo)((()=>n.join(",")),[n]);return(0,i.useEffect)((()=>{d&&!m&&t.forEach((e=>{(0,r.chunk)(n,100).forEach((t=>{const n=(0,s.H)(t,e,u,p);h(n)}))}))}),[h,u,n,t,p,d,m]),(0,i.useEffect)((()=>{let e=!1;if(!d||!m)return;const n=async(e=!1)=>{const n=b.split(",").filter((e=>""!==e));await Promise.all(t.map((async t=>Promise.all((0,r.chunk)(n,100).map((async n=>h((0,s.H)(n,t,u,p,e?"auto":void 0))))))))},i=async()=>{if(C.current&&!e){try{await n(!0)}catch(t){c.A.logErrorAndNotifyUser(t)}clearTimeout(x.current),C.current&&!e&&(x.current=window.setTimeout(i,l.QB))}};return n().then(i),()=>{e=!0,clearTimeout(x.current)}}),[h,u,b,t,p,d,m]),{isLoading:v,isRefreshing:f,resultsByRunUuid:g,refresh:y}})({...e,enabled:n&&!v,autoRefreshEnabled:h&&!v}),y=(({metricKey:e,runUuids:t,autoRefreshEnabled:n,enabled:o,maxResults:a=320,range:s})=>{var d,h,g;const v=(0,p.A)(),{data:f,refetch:y,startPolling:x,stopPolling:C,networkStatus:b,error:M}=(0,u.IT)(m,{skip:!o,notifyOnNetworkStatusChange:!0,pollInterval:n?l.QB:void 0,onCompleted(e){var t,n,r,i;"RESOURCE_DOES_NOT_EXIST"===(null===(t=e.mlflowGetMetricHistoryBulkInterval)||void 0===t||null===(n=t.apiError)||void 0===n?void 0:n.code)?c.A.displayGlobalErrorNotification(v.formatMessage({id:"hm9IM7",defaultMessage:"Requested resource does not exist"})):null!==(r=e.mlflowGetMetricHistoryBulkInterval)&&void 0!==r&&null!==(i=r.apiError)&&void 0!==i&&i.message&&c.A.logErrorAndNotifyUser(new Error(e.mlflowGetMetricHistoryBulkInterval.apiError.message))},variables:{data:{runIds:t,metricKey:e,startStep:null!==(d=null===s||void 0===s?void 0:s[0])&&void 0!==d?d:null,endStep:null!==(h=null===s||void 0===s?void 0:s[1])&&void 0!==h?h:null,maxResults:a}}});return(0,i.useEffect)((()=>{n?x(l.QB):C()}),[n,x,C]),{resultsByRunUuid:(0,i.useMemo)((()=>{if(f){var n;const i=null===f||void 0===f||null===(n=f.mlflowGetMetricHistoryBulkInterval)||void 0===n?void 0:n.metrics,o=(0,r.groupBy)(i,"runId");return(0,r.keyBy)(t.map((t=>{var n;return{runUuid:t,[e]:{metricsHistory:null===(n=o[t])||void 0===n?void 0:n.map((({key:e,step:t,timestamp:n,value:r})=>({key:null!==e&&void 0!==e?e:void 0,step:Number(t),timestamp:Number(n),value:null!==r&&void 0!==r?r:void 0})))}}})),"runUuid")}return{}}),[f,e,t]),isLoading:b===u.pT.loading||b===u.pT.setVariables,isRefreshing:b===u.pT.poll,refresh:y,error:M,apiError:null===f||void 0===f||null===(g=f.mlflowGetMetricHistoryBulkInterval)||void 0===g?void 0:g.apiError}})({...e,metricKey:t[0],enabled:n&&v,autoRefreshEnabled:h&&v});return v?y:f}},24947:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var r=n(51079),i=n.n(r),o=n(31014),a=n(48624),s=n(76010);const l=()=>{const e=(0,a.g)(),t=(0,a.zy)(),n=(0,o.useMemo)((()=>decodeURIComponent(t.search)),[t.search]),r=(0,o.useMemo)((()=>{const e=i().parse(n.substring(1));if(e.experiments){const t=e.experiments;return(null===t||void 0===t?void 0:t.toString())||""}return""}),[n]);return(0,o.useMemo)((()=>{if(null!==e&&void 0!==e&&e.experimentId)return[null===e||void 0===e?void 0:e.experimentId];if(r)try{return JSON.parse(r)}catch{return s.A.logErrorAndNotifyUser(`Could not parse experiment query parameter ${r}`),""}return[]}),[r,null===e||void 0===e?void 0:e.experimentId])}},25790:function(e,t,n){"use strict";n.d(t,{Co:function(){return m},Iq:function(){return s},PQ:function(){return l},WF:function(){return u},ZY:function(){return h},nD:function(){return c},pO:function(){return d}});var r=n(9133),i=n(31014),o=n(91144);const a=(e,t)=>(n,r,i,o=0)=>{var a,s;const l=-1===r&&-1===i;var c,d,u,p;(null===(a=n.querySelector(".is-hover-highlight"))||void 0===a||a.classList.remove("is-hover-highlight"),r>-1)&&(null===(c=n.querySelectorAll(e)[r])||void 0===c||c.classList.add("is-hover-highlight"));(null===(s=n.querySelector(".is-selection-highlight"))||void 0===s||s.classList.remove("is-selection-highlight"),i>-1)&&(null===(d=n.querySelectorAll(e)[i])||void 0===d||d.classList.add("is-selection-highlight"));if(o>0){const t=i>-1?i-o:r>-1?r-o:-1;n.querySelectorAll(e).forEach(((e,n)=>{e.classList.toggle("is-band",n>=0&&n<o),e.classList.toggle("is-band-highlighted",n===t)}))}else n.querySelectorAll(e).forEach((e=>e.classList.remove("is-band")));l?null===(u=n.querySelector(t))||void 0===u||u.classList.remove("is-highlight"):null===(p=n.querySelector(t))||void 0===p||p.classList.add("is-highlight")},s=a("svg .trace.bars g.point",".trace.bars"),l=a("svg .scatterlayer g.trace",".scatterlayer"),c=a("svg .scatterlayer path.point",".trace.scatter"),d=(e,t,n,a,s=0)=>{const l=(0,i.useRef)(n);l.current=n;const c=(0,i.useMemo)((()=>e&&t?n.findIndex((({uuid:e})=>e===t)):-1),[n,e,t]),[d,u]=(0,i.useState)(-1),{onHighlightChange:p}=h();(0,i.useEffect)((()=>{(0,o.GA)()||e&&a(e,d,c,s)}),[a,e,c,d,s]),(0,i.useEffect)((()=>{(0,o.GA)()&&e&&a(e,-1,c,s)}),[a,e,c,s]);const m=(0,i.useRef)(c);m.current=c;const g=(0,i.useCallback)((t=>{if(!e)return;const n=l.current.findIndex((({uuid:e})=>e===t));a(e,n,m.current,s)}),[a,e,s]);return(0,i.useEffect)((()=>p(g)),[p,g]),{selectedTraceIndex:c,hoveredPointIndex:d,setHoveredPointIndex:(0,o.GA)()?r.noop:u}};let u=function(e){return e[e.NONE=0]="NONE",e[e.CHART=1]="CHART",e[e.TABLE=2]="TABLE",e}({});const p=(0,i.createContext)({highlightDataTrace:()=>{},onHighlightChange:()=>()=>{}}),m=({children:e})=>{const t=(0,i.useRef)([]),n=(0,i.useRef)(!1),a=(0,i.useMemo)((()=>{if(!(0,o.GA)())return{highlightDataTrace:()=>{},onHighlightChange:()=>()=>{}};return{highlightDataTrace:(e,{shouldBlock:i,source:o}={})=>{if((0,r.isUndefined)(i)){if(n.current)return}else n.current=i;((e,n)=>{for(const r of t.current)r(e,n)})(e,o)},onHighlightChange:e=>(t.current.push(e),()=>{t.current=t.current.filter((t=>t!==e))})}}),[]);return(0,i.createElement)(p.Provider,{value:a},e)},h=()=>(0,i.useContext)(p)},28239:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(31014),i=n(25790);const o=(e,t="is-highlighted",n=!1,o)=>{const{onHighlightChange:a,highlightDataTrace:s}=(0,i.ZY)(),l=(0,r.useCallback)(((r,o)=>{var a,s;const l=null===(a=e.current)||void 0===a?void 0:a.querySelector(`.${t}`),c=n?".ag-center-cols-viewport":"",d=null===(s=e.current)||void 0===s?void 0:s.querySelector(`${c} .ag-row[row-id="${r}"]`);l&&l!==d&&l.classList.remove(t),o!==i.WF.TABLE&&d&&d.classList.add(t)}),[e,t,n]);(0,r.useEffect)((()=>a(l)),[l,a]);return{cellMouseOverHandler:(0,r.useCallback)((({data:e})=>{const t="object"===typeof e&&"groupParentInfo"in e,n=o?o({data:e}):t?e.rowUuid:e.runUuid;s(n,{source:i.WF.TABLE})}),[s,o]),cellMouseOutHandler:(0,r.useCallback)((()=>s(null)),[s])}}},28940:function(e,t,n){"use strict";n.d(t,{P:function(){return Mt},T:function(){return _t}});var r=n(76274),i=n.n(r),o=n(31014),a=n(51293),s=n(76010),l=n(6604),c=n(59403),d=n(9133),u=n(25866),p=n(89555),m=n(68048),h=n(3546),g=n(50111);var v={name:"12si88q",styles:"height:100%;width:100%;display:flex;align-items:center;justify-content:space-between"};const f=({enableSorting:e,canonicalSortKey:t,displayName:n,context:r})=>{const{orderByKey:i,orderByAsc:o}=r||{},a=(0,h.Px)(),s=t,{theme:l}=(0,c.u)();return(0,g.Y)("div",{role:"columnheader",css:v,children:(0,g.FD)("div",{css:(0,p.AH)({height:"100%",width:"100%",display:"flex",alignItems:"center",overflow:"hidden",paddingLeft:l.spacing.xs+l.spacing.sm,paddingRight:l.spacing.xs+l.spacing.sm,gap:l.spacing.sm,svg:{color:l.colors.textSecondary},"&:hover":{color:e?l.colors.actionTertiaryTextHover:"unset",svg:{color:l.colors.actionTertiaryTextHover}}},""),className:s===i?"is-ordered-by":"",onClick:e?()=>{let e=!o;s!==i&&(e=!1),a({orderByKey:s,orderByAsc:e})}:void 0,children:[(0,g.Y)("span",{"data-testid":`sort-header-${n}`,children:n}),e&&s===i?o?(0,g.Y)(m.SortAscendingIcon,{}):(0,g.Y)(m.SortDescendingIcon,{}):null]})})};var y=n(76758),x=n(88464);const C=o.memo((({value:e})=>{const{startTime:t,referenceTime:n,runStatus:r}=e||{},i=(0,x.A)();return t?(0,g.FD)("span",{css:b.cellWrapper,title:s.A.formatTimestamp(t,i),children:[(0,g.Y)(y.F,{status:r}),s.A.timeSinceStr(t,n)]}):(0,g.Y)(g.FK,{children:"-"})})),b={cellWrapper:e=>({display:"flex",alignItems:"center",gap:e.spacing.sm})},M=({text:e,maxSize:t,className:n,allowShowMore:r=!1,dataTestId:i})=>{if(e.length<=t)return(0,g.Y)("span",{className:n,"data-testid":i,children:e});const a=`${e.substr(0,t)}...`,[s,l]=(0,o.useState)(!1);return(0,g.FD)("span",{className:n,"data-testid":i,children:[s?e:a,r&&(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_common_components_trimmedtext.tsx_30",type:"link",onClick:()=>l(!s),size:"small",css:w.expandButton,"data-testid":"trimmed-text-button",children:s?"collapse":"expand"})]})},w={expandButton:{display:"inline-block"}},_=o.memo((({value:e})=>{const t=s.A.getRunDescriptionFromTags(e)||"-";return(0,g.Y)(g.FK,{children:(0,g.Y)(m.LegacyTooltip,{title:t,children:(0,g.Y)("span",{children:(0,g.Y)(M,{text:t,maxSize:50})})})})}));var S=n(48624),E=n(58481);const R=o.memo((({data:e,value:t})=>e.experimentId?(0,g.Y)(S.N_,{to:E.Ay.getExperimentPageRoute(e.experimentId),title:t.name,children:t.basename}):null));var I=n(69869),k=n(21317),A=n(88443),Y=n(31179),D=n(15003),T=n(91144);var L={name:"pnv6it",styles:"color:inherit;text-decoration:underline"},F={name:"1989ovb",styles:"vertical-align:middle"},K={name:"1p2zdak",styles:"margin-right:0;vertical-align:middle"},N={name:"osm46o",styles:"width:20px;display:flex;align-items:center;justify-content:flex-start;flex-shrink:0"},O={name:"167129t",styles:"text-overflow:ellipsis;overflow:hidden;cursor:pointer"};const H=({model:{isUc:e,registeredModelName:t,registeredModelVersion:n,flavors:r,artifactPath:i,originalLoggedModel:o}={},experimentId:a,runUuid:s})=>{const{theme:l}=(0,c.u)();return(0,g.FD)("div",{css:(0,p.AH)({display:"flex",alignItems:"center",gap:l.spacing.xs,overflow:"hidden"},""),children:[(0,g.Y)("div",{css:N,children:t?(0,g.Y)(k.h,{css:(0,p.AH)({color:l.colors.actionPrimaryBackgroundDefault},"")}):(0,g.Y)(m.ModelsIcon,{css:(0,p.AH)({color:l.colors.actionPrimaryBackgroundDefault},"")})}),(0,g.Y)(S.N_,{to:t&&n?I.fM.getModelVersionPageRoute(t,n):E.Ay.getRunPageRoute(a,s,i),target:"_blank",css:O,children:(()=>{let e=`${t} v${n}`;if(t&&n&&o&&(0,T.UJ)()){var i,a;const t=null===(i=o.info)||void 0===i?void 0:i.experiment_id,n=null===(a=o.info)||void 0===a?void 0:a.model_id;var s;if(t&&n)e=(0,g.Y)(A.A,{id:"BY1k4W",defaultMessage:"Original logged model: {originalModelLink}",values:{originalModelLink:(0,g.Y)(S.N_,{to:E.Ay.getExperimentLoggedModelDetailsPage(t,n),css:L,children:null===(s=o.info)||void 0===s?void 0:s.name})}})}if(t)return(0,g.FD)(m.LegacyTooltip,{title:e,placement:"topLeft",children:[(0,g.Y)("span",{css:F,children:t})," ",(0,g.FD)(m.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_modelscellrenderer.tsx_49",css:K,children:["v",n]})]});return(null===r||void 0===r?void 0:r[0])||(0,g.Y)(A.A,{id:"giZdtW",defaultMessage:"Model"})})()})]})};var B={name:"osm46o",styles:"width:20px;display:flex;align-items:center;justify-content:flex-start;flex-shrink:0"},P={name:"167129t",styles:"text-overflow:ellipsis;overflow:hidden;cursor:pointer"};const U=({model:e})=>{var t,n;const{theme:r}=(0,c.u)();return null!==(t=e.info)&&void 0!==t&&t.model_id&&null!==(n=e.info)&&void 0!==n&&n.experiment_id?(0,g.FD)("div",{css:(0,p.AH)({display:"flex",alignItems:"center",gap:r.spacing.xs,overflow:"hidden"},""),children:[(0,g.Y)("div",{css:B,children:(0,g.Y)(m.ModelsIcon,{css:(0,p.AH)({color:r.colors.actionPrimaryBackgroundDefault},"")})}),(0,g.Y)(S.N_,{to:E.Ay.getExperimentLoggedModelDetailsPage(e.info.experiment_id,e.info.model_id),target:"_blank",css:P,children:e.info.name})]}):null};var z={name:"1xsgnar",styles:"width:100%;&>div{max-width:100%;display:flex;}"};const V=o.memo((e=>{const{registeredModels:t=[],loggedModels:n=[],loggedModelsV3:r,experimentId:i,runUuid:a}=e.value||{},l=s.A.mergeLoggedAndRegisteredModels(n,t),{modelVersions:c}=(0,Y.b)({loggedModels:r||[]}),u=(0,o.useMemo)((()=>{if(!(0,T.ht)())return{};const e={};return c.forEach((t=>{var n,r;const i=null===(n=t.sourceLoggedModel)||void 0===n||null===(r=n.info)||void 0===r?void 0:r.model_id;if(i){var o,a,s,l,c;const n=e[i]||[],r=null!==(o=t.displayedName)&&void 0!==o?o:void 0;n.push({registeredModelName:r,registeredModelVersion:null!==(a=t.version)&&void 0!==a?a:void 0,isUc:(0,D.f)(null!==r&&void 0!==r?r:""),artifactPath:null!==(s=null===(l=t.sourceLoggedModel)||void 0===l||null===(c=l.info)||void 0===c?void 0:c.artifact_uri)&&void 0!==s?s:"",flavors:[],originalLoggedModel:t.sourceLoggedModel}),e[i]=n}})),e}),[c]),p=(0,o.useMemo)((()=>{const e=[...l,...Array.from((0,d.values)(u)).flat()];return(0,d.uniqBy)(e,(e=>{var t;return JSON.stringify(e.registeredModelName&&e.registeredModelVersion?[e.registeredModelName,null===(t=e.registeredModelVersion)||void 0===t?void 0:t.toString()]:[e.artifactPath])}))}),[l,u]),h=!(0,d.isEmpty)(p)||!(0,d.isEmpty)(r);return e.value&&h?(0,g.Y)("div",{css:z,children:(0,g.FD)(m.Overflow,{children:[p.map(((e,t)=>(0,g.Y)(H,{model:e,experimentId:i,runUuid:a},e.artifactPath||t))),null===r||void 0===r?void 0:r.map(((e,t)=>{var n,r,i;const o=null===(n=e.info)||void 0===n?void 0:n.model_id,a=o?u[o]:[];return(0,d.isEmpty)(a)?(0,g.Y)(U,{model:e},null!==(r=null===(i=e.info)||void 0===i?void 0:i.model_id)&&void 0!==r?r:t):null}))]})}):(0,g.Y)(g.FK,{children:"-"})})),G=o.memo((()=>{const{theme:e}=(0,c.u)(),t=(0,T.UJ)()&&(0,T.ht)();return(0,g.Y)("div",{role:"columnheader",css:(0,p.AH)({height:"100%",width:"100%",display:"flex",alignItems:"center",padding:"0 12px",gap:e.spacing.xs},""),children:t?(0,g.FD)(g.FK,{children:[u.qo.MODELS,(0,g.Y)(m.InfoTooltip,{componentId:"mlflow.experiment_view_runs_table.column_header.models.tooltip",content:(0,g.Y)(A.A,{id:"vVSm7w",defaultMessage:"This column contains all models logged or evaluated by the run. Click into an individual run to see more detailed information about all models associated with it."})})]}):(0,g.Y)(m.LegacyTooltip,{title:(0,g.Y)(A.A,{id:"c0slEY",defaultMessage:"Click into an individual run to see all models associated with it"}),children:u.qo.MODELS})})}));var j=n(15164);const W=o.memo((({value:e})=>{if(!e)return(0,g.Y)(g.FK,{children:"-"});const{version:t,name:n,type:r}=e;return s.A.renderSourceVersion(t,n,r)||(0,g.Y)(g.FK,{children:"-"})}));var $=n(21616),q=n(69526),X=n(12772),Q=n(21879),J=n(62862),Z=n(58898),ee=n(1670);const te=()=>(0,g.Y)(c.I,{component:ee.h}),ne={mouseEnterDelay:0,mouseLeaveDelay:0},re=({runUuid:e,className:t,rowHidden:n,buttonHidden:r,disabled:i,onClick:o,label:a})=>{const{theme:s}=(0,c.u)();return r?(0,g.Y)("div",{className:t,css:[ie.button(s),""]}):i?(0,g.Y)(m.VisibleOffIcon,{className:t,css:[ie.button(s),{opacity:.25,color:s.colors.grey400},""]}):(0,g.Y)(m.LegacyTooltip,{dangerouslySetAntdProps:ne,placement:"right",title:a,children:(0,g.FD)("label",{className:t,css:ie.button(s),children:[(0,g.Y)("span",{css:c.O,children:a}),(0,g.Y)("input",{type:"checkbox",className:"is-visibility-toggle-checkbox",checked:!n,onChange:()=>{if(e){const t=!n;o(Z.oy.CUSTOM,e,t)}}}),n?(0,g.Y)(m.VisibleOffIcon,{}):(0,g.Y)(te,{})]})})},ie={button:e=>({width:e.general.iconFontSize,color:e.colors.grey400,".ag-row:hover &":{color:e.colors.grey500}})},oe=o.createContext({runsHiddenMode:Z.oy.FIRST_10_RUNS,useGroupedValuesInCharts:!0,usingCustomVisibility:!1,allRunsHidden:!1}),ae=({children:e,runsHiddenMode:t,useGroupedValuesInCharts:n,usingCustomVisibility:r,allRunsHidden:i})=>{const a=(0,o.useMemo)((()=>({runsHiddenMode:t,useGroupedValuesInCharts:null===n||void 0===n||n,usingCustomVisibility:null!==r&&void 0!==r&&r,allRunsHidden:null!==i&&void 0!==i&&i})),[t,n,r,i]);return(0,g.Y)(oe.Provider,{value:a,children:e})},se=()=>o.useContext(oe),le={visibility:{groups:(0,q.YK)({unhide:{id:"8Gz0OE",defaultMessage:"Unhide group"},hide:{id:"TfuAgs",defaultMessage:"Hide group"}}),runs:(0,q.YK)({unhide:{id:"xmpvlI",defaultMessage:"Unhide run"},hide:{id:"qTjYVU",defaultMessage:"Hide run"}})},pinning:{groups:(0,q.YK)({unpin:{id:"jkeYf8",defaultMessage:"Unpin group"},pin:{id:"8hpS0b",defaultMessage:"Pin group"}}),runs:(0,q.YK)({unpin:{id:"ugm2f6",defaultMessage:"Unpin run"},pin:{id:"fjiojF",defaultMessage:"Pin run"}})}},ce={mouseEnterDelay:0,mouseLeaveDelay:0},de=o.memo((e=>{const t=(0,Q.e)(),{theme:n}=(0,c.u)(),{useGroupedValuesInCharts:r}=se(),{groupParentInfo:i,runDateAndNestInfo:a,visibilityControl:s}=e.data,{belongsToGroup:l}=a||{},d=Boolean(i),u=(0,T.Bh)()&&s===X.VB.Disabled,{pinned:p,hidden:h}=e.value,{runUuid:v,rowUuid:f}=e.data,y=i?f:v,x=(0,T.Bh)()&&!1===r&&i?Boolean(i.allRunsHidden):h,C=d?x?le.visibility.groups.unhide:le.visibility.groups.hide:x?le.visibility.runs.unhide:le.visibility.runs.hide,b=d?p?le.pinning.groups.unpin:le.pinning.groups.pin:p?le.pinning.runs.unpin:le.pinning.runs.pin,M=(0,o.useMemo)((()=>(0,T.Bh)()?s===X.VB.Hidden:!(i&&!(0,J.mC)(i)||Boolean(v)&&!l)),[i,l,v,s]);return(0,g.FD)("div",{css:pe.actionsContainer,children:[(0,g.Y)(re,{rowHidden:x,buttonHidden:M,disabled:u,label:(0,g.Y)(A.A,{...C}),onClick:e.onToggleVisibility,runUuid:y,css:[pe.actionCheckbox(n),pe.showOnlyInCompareMode,""]}),(e.data.pinnable&&v||i)&&(0,g.Y)(m.LegacyTooltip,{dangerouslySetAntdProps:ce,placement:"right",title:(0,g.Y)(A.A,{...b}),children:(0,g.FD)("label",{css:pe.actionCheckbox(n),className:"is-pin-toggle","data-testid":"column-pin-toggle",children:[(0,g.Y)("span",{css:c.O,children:(0,g.Y)(A.A,{...b})}),(0,g.Y)("input",{type:"checkbox",checked:p,onChange:()=>{const n=i?e.data.rowUuid:v;t((e=>n?{...e,runsPinned:e.runsPinned.includes(n)?e.runsPinned.filter((e=>e!==n)):[...e.runsPinned,n]}:e))}}),p?(0,g.Y)(m.PinFillIcon,{}):(0,g.Y)(m.PinIcon,{})]})},Math.random())]})}),((e,t)=>{var n,r;return e.value.hidden===t.value.hidden&&e.value.pinned===t.value.pinned&&e.data.visibilityControl===t.data.visibilityControl&&(null===(n=e.data.groupParentInfo)||void 0===n?void 0:n.allRunsHidden)===(null===(r=t.data.groupParentInfo)||void 0===r?void 0:r.allRunsHidden)})),ue=({event:e})=>!!("Tab"===e.key&&e.target instanceof HTMLElement&&(e.target.classList.contains("ag-cell")||e.target.classList.contains("is-visibility-toggle-checkbox"))),pe={actionsContainer:{display:"flex",gap:18},showOnlyInCompareMode:{display:"none",".is-table-comparing-runs-mode &":{display:"flex"}},actionCheckbox:e=>({input:{width:0,appearance:"none"},cursor:"pointer",display:"flex",svg:{width:e.general.iconFontSize,height:e.general.iconFontSize,cursor:"pointer"},"&.is-pin-toggle svg":{color:"transparent",".ag-row:hover &":{color:e.colors.grey500}},"& input:checked + span svg":{color:e.colors.grey500},"& input:focus-visible + span svg":{color:e.colors.grey500}})},me=()=>(0,g.Y)(c.I,{component:ee.h}),he=o.memo((({onToggleVisibility:e})=>{const{theme:t}=(0,c.u)(),n=(0,x.A)(),{runsHiddenMode:r,usingCustomVisibility:i,allRunsHidden:o}=se();return(0,g.FD)(m.DropdownMenu.Root,{modal:!1,children:[(0,g.Y)(m.DropdownMenu.Trigger,{asChild:!0,children:(0,g.Y)("button",{css:[ve.actionButton(t),ve.showOnlyInCompareMode,""],"data-testid":"experiment-view-runs-visibility-column-header","aria-label":n.formatMessage({id:"9HXup+",defaultMessage:"Toggle visibility of runs"}),children:r===Z.oy.HIDEALL||o?(0,g.Y)(m.VisibleOffIcon,{}):(0,g.Y)(me,{})})}),(0,g.Y)(m.DropdownMenu.Content,{children:(0,g.FD)(m.DropdownMenu.RadioGroup,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_rowactionsheadercellrenderer.tsx_52",value:r,onValueChange:t=>e(t),children:[(0,g.FD)(m.DropdownMenu.RadioItem,{value:Z.oy.FIRST_10_RUNS,children:[(0,g.Y)(m.DropdownMenu.ItemIndicator,{children:i?(0,g.Y)(m.DashIcon,{}):null}),(0,g.Y)(A.A,{id:"w39cZ4",defaultMessage:"Show first 10"})]}),(0,g.FD)(m.DropdownMenu.RadioItem,{value:Z.oy.FIRST_20_RUNS,children:[(0,g.Y)(m.DropdownMenu.ItemIndicator,{children:i?(0,g.Y)(m.DashIcon,{}):null}),(0,g.Y)(A.A,{id:"ONIiUE",defaultMessage:"Show first 20"})]}),(0,g.FD)(m.DropdownMenu.RadioItem,{value:Z.oy.SHOWALL,children:[(0,g.Y)(m.DropdownMenu.ItemIndicator,{children:i?(0,g.Y)(m.DashIcon,{}):null}),(0,g.Y)(A.A,{id:"4yjF8O",defaultMessage:"Show all runs"})]}),(0,g.FD)(m.DropdownMenu.RadioItem,{value:Z.oy.HIDEALL,children:[(0,g.Y)(m.DropdownMenu.ItemIndicator,{children:i?(0,g.Y)(m.DashIcon,{}):null}),(0,g.Y)(A.A,{id:"Qi6Etm",defaultMessage:"Hide all runs"})]})]})})]})})),ge=o.memo((e=>{const t=(0,x.A)();return(0,o.useEffect)((()=>{var n;const r=null===(n=e.eGridHeader)||void 0===n?void 0:n.querySelector("input");r&&(r.ariaLabel=t.formatMessage({id:"Csmj/2",defaultMessage:"Select all runs"}))}),[e.eGridHeader,t]),(0,g.Y)(he,{...e})})),ve={actionButton:e=>({background:"transparent",border:"none",cursor:"pointer",padding:"8px",".ag-checkbox:not(.ag-hidden) + &":{padding:"0 1px"},svg:{width:e.general.iconFontSize,height:e.general.iconFontSize,cursor:"pointer",color:e.colors.grey500}}),showOnlyInCompareMode:{display:"none",".is-table-comparing-runs-mode &":{display:"flex"}}};var fe=n(23823),ye=n(79432),xe=n(4877),Ce=n.n(xe),be=n(70403);var Me={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"},we={name:"mlsake",styles:"margin-left:0;margin-right:0"},_e={name:"oq2rn6",styles:"svg{width:12px;height:12px;}"};const Se=({data:e,isComparingRuns:t})=>{const n=e.groupParentInfo,r=e.hidden;Ce()(n,"groupParentInfo should be defined");const{theme:i}=(0,c.u)(),a=(0,S.zy)(),{useGroupedValuesInCharts:s}=se(),l=(0,be.LE)(),d=(0,be.MQ)(),u=(0,Q.e)(),v=(0,o.useCallback)(((e,t)=>{u((n=>{const{groupsExpanded:r}=n;return{...n,groupsExpanded:{...r,[e]:t}}}))}),[u]),f=(0,J.QD)(n),y=(0,o.useMemo)((()=>(0,T.Bh)()?s&&!(0,J.mC)(n):!(0,J.mC)(n)),[n,s]),x=(0,o.useMemo)((()=>{const e=(0,J.dx)(n),t=new URLSearchParams(a.search);t.set("searchFilter",e),t.set(h.ts,"true");return{...a,search:t.toString()}}),[n,a]);return(0,g.FD)("div",{css:(0,p.AH)({display:"flex",gap:i.spacing.sm,alignItems:"center"},""),children:[n.expanderOpen?(0,g.Y)(m.ChevronDownIcon,{role:"button",onClick:()=>{v(n.groupId,!1)}}):(0,g.Y)(c.q,{role:"button",onClick:()=>{v(n.groupId,!0)}}),y&&(0,g.Y)(ye.E,{color:l(n.groupId),hidden:t&&r,onChangeColor:e=>{d({groupUuid:n.groupId,colorValue:e})}}),(0,g.FD)("div",{css:(0,p.AH)({display:"inline-flex",gap:i.spacing.sm,alignItems:"center",overflow:"hidden",textOverflow:"ellipsis"},""),children:[(0,J.mC)(n)?(0,g.Y)(A.A,{id:"PKYh23",defaultMessage:"Additional runs"}):(0,g.Y)("span",{title:f,css:Me,children:(0,g.Y)(A.A,{id:"jq95vC",defaultMessage:"Group: {groupName}",values:{groupName:f}})}),(0,g.Y)(m.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_groupparentcellrenderer.tsx_109",css:we,children:n.runUuids.length}),(0,g.Y)(fe.T,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_groupparentcellrenderer.tsx_136",content:(0,g.Y)(A.A,{id:"+w9a+1",defaultMessage:"Open runs in this group in the new tab"}),children:(0,g.Y)(S.N_,{to:x,target:"_blank",css:(0,p.AH)({marginLeft:-i.spacing.xs,display:"none",".ag-row-hover &":{display:"inline-flex"}},""),children:(0,g.Y)(c.B,{type:"link",componentId:"mlflow.experiment_page.grouped_runs.open_runs_in_new_tab",size:"small",icon:(0,g.Y)(c.av,{css:_e})})})})]})]})};var Ee={name:"xahbfd",styles:"width:12px;height:12px;flex-shrink:0"};const Re=o.memo((e=>{const{theme:t}=(0,c.u)(),n=(0,be.MQ)(),r=(0,be.LE)(),{useGroupedValuesInCharts:i}=se();if(e.data.groupParentInfo)return(0,g.Y)(Se,{...e});const{onExpand:o,data:a}=e,{runName:s,experimentId:l,runUuid:d,runDateAndNestInfo:u,hidden:p}=a;Ce()(l,"experimentId should be set for run rows"),Ce()(d,"runUuid should be set for run rows"),Ce()(u,"runDateAndNestInfo should be set for run rows");const{hasExpander:h,expanderOpen:v,childrenIds:f,level:y,belongsToGroup:x}=u,C=!isNaN(y)&&h,b=(0,T.Bh)()?x&&i:x;return(0,g.FD)("div",{css:Ie.cellWrapper,children:[(0,g.Y)("div",{css:Ie.expanderWrapper,children:(0,g.Y)("div",{css:Ie.nestLevel(t),style:{width:(y+1)*t.spacing.lg},children:C&&(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_runnamecellrenderer.tsx_46",css:Ie.expanderButton,size:"small",onClick:()=>{o(d,f)},type:"link",icon:v?(0,g.Y)(m.MinusSquareIcon,{}):(0,g.Y)(m.PlusSquareIcon,{})},"Expander-"+d)})}),(0,g.FD)("div",{css:Ie.runLink,children:[b?(0,g.Y)("div",{css:Ee}):(0,g.Y)(ye.E,{color:r(d),hidden:e.isComparingRuns&&p,"data-testid":"experiment-view-table-run-color",onChangeColor:e=>n({runUuid:d,colorValue:e})}),(0,g.Y)(S.N_,{to:E.Ay.getRunPageRoute(l,d),css:Ie.runLink,tabIndex:0,children:(0,g.Y)("span",{css:Ie.runName,children:s})})]})]})})),Ie={link:e=>({display:"inline-block",minWidth:e.typography.fontSizeBase,minHeight:e.typography.fontSizeBase}),cellWrapper:{display:"flex"},expanderButton:{svg:{width:12,height:12}},runLink:{overflow:"hidden",display:"flex",gap:8,alignItems:"center","&:focus-visible":{textDecoration:"underline"}},runName:{overflow:"hidden",textOverflow:"ellipsis"},expanderWrapper:{display:"none",".ag-grid-expanders-visible &":{display:"block"}},nestLevel:e=>({display:"flex",justifyContent:"flex-end",height:e.spacing.lg})};var ke={name:"gikiyg",styles:"display:flex;justify-content:center;align-items:center;height:32px"};const Ae=o.memo((({loadMoreRunsFunc:e})=>(0,g.Y)("div",{css:ke,children:(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_loadmorerowrenderer.tsx_20",type:"primary",onClick:e,size:"small",children:(0,g.Y)(A.A,{id:"9CqEWy",defaultMessage:"Load more"})})})));var Ye={name:"rnnx2x",styles:"font-size:12px"},De={name:"rnnx2x",styles:"font-size:12px"};const Te=({datasetWithTags:e,onDatasetSelected:t,appendComma:n=!1,inPopover:r=!1})=>{const{theme:i}=(0,c.u)(),{dataset:o,tags:a}=e;if(!o)return null;const s=null===a||void 0===a?void 0:a.find((({key:e})=>e===u.AS));return(0,g.FD)("div",{css:(0,p.AH)({display:"flex",flexShrink:0,alignItems:"center",overflow:"hidden",marginRight:i.spacing.xs},""),children:[(0,g.Y)(m.TableIcon,{css:(0,p.AH)({color:i.colors.textSecondary,marginRight:i.spacing.xs},"")})," ",(0,g.Y)("span",{css:(0,p.AH)({minWidth:32,marginRight:i.spacing.xs,flexShrink:0},""),title:`${o.name} (${o.digest})`,children:r?(0,g.Y)(c.ax.Close,{asChild:!0,children:(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_49",type:"link",onClick:t,tabIndex:0,children:(0,g.FD)("span",{css:Ye,children:[o.name," (",o.digest,")"]})})}):(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_56",type:"link",onClick:t,"data-testid":"open-dataset-drawer",tabIndex:0,children:(0,g.FD)("span",{children:[o.name," (",o.digest,")"]})})}),s&&(0,g.Y)(m.Tag,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_75",css:(0,p.AH)({textTransform:"capitalize",marginRight:i.spacing.xs},""),children:(0,g.Y)("span",{css:De,children:s.value})}),n&&(0,g.Y)(g.FK,{children:","})]})};var Le={name:"zjik7",styles:"display:flex"},Fe={name:"eq7f8j",styles:"display:flex;align-items:flex-end"},Ke={name:"h1n7cn",styles:"max-height:400px;overflow:auto"};const Ne=o.memo((({value:e,data:t,onDatasetSelected:n,expandRows:r})=>{const i=(0,o.useRef)(null),[a,s]=(0,o.useState)(0),[l,u]=(0,o.useState)(!1),m=(0,o.useMemo)((()=>(e||[]).slice(0,3)),[e]),{theme:h}=(0,c.u)(),v=(e||[]).length;(0,o.useEffect)((()=>{if(!i.current)return()=>{};const e=(0,d.throttle)((([e])=>{if(r){const t=e.contentRect.height;let n=0,r=0;for(let i=0;i<e.target.children.length;i++){const o=e.target.children.item(i);if(r+o.clientHeight>t)break;r+=o.clientHeight,n++}s(n),u(n<v)}else{const t=e.contentRect.width;if(0===t&&v)return s(0),void u(!0);let n=0,r=0;for(let o=0;o<e.target.children.length;o++){const i=e.target.children.item(o);if(r+i.clientWidth>=t)break;r+=i.clientWidth,n++}const i=Math.min(v,n+1);s(i),u(n<v)}}),100),t=new ResizeObserver(e);return t.observe(i.current),()=>t.disconnect()}),[r,v]);const f=v-a;if(!e||v<1)return(0,g.Y)(g.FK,{children:"-"});const y=r?m:e;return(0,g.FD)("div",{css:Le,children:[(0,g.Y)("div",{css:(0,p.AH)({overflow:"hidden",display:"flex",flexDirection:r?"column":"row"},""),ref:i,children:y.map(((e,i)=>(0,g.Y)(Te,{appendComma:!r&&i<y.length-1,datasetWithTags:e,onDatasetSelected:()=>null===n||void 0===n?void 0:n(e,t)},`${e.dataset.name}-${e.dataset.digest}`)))}),(f>0||l)&&(0,g.FD)("div",{css:Fe,children:[!r&&l&&(0,g.Y)("span",{css:(0,p.AH)({paddingLeft:0,paddingRight:h.spacing.xs},""),children:"\u2026"}),f>0&&(0,g.FD)(c.ax.Root,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_184",modal:!1,children:[(0,g.Y)(c.ax.Trigger,{asChild:!0,children:(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_172",size:"small",style:{borderRadius:"8px",width:"40px"},tabIndex:0,children:(0,g.FD)(c.T.Text,{color:"secondary",children:["+",f]})})}),(0,g.Y)(c.ax.Content,{align:"start",css:Ke,children:e.slice(v-f).map((e=>(0,g.Y)("div",{css:(0,p.AH)({height:h.general.heightSm,display:"flex",alignItems:"center"},""),children:(0,g.Y)(Te,{datasetWithTags:e,onDatasetSelected:()=>null===n||void 0===n?void 0:n(e,t),inPopover:!0})},`${e.dataset.name}-${e.dataset.digest}`)))})]})]})]})})),Oe=({event:e})=>"Tab"===e.key&&e.target instanceof HTMLElement&&(e.target.classList.contains("ag-cell")||e.target instanceof HTMLButtonElement),He=({value:e,data:t,valueFormatted:n})=>{var r;const{theme:i}=(0,c.u)();return null!==(r=t.groupParentInfo)&&void 0!==r&&r.aggregateFunction?(0,g.FD)(c.T.Text,{children:[null!==n&&void 0!==n?n:e," ",(0,g.FD)("span",{css:(0,p.AH)({color:i.colors.textSecondary},""),children:["(",t.groupParentInfo.aggregateFunction,")"]})]}):e};var Be=n(94026),Pe=n(35286);const Ue=({colDef:e,context:t})=>{var n;return t.orderByKey===(null===(n=e.headerComponentParams)||void 0===n?void 0:n.canonicalSortKey)},ze=e=>e?105:73,Ve=e=>`${$.iy}-${e}`,Ge=e=>`${$.Pl}-${e}`,je=({loading:e,...t})=>(0,c.S)({loading:!1,...t}),We=({event:e})=>"Tab"===e.key&&e.target instanceof HTMLElement&&e.target.classList.contains("ag-cell"),$e={[u.T8.USER]:(0,$.GF)(u.RO.ATTRIBUTES,"User"),[u.T8.RUN_NAME]:(0,$.GF)(u.RO.ATTRIBUTES,"Run Name"),[u.T8.SOURCE]:(0,$.GF)(u.RO.ATTRIBUTES,"Source"),[u.T8.VERSION]:(0,$.GF)(u.RO.ATTRIBUTES,"Version"),[u.T8.DESCRIPTION]:(0,$.GF)(u.RO.ATTRIBUTES,"Description")},qe=({data:e})=>e.rowUuid,Xe=({rowNode:e})=>e.data.isLoadMoreRow,Qe=(e=!1)=>{const t=[u.qo.USER,u.qo.SOURCE,u.qo.VERSION,u.qo.MODELS,u.qo.DATASET,u.qo.DESCRIPTION];return e&&t.push(u.qo.EXPERIMENT_NAME),t},Je=({selectedColumns:e,compareExperiments:t,onTogglePin:n,onToggleVisibility:r,onExpand:i,paramKeyList:a,metricKeyList:l,tagKeyList:p,columnApi:m,onDatasetSelected:h,isComparingRuns:g,expandRows:v,runsHiddenMode:f})=>{const{theme:y}=(0,c.u)(),x=(({paramKeyList:e,metricKeyList:t,tagKeyList:n})=>{const r=(0,o.useRef)(new Set),i=(0,o.useRef)(new Set),a=(0,o.useRef)(new Set),s=(0,o.useMemo)((()=>(e.forEach((e=>i.current.add(e))),Array.from(i.current))),[e]),l=(0,o.useMemo)((()=>(t.forEach((e=>r.current.add(e))),Array.from(r.current))),[t]),c=(0,o.useMemo)((()=>(n.forEach((e=>a.current.add(e))),Array.from(a.current))),[n]);return(0,o.useMemo)((()=>({paramKeys:s,metricKeys:l,tagKeys:c})),[l,s,c])})({metricKeyList:l,tagKeyList:p,paramKeyList:a}),C=(0,Be.Ub)(`(max-width: ${y.responsive.breakpoints.sm}px)`),b=(0,o.useMemo)((()=>{const o=[];o.push({valueGetter:({data:{pinned:e,hidden:t}})=>({pinned:e,hidden:t}),checkboxSelection:!0,headerComponent:"RowActionsHeaderCellRenderer",headerComponentParams:{onToggleVisibility:r},headerCheckboxSelection:!0,headerName:"",cellClass:"is-checkbox-cell",cellRenderer:"RowActionsCellRenderer",cellRendererParams:{onTogglePin:n,onToggleVisibility:r},pinned:C?void 0:"left",minWidth:ze(g),width:ze(g),maxWidth:ze(g),resizable:!1,suppressKeyboardEvent:ue});const a=g;if(o.push({headerName:u.qo.RUN_NAME,colId:a?void 0:$e[u.T8.RUN_NAME],headerTooltip:u.T8.RUN_NAME,pinned:C?void 0:"left",sortable:!0,cellRenderer:"RunNameCellRenderer",cellRendererParams:{onExpand:i,isComparingRuns:g},equals:(e,t)=>{var n,r;return(null===e||void 0===e?void 0:e.rowUuid)===(null===t||void 0===t?void 0:t.rowUuid)&&(null===e||void 0===e||null===(n=e.groupParentInfo)||void 0===n?void 0:n.expanderOpen)===(null===t||void 0===t||null===(r=t.groupParentInfo)||void 0===r?void 0:r.expanderOpen)},headerComponentParams:{canonicalSortKey:u.T8.RUN_NAME},cellClassRules:{"is-ordered-by":Ue},initialWidth:a?void 0:190,flex:a?1:void 0,resizable:!g,suppressKeyboardEvent:We}),g)return o;o.push({headerName:u.qo.DATE,headerTooltip:u.T8.DATE,pinned:C?void 0:"left",sortable:!0,field:"runDateAndNestInfo",cellRenderer:"DateCellRenderer",cellRendererParams:{onExpand:i},equals:(e,t)=>(0,d.isEqual)(e,t),headerComponentParams:{canonicalSortKey:u.T8.DATE},cellClassRules:{"is-ordered-by":Ue},initialWidth:150}),o.push({headerName:u.qo.DATASET,colId:(0,$.GF)(u.RO.ATTRIBUTES,u.qo.DATASET),headerTooltip:u.qo.DATASET,sortable:!1,field:"datasets",cellRenderer:"DatasetsCellRenderer",cellRendererParams:{onDatasetSelected:h,expandRows:v},cellClass:"is-multiline-cell",initialWidth:300,suppressKeyboardEvent:Oe}),o.push({headerName:u.qo.DURATION,field:"duration",initialWidth:80}),t&&o.push({headerName:u.qo.EXPERIMENT_NAME,colId:(0,$.GF)(u.RO.ATTRIBUTES,u.qo.EXPERIMENT_NAME),field:"experimentName",cellRenderer:"ExperimentNameCellRenderer",equals:(e,t)=>(0,d.isEqual)(e,t),initialWidth:140,initialHide:!0,suppressKeyboardEvent:We}),o.push({headerName:u.qo.USER,colId:$e[u.T8.USER],headerTooltip:u.T8.USER,field:"user",sortable:!0,headerComponentParams:{canonicalSortKey:u.T8.USER},cellClassRules:{"is-ordered-by":Ue},initialHide:!0}),o.push({headerName:u.qo.SOURCE,colId:$e[u.T8.SOURCE],field:"tags",cellRenderer:"SourceCellRenderer",equals:(e={},t={})=>s.A.getSourceName(e)===s.A.getSourceName(t),sortable:!0,headerComponentParams:{canonicalSortKey:u.T8.SOURCE},cellClassRules:{"is-ordered-by":Ue},initialHide:!0,suppressKeyboardEvent:We}),o.push({headerName:u.qo.VERSION,colId:$e[u.T8.VERSION],field:"version",cellRenderer:"VersionCellRenderer",equals:(e={},t={})=>(0,d.isEqual)(e,t),sortable:!0,headerComponentParams:{canonicalSortKey:u.T8.VERSION},cellClassRules:{"is-ordered-by":Ue},initialHide:!0}),o.push({headerComponent:"ModelsHeaderCellRenderer",colId:(0,$.GF)(u.RO.ATTRIBUTES,u.qo.MODELS),field:"models",cellRenderer:"ModelsCellRenderer",initialWidth:200,equals:(e={},t={})=>(0,d.isEqual)(e,t),initialHide:!0,suppressKeyboardEvent:We}),o.push({headerName:u.qo.DESCRIPTION,colId:$e[u.T8.DESCRIPTION],field:"tags",cellRenderer:"RunDescriptionCellRenderer",initialWidth:300,initialHide:!0,sortable:!0,headerComponentParams:{canonicalSortKey:u.T8.DESCRIPTION},cellClassRules:{"is-ordered-by":Ue}});const{metricKeys:l,paramKeys:c,tagKeys:p}=x;return l.length&&o.push({headerName:"Metrics",groupId:u.RO.METRICS,children:l.filter((t=>{const n=(0,$.GF)(u.RO.METRICS,t);return g||e.includes(n)})).map((e=>{var t,n;const r=(0,$.GF)(u.RO.METRICS,e),i=Pe.g[e],o=null!==(t=null===i||void 0===i?void 0:i.displayName)&&void 0!==t?t:e,a=(s=e,`${$.tZ}-${s}`);var s;return{headerName:o,colId:r,headerTooltip:(0,$.$e)(u.RO.METRICS,e),field:a,tooltipValueGetter:e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[a]},initialWidth:null!==(n=null===i||void 0===i?void 0:i.initialColumnWidth)&&void 0!==n?n:100,initialHide:!0,sortable:!0,headerComponentParams:{canonicalSortKey:r},valueFormatter:null===i||void 0===i?void 0:i.valueFormatter,cellRendererSelector:({data:{groupParentInfo:e}})=>e?{component:"AggregateMetricValueCell"}:void 0,cellClassRules:{"is-previewable-cell":()=>!0,"is-ordered-by":Ue}}}))}),c.length&&o.push({headerName:"Parameters",groupId:u.RO.PARAMS,children:c.filter((t=>{const n=(0,$.GF)(u.RO.PARAMS,t);return g||e.includes(n)})).map((e=>{const t=(0,$.GF)(u.RO.PARAMS,e);return{colId:t,headerName:e,headerTooltip:(0,$.$e)(u.RO.PARAMS,e),field:Ve(e),tooltipField:Ve(e),initialHide:!0,initialWidth:100,sortable:!0,headerComponentParams:{canonicalSortKey:t},cellClassRules:{"is-previewable-cell":()=>!0,"is-ordered-by":Ue}}}))}),p.length&&o.push({headerName:"Tags",colId:u.RO.TAGS,children:p.filter((t=>{const n=(0,$.GF)(u.RO.TAGS,t);return g||e.includes(n)})).map((e=>({colId:(0,$.GF)(u.RO.TAGS,e),headerName:e,initialHide:!0,initialWidth:100,headerTooltip:(0,$.$e)(u.RO.TAGS,e),field:Ge(e),tooltipField:Ge(e)})))}),o}),[n,r,i,t,x,g,h,v,C,e]),M=(0,o.useMemo)((()=>[...Qe(!0).map((e=>(0,$.GF)(u.RO.ATTRIBUTES,e))),...x.paramKeys.map((e=>(0,$.GF)(u.RO.PARAMS,e))),...x.metricKeys.map((e=>(0,$.GF)(u.RO.METRICS,e))),...x.tagKeys.map((e=>(0,$.GF)(u.RO.TAGS,e)))]),[x]);return(0,o.useEffect)((()=>{if(m&&!g)for(const t of M){const n=e.includes(t);m.setColumnVisible(t,n)}}),[e,m,M,g]),b},Ze={initialWidth:100,autoSizePadding:0,headerComponentParams:{menuIcon:"fa-bars"},resizable:!0,filter:!0,suppressMenu:!0,suppressMovable:!0};var et=n(47664);const tt=({isFiltered:e,onClearFilters:t})=>(0,g.Y)("div",{css:nt.noResultsWrapper,children:(0,g.Y)("div",{css:nt.noResults,children:e?(0,g.Y)(m.Empty,{button:(0,g.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsemptytable.tsx_35",type:"primary",onClick:t,children:(0,g.Y)(A.A,{id:"pEpexK",defaultMessage:"Clear filters"})}),description:(0,g.Y)(A.A,{id:"Nnsm0p",defaultMessage:"All runs in this experiment have been filtered. Change or clear filters to view runs."}),title:(0,g.Y)(A.A,{id:"Tl63jz",defaultMessage:"All runs are filtered"}),image:(0,g.Y)(m.FilterIcon,{})}):(0,g.Y)(m.Empty,{description:(0,g.Y)(A.A,{id:"coo35p",defaultMessage:"No runs have been logged yet. <link>Learn more</link> about how to create ML model training runs in this experiment.",values:{link:e=>(0,g.Y)("a",{target:"_blank",href:et.XO,rel:"noreferrer",children:e})}}),title:(0,g.Y)(A.A,{id:"sByLVU",defaultMessage:"No runs logged"}),image:(0,g.Y)(m.BeakerIcon,{})})})}),nt={noResults:{maxWidth:360},noResultsWrapper:e=>({marginTop:e.spacing.lg,inset:0,backgroundColor:e.colors.backgroundPrimary,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"})},rt="is-out-of-viewport",it="is-hidden",ot="is-minimized",at=".ag-root",st=".ag-pinned-left-cols-container",lt=".ag-center-cols-container",ct=".ag-header",dt=".ag-body-viewport",ut=({onClick:e,gridContainerElement:t,isInitialized:n,visible:r,moreRunsAvailable:i,moreAvailableRunsTableColumnCount:a=0})=>{const s=(0,o.useRef)(null),l=(0,o.useRef)(),d=(0,o.useRef)(Boolean(i));(0,o.useEffect)((()=>{d.current=Boolean(i)}),[i]);const u=(0,o.useCallback)((e=>{if(!s.current||!window.ResizeObserver||!e)return;const t=s.current,n=e.querySelector(at),r=e.querySelector(st),i=e.querySelector(lt),o=e.querySelector(ct),a=e.querySelector(dt);let c=0,u=0,p=0,m=0,h=0,g=0;if(r&&i&&o&&n&&a){const e=new ResizeObserver((e=>{var s,v,f,y;for(const t of e)t.target===n&&(c=t.contentRect.width),t.target===r&&(u=t.contentRect.width,p=t.contentRect.height),t.target===a&&(h=t.contentRect.height),t.target===o&&(g=t.contentRect.height),t.target===i&&(m=t.contentRect.width);const x=u+m,C=g;x+180>=c?null===(s=l.current)||void 0===s||s.classList.add(rt):null===(v=l.current)||void 0===v||v.classList.remove(rt);const b=d.current?32:0,M=p<h?p-b:h;M<100?null===(f=l.current)||void 0===f||f.classList.add(ot):null===(y=l.current)||void 0===y||y.classList.remove(ot),t.style.transform=`translate3d(${x}px, ${C}px, 0)`,t.style.height=`${M+1}px`}));return e.observe(r),e.observe(i),e.observe(o),e.observe(n),e.observe(a),()=>e.disconnect()}}),[]);return(0,o.useEffect)((()=>{n&&t&&(l.current=t,u(t))}),[u,n,t]),window.ResizeObserver?(0,g.Y)("div",{ref:s,css:pt.columnContainer,className:r?"":it,children:r&&(0,g.Y)("div",{css:pt.buttonContainer,children:(0,g.FD)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunstableaddcolumncta.tsx_218",css:pt.button,type:"link",onClick:e,children:[(0,g.Y)(m.PlusCircleIcon,{css:pt.buttonIcon}),(0,g.Y)("div",{css:pt.caption,children:(0,g.Y)(A.A,{id:"y3JM9B",defaultMessage:"Show more columns"})})]})})}):null},pt={columnContainer:e=>({width:180,height:0,position:"absolute",border:`1px solid ${e.colors.borderDecorative}`,borderTop:0,top:0,left:0,willChange:"transform",transform:"translate3d(0, 0, 0)",[`.${ot} &`]:{display:"flex",alignItems:"center"},[`&.${it}, .${rt} &`]:{display:"none"},pointerEvents:"none",display:"flex",alignItems:"center"}),buttonContainer:e=>({top:0,paddingLeft:e.spacing.lg,paddingRight:e.spacing.lg,width:"100%",[`.${ot} &`]:{paddingTop:e.spacing.xs},pointerEvents:"all"}),button:{whiteSpace:"pre-wrap",width:"100%"},buttonIcon:e=>({color:e.colors.textSecondary}),caption:e=>({color:e.colors.textSecondary,[`.${ot} &`]:{display:"none"}})},mt=e=>(0,g.Y)("strong",{children:e}),ht=({isLoading:e,allRunsCount:t})=>(0,g.FD)("div",{css:gt.statusBar,children:[(0,g.Y)(c.T.Text,{size:"sm",color:e?"secondary":void 0,children:(0,g.Y)(A.A,{id:"gLj8lU",defaultMessage:"<strong>{length}</strong> matching {length, plural, =0 {runs} =1 {run} other {runs}}",values:{strong:mt,length:t}})}),e&&(0,g.Y)(c.S,{size:"small"})]}),gt={statusBar:e=>({height:28,display:"flex",gap:8,marginTop:-1,position:"relative",alignItems:"center",borderTop:`1px solid ${e.colors.border}`})};var vt=n(37752),ft=n(83028);const yt=(e,t,n)=>{n.forEachNode((n=>{var r;if(null!==(r=n.data)&&void 0!==r&&r.isLoadMoreRow)return;const{runInfo:i,runDateAndNestInfo:o}=n.data;if(!i)return;const a=i.runUuid;e.includes(a)&&(null!==o&&void 0!==o&&o.childrenIds&&e.push(...o.childrenIds),n.setSelected(t,!1,!0))}))};var xt=n(22853),Ct=n(28239);var bt={name:"yqjhl6",styles:"display:flex;flex-direction:column;position:relative"};const Mt=o.memo((({experiments:e,searchFacetsState:t,runsData:n,isLoading:r,moreRunsAvailable:p,updateViewState:v,onAddColumnClicked:y,rowsData:x,loadMoreRunsFunc:b,onDatasetSelected:M,expandRows:w,viewState:S,uiState:E,compareRunsMode:I})=>{const{theme:k}=(0,c.u)(),Y=(0,Q.e)(),D=(0,h.Px)(),{orderByKey:L,orderByAsc:F}=t,{selectedColumns:K,runsPinned:N,runsHidden:O,runListHidden:H}=E,B="TABLE"!==I,{paramKeyList:P,metricKeyList:U,tagsList:z}=(0,o.useMemo)((()=>{if(B)return n;return{metricKeyList:n.metricKeyList.filter((e=>K.includes((0,$.GF)(u.RO.METRICS,e)))),paramKeyList:n.paramKeyList.filter((e=>K.includes((0,$.GF)(u.RO.PARAMS,e)))),tagsList:n.tagsList.map((e=>Object.fromEntries(Object.entries(e).filter((([e])=>K.includes((0,$.GF)(u.RO.TAGS,e)))))))}}),[n,K,B]),[q,X]=(0,o.useState)(),[J,Z]=(0,o.useState)(),ee=((0,o.useRef)([]),(0,o.useMemo)((()=>s.A.getVisibleTagKeyList(z)),[z])),te=(0,o.useRef)(null),ne=(0,o.useMemo)((()=>x.some((e=>{var t;return null===(t=e.runDateAndNestInfo)||void 0===t?void 0:t.hasExpander}))),[x]),re=(0,o.useCallback)((e=>Y((({runsExpanded:t,...n})=>({...n,runsExpanded:{...t,[e]:!t[e]}})))),[Y]),ie=(0,o.useCallback)((e=>{Y((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]})))}),[Y]),oe=(0,xt.v)(x,E.useGroupedValuesInCharts),se=(0,o.useCallback)((e=>{X(e.api),Z(e.columnApi)}),[]),{handleRowSelected:le,onSelectionChange:ce}=(e=>{const t=(0,o.useCallback)((({api:t})=>{const n=t.getSelectedRows().filter((e=>e.runInfo)).map((({runInfo:e})=>e.runUuid));e({runsSelected:n.reduce(((e,t)=>({...e,[t]:!0})),{})})}),[e]);return{handleRowSelected:(0,o.useCallback)((e=>{const t=Boolean(e.node.isSelected()),{runDateAndNestInfo:n,runInfo:r,groupParentInfo:i}=e.data;if(i&&yt(i.runUuids,t,e.api),!n)return;const{isParent:o,expanderOpen:a,childrenIds:s}=n;if(o&&a&&s)yt(s,t,e.api);else if(r){yt([r.runUuid],t,e.api);const n=(0,d.uniqBy)(e.api.getSelectedRows().filter((e=>Boolean(e.runUuid))),"runUuid");l=n,e.api.forEachNode((e=>{const t=e.data;t.groupParentInfo&&(t.groupParentInfo.runUuids.every((e=>l.some((t=>t.runUuid===e))))&&e.setSelected(!0,!1,!0),t.groupParentInfo.runUuids.some((e=>l.some((t=>t.runUuid===e))))||e.setSelected(!1,!1,!0))}))}var l}),[]),onSelectionChange:t}})(v),ue=(0,o.useMemo)((()=>(0,T.Rn)()?x.every((e=>e.hidden)):n.runInfos.every((({runUuid:e})=>O.includes(e)))),[n,x,O]),pe=(0,T.Rn)()&&!(0,d.isEmpty)(E.runsVisibilityMap),me=Je({selectedColumns:K,onExpand:re,compareExperiments:e.length>1,onTogglePin:ie,onToggleVisibility:oe,metricKeyList:U,paramKeyList:P,tagKeyList:ee,columnApi:J,isComparingRuns:B,onDatasetSelected:M,expandRows:w,runsHiddenMode:E.runsHiddenMode}),he=(0,o.useCallback)((e=>{if(e&&B)try{e.sizeColumnsToFit()}catch{}}),[B]);(0,o.useEffect)((()=>{if(q)if(r)q.showLoadingOverlay();else{if(q.hideOverlay(),x.length&&p)return q.setRowData([...x,{runUuid:"",rowUuid:(0,d.uniqueId)("load_more"),isLoadMoreRow:!0}]),void he(q);q.setRowData(x),he(q)}}),[q,x,r,p,b,he]);const ve=(0,o.useMemo)((()=>Qe(e.length>1).length+(U.length+P.length+ee.length)),[e.length,ee.length,U.length,P.length]),fe=K.length>=ve,ye=Math.max(0,ve-K.length),xe=(0,o.useMemo)((()=>n.runInfos.filter((e=>N.includes(e.runUuid)||n.runUuidsMatchingFilter.includes(e.runUuid))).length),[n,N]);(0,o.useLayoutEffect)((()=>{q&&(B&&(q.deselectAll(),q.sizeColumnsToFit()),q.resetRowHeights())}),[q,B]);const Ce=(0,o.useCallback)((e=>{if(B||!w)return $.Fc;const t=(0,$.GF)(u.RO.ATTRIBUTES,u.qo.DATASET);return((e,t)=>{if(e){var n;const{data:e}=t,r=Math.min((null===(n=e.datasets)||void 0===n?void 0:n.length)||1,3);return $.Fc*r}return $.Fc})(K.includes(t),e)}),[K,B,w]);(0,o.useEffect)((()=>{null===q||void 0===q||q.resetRowHeights()}),[q,K,w]);const[be,Me]=(0,o.useState)(null),we=(0,o.useCallback)((({column:e,data:t,value:n})=>{var r;const i=null===(r=e.getParent())||void 0===r?void 0:r.getGroupId();(i===u.RO.METRICS||i===u.RO.PARAMS)&&(Me({value:n,header:`Run name: ${t.runName}, Column name: ${e.getColDef().headerTooltip}`}),v({previewPaneVisible:!0}))}),[v]),_e=!fe&&!B&&x.length>0,Se=!B&&S.previewPaneVisible,Ee=!H||!B,Ie=!H,ke=x.length<1&&!r&&Ee,Ye=(0,o.useMemo)((()=>({orderByAsc:F,orderByKey:L})),[F,L]),{cellMouseOverHandler:De,cellMouseOutHandler:Te}=(0,Ct._)(te),Le=_t();return(0,g.FD)("div",{css:e=>({display:"grid",flex:1,gridTemplateColumns:Se?"1fr auto":"1fr",borderTop:`1px solid ${e.colors.border}`}),className:B?"is-table-comparing-runs-mode":void 0,children:[(0,g.FD)("div",{css:bt,children:[(0,g.FD)("div",{ref:te,className:i()("ag-theme-balham ag-grid-sticky",{"ag-grid-expanders-visible":ne,"is-table-comparing-runs-mode":B}),css:[Le,{display:Ee?"block":"hidden",height:"100%"},""],"aria-hidden":!Ee,children:[(0,g.Y)(ae,{runsHiddenMode:E.runsHiddenMode,usingCustomVisibility:pe,useGroupedValuesInCharts:Boolean(E.groupBy)&&E.useGroupedValuesInCharts,allRunsHidden:ue,children:(0,g.Y)(a.p,{context:Ye,defaultColDef:Ze,columnDefs:me,rowSelection:"multiple",onGridReady:se,onSelectionChanged:ce,getRowHeight:Ce,headerHeight:$.Fc,onRowSelected:le,suppressRowClickSelection:!0,suppressColumnMoveAnimation:!0,suppressScrollOnNewData:!0,isFullWidthRow:Xe,fullWidthCellRenderer:"LoadMoreRowRenderer",fullWidthCellRendererParams:{loadMoreRunsFunc:b},suppressFieldDotNotation:!0,enableCellTextSelection:!0,components:{agColumnHeader:f,loadingOverlayComponent:je,LoadMoreRowRenderer:Ae,SourceCellRenderer:j.t,ModelsCellRenderer:V,ModelsHeaderCellRenderer:G,VersionCellRenderer:W,DateCellRenderer:C,ExperimentNameCellRenderer:R,RunDescriptionCellRenderer:_,RowActionsCellRenderer:de,RowActionsHeaderCellRenderer:ge,RunNameCellRenderer:Re,DatasetsCellRenderer:Ne,AggregateMetricValueCell:He},suppressNoRowsOverlay:!0,loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:{showImmediately:!0},getRowId:qe,rowBuffer:101,onCellClicked:we,onGridSizeChanged:({api:e})=>he(e),onCellMouseOver:De,onCellMouseOut:Te,maxBlocksInCache:20,cacheBlockSize:100,maxConcurrentDatasourceRequests:2,suppressModelUpdateAfterUpdateTransaction:!0,immutableData:!0,getRowNodeId:e=>e.rowUuid,suppressPropertyNamesCheck:!0,suppressAnimationFrame:!0})}),_e&&(0,g.Y)(ut,{gridContainerElement:te.current,isInitialized:Boolean(q),onClick:y,visible:!r,moreRunsAvailable:p,moreAvailableRunsTableColumnCount:ye})]}),ke&&(0,g.Y)(tt,{onClearFilters:()=>{D((0,ft.G)())},isFiltered:(0,l.e9)(t)}),Ie&&(0,g.Y)(ht,{allRunsCount:xe,isLoading:r})]}),Se&&(0,g.Y)(vt.V,{content:null===be||void 0===be?void 0:be.value,copyText:null===be||void 0===be?void 0:be.value,headerText:null===be||void 0===be?void 0:be.header,onClose:()=>v({previewPaneVisible:!1}),empty:(0,g.Y)(m.Empty,{description:(0,g.Y)(A.A,{id:"cAKSkQ",defaultMessage:"Select a cell to display preview"})})})]})})),wt=(e,t=!0)=>{const n=(e=>({rowForeground:e.colors.textPrimary,rowBackground:e.colors.backgroundPrimary,rowBackgroundHover:e.colors.tableBackgroundUnselectedHover,rowBackgroundSelected:e.colors.tableBackgroundSelectedDefault,rowBackgroundHoverSelected:e.colors.tableBackgroundSelectedHover,columnSortedBy:`${e.colors.blue400}1F`,headerBackground:e.colors.backgroundSecondary,headerTextColor:e.colors.textSecondary,headerGroupTextColor:e.colors.textSecondary,borderColor:e.colors.borderDecorative,headerBorderColor:"transparent",checkboxBorderColor:e.colors.actionDefaultBorderDefault,checkboxBorderColorChecked:e.colors.backgroundPrimary,checkboxBackgroundColorChecked:e.colors.actionPrimaryBackgroundDefault,overlayBackground:`${e.colors.backgroundSecondary}99`}))(e);return{height:"100%",position:"relative","&.ag-theme-balham":{"--ag-border-color":n.borderColor,"--ag-row-border-color":n.borderColor,"--ag-foreground-color":n.rowForeground,"--ag-background-color":n.rowBackground,"--ag-odd-row-background-color":n.rowBackground,"--ag-row-hover-color":n.rowBackgroundHover,"--ag-selected-row-background-color":n.rowBackgroundSelected,"--ag-header-foreground-color":n.headerTextColor,"--ag-header-background-color":n.headerBackground,"--ag-modal-overlay-background-color":n.overlayBackground,"&.ag-grid-sticky .ag-header":{position:"sticky",top:0,zIndex:1},"&.ag-grid-sticky .ag-root":{overflow:"visible"},"&.ag-grid-sticky .ag-root-wrapper":{border:"0",borderRadius:"4px",overflow:"visible"},".is-table-comparing-runs-mode & .ag-body-horizontal-scroll.ag-scrollbar-invisible":{display:"none"},".ag-header::after":{content:'""',position:"absolute",top:$.Fc,left:0,right:0,height:1,backgroundColor:n.borderColor},".ag-cell":{display:"flex",overflow:"hidden","& > .ag-cell-wrapper":{overflow:"hidden"}},".ag-header-cell":t?{padding:0}:void 0,".ag-header-cell .ag-checkbox":t?{padding:"0 7px",borderLeft:"1px solid transparent"}:void 0,".ag-cell.is-ordered-by, .ag-header-cell > .is-ordered-by":{backgroundColor:n.columnSortedBy},".ag-header-row":{"--ag-border-color":n.headerBorderColor},".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":n.headerGroupTextColor},".ag-row.ag-row-selected.ag-row-hover":{backgroundColor:n.rowBackgroundHoverSelected},".ag-row.is-highlighted":{backgroundColor:n.rowBackgroundHoverSelected},".ag-header:not(:hover) .ag-header-cell::after, .ag-header:not(:hover) .ag-header-group-cell::after":{opacity:0},".ag-pinned-left-header":{borderRight:"none"},".ag-overlay-loading-wrapper":{paddingTop:4*e.spacing.md,alignItems:"center",zIndex:2},".ag-overlay-loading-wrapper .ag-react-container":{flex:1},".ag-center-cols-container":{minHeight:0},".ag-full-width-row":{borderBottom:0,backgroundColor:"transparent",zIndex:1,"&.ag-row-hover":{backgroundColor:"transparent"}},".is-checkbox-cell":{display:"flex",alignItems:"center",paddingLeft:7,".is-multiline-cell .ag-cell-value":{height:"100%"}},".is-previewable-cell":{cursor:"pointer"},".ag-header-cell .ag-checkbox .ag-input-wrapper:not(.ag-indeterminate):not(.ag-checked)":{"--ag-checkbox-background-color":n.headerBackground},".ag-cell-wrapper .ag-selection-checkbox":{marginRight:20},".is-checkbox-cell, .ag-header-cell .ag-checkbox":{".ag-checkbox-input-wrapper::after":{color:n.checkboxBorderColor},".ag-checkbox-input-wrapper.ag-checked":{"--ag-checkbox-background-color":n.checkboxBackgroundColorChecked,"--ag-checkbox-checked-color":n.checkboxBorderColorChecked,"&::after":{color:n.checkboxBorderColorChecked}}}}}},_t=({usingCustomHeaderComponent:e=!0}={})=>{const{theme:t}=(0,c.u)();return(0,o.useMemo)((()=>wt(t,e)),[t,e])}},31276:function(e,t,n){"use strict";n.d(t,{I:function(){return T}});var r=n(89555),i=n(59403),o=n(68048),a=n(70618),s=n(9856),l=n(58732),c=n(31014),d=n(88464),u=n(30152),p=n(25866),m=n(76010);const h="-",g=(e,t=2)=>{if("number"===typeof e)return e.toFixed(t);if("string"===typeof e)return e;try{return JSON.stringify(e)}catch{return h}};let v=function(e){return e[e.POSITIVE=0]="POSITIVE",e[e.NEGATIVE=1]="NEGATIVE",e[e.SAME=2]="SAME",e}({});const f=(e,t)=>e!==h&&t!==h&&(typeof e!==typeof t||("number"===typeof e&&"number"===typeof t?Math.abs(e-t)>1e-6:"string"===typeof e&&"string"===typeof t&&e!==t)),y="expand",x="headingColumn",C=e=>{const t=(e,n)=>Object.keys(n).map((r=>{if("boolean"===typeof n[r]){let t={key:r,[x]:r};return Object.keys(e).forEach((n=>{var i;const o=null===(i=e[n])||void 0===i?void 0:i[r];t={...t,[n]:void 0===o?h:o}})),t}const i={};return Object.keys(e).forEach((t=>{var n;i[t]=null===(n=e[t])||void 0===n?void 0:n[r]})),{key:r,[x]:r,children:t(i,n[r])}}));return e.map((e=>{let n,r=!0;const i={};if(Object.keys(e).forEach((t=>{if(t!==x&&e[t]!==h){const o=(e=>{try{const t=JSON.parse(e);return null===t||"object"!==typeof t||Array.isArray(t)||0===Object.keys(t).length?null:t}catch(t){return null}})(e[t]);if(i[t]=o,null===o)r=!1;else{const e=((e,t)=>{if(void 0!==e&&0===Object.keys(e).length)return null;if(void 0!==t&&0===Object.keys(t).length)return null;const n={},r=(e,t)=>{for(const n in t)e.hasOwnProperty(n)&&!e[n]||("object"!==typeof t[n]||null===t[n]||Array.isArray(t[n])?t[n]===h?e[n]=!0:e[n]=!1:(e[n]=e[n]||{},r(e[n],t[n])))};return void 0!==e&&r(n,e),void 0!==t&&r(n,t),n})(n,o);null===e?r=!1:n=e}}})),!r||void 0===n)return e;try{return{[x]:e[x],children:t(i,n),key:e[x]}}catch{return e}}))};var b=n(50111);var M={name:"ti75j2",styles:"margin:0"};const w=({label:e,direction:t})=>{const{theme:n}=(0,i.u)();let a,s=null;switch(t){case v.NEGATIVE:a="error",s=(0,b.Y)(o.ArrowDownIcon,{color:"danger","data-testid":"negative-cell-direction"});break;case v.POSITIVE:a="success",s=(0,b.Y)(o.ArrowUpIcon,{color:"success","data-testid":"positive-cell-direction"});break;case v.SAME:a="info",s=(0,b.Y)(o.DashIcon,{css:(0,r.AH)({color:n.colors.textSecondary},""),"data-testid":"same-cell-direction"})}return(0,b.FD)("div",{css:(0,r.AH)({display:"inline-flex",backgroundColor:n.colors.actionDisabledBackground,padding:`${n.spacing.xs/2}px ${n.spacing.xs}px`,fontSize:n.typography.fontSizeSm,borderRadius:n.borders.borderRadiusSm,userSelect:"none",gap:n.spacing.xs,alignItems:"center",svg:{width:n.typography.fontSizeSm,height:n.typography.fontSizeSm},overflow:"hidden"},""),children:[(0,b.Y)(i.T.Text,{size:"sm",color:a,css:M,ellipsis:!0,children:e}),s]})},_=({getValue:e,row:{original:t},column:{columnDef:n}})=>{var o;const{theme:a}=(0,i.u)(),{isBaseline:s,baselineColumnUuid:l,showChangeFromBaseline:c}=null!==(o=n.meta)&&void 0!==o?o:{},d=e();if(s)return g(e());if(void 0===d)return null;const u=l?((e,t)=>{if("number"===typeof e&&"number"===typeof t){const n=e-t;return 0===n?{label:g(n).toString(),direction:v.SAME}:n>0?{label:`+${g(n)}`,direction:v.POSITIVE}:{label:g(n).toString(),direction:v.NEGATIVE}}})(d,t[l]):null;return(0,b.FD)("span",{css:(0,r.AH)({display:"inline-flex",overflow:"hidden",gap:a.spacing.sm,alignItems:"center"},""),children:[(0,b.Y)(i.T.Text,{ellipsis:!0,children:g(d)}),u&&c&&(0,b.Y)(w,{label:u.label,direction:u.direction})]})};var S=n(79432),E=n(88443);var R={name:"82a6rk",styles:"flex:1"};const I=({column:{columnDef:e}})=>{var t,n;const{theme:a}=(0,i.u)(),s=null===(t=e.meta)||void 0===t?void 0:t.traceData,l=null===(n=e.meta)||void 0===n?void 0:n.updateBaselineColumnUuid;return s?(0,b.FD)("div",{css:(0,r.AH)({flex:1,display:"inline-flex",overflow:"hidden",alignItems:"center",gap:a.spacing.xs,fontWeight:"normal"},""),children:[(0,b.Y)(S.E,{color:s.color})," ",(0,b.Y)(i.T.Text,{ellipsis:!0,children:null===s||void 0===s?void 0:s.displayName}),(0,b.Y)("div",{css:R}),(0,b.FD)(o.DropdownMenu.Root,{children:[(0,b.Y)(o.DropdownMenu.Trigger,{asChild:!0,children:(0,b.Y)(i.B,{type:"link",size:"small",componentId:"mlflow.charts.difference_plot.overflow_menu.trigger",icon:(0,b.Y)(o.OverflowIcon,{})})}),(0,b.Y)(o.DropdownMenu.Content,{children:(0,b.Y)(o.DropdownMenu.Item,{componentId:"mlflow.charts.difference_plot.overflow_menu.set_as_baseline",onClick:()=>null===l||void 0===l?void 0:l(s.uuid),children:(0,b.Y)(E.A,{id:"wxq/qM",defaultMessage:"Set as baseline"})})})]})]}):null};const k=({row:e,toggleExpand:t})=>e.getCanExpand()&&t?(0,b.Y)(i.B,{componentId:"mlflow.charts.difference_plot.expand_button",size:"small",type:"link",onClick:()=>t(e),icon:e.getIsExpanded()?(0,b.Y)(o.ChevronDownIcon,{}):(0,b.Y)(i.q,{})}):null;var A={name:"1djur21",styles:"flex:1;overflow-x:scroll;height:100%"},Y={name:"77ql30",styles:"position:sticky;top:0;z-index:101"},D={name:"1bh2wf5",styles:"width:auto;position:absolute;top:0"};const T=({previewData:e,cardConfig:t,groupBy:n,setCardConfig:g})=>{const{formatMessage:v}=(0,d.A)(),{theme:M}=(0,i.u)(),{modelMetrics:w,systemMetrics:S,parameters:E,tags:R,attributes:T}=(0,c.useMemo)((()=>((e,t,n,r)=>{const i=(r,i,o)=>Array.from(new Set(e.flatMap((e=>i(e))))).filter((e=>r(e))).sort().flatMap((r=>{const i={};let a=!1;return e.forEach(((t,n)=>{if(i[t.uuid]=o(t)[r]?o(t)[r].value:h,n>0){const r=e[n-1];f(i[r.uuid],i[t.uuid])&&(a=!0)}})),t.showDifferencesOnly&&!a?[]:[{[n]:r,...i}]})),o=i((e=>!e.startsWith(p.qt)),(e=>Object.keys(e.metrics)),(e=>e.metrics)),a=i((e=>e.startsWith(p.qt)),(e=>Object.keys(e.metrics)),(e=>e.metrics));return r?{modelMetrics:o,systemMetrics:a,parameters:[],tags:[],attributes:[]}:{modelMetrics:o,systemMetrics:a,parameters:i((()=>!0),(e=>Object.keys(e.params)),(e=>e.params)),tags:i((()=>!0),(e=>m.A.getVisibleTagValues(e.tags).map((([e])=>e))),(e=>e.tags)),attributes:[u.rJ.USER,u.rJ.SOURCE,u.rJ.VERSION,u.rJ.MODELS].flatMap((r=>{const i={};let o=!1;return e.forEach(((t,n)=>{if(r===u.rJ.USER){var a;const e=m.A.getUser(null!==(a=t.runInfo)&&void 0!==a?a:{},t.tags);i[t.uuid]=e}else if(r===u.rJ.SOURCE){const e=m.A.getSourceName(t.tags);i[t.uuid]=e}else if(r===u.rJ.VERSION){const e=m.A.getSourceVersion(t.tags);i[t.uuid]=e}else{const e=m.A.getLoggedModelsFromTags(t.tags);i[t.uuid]=e.join(",")}if(n>0){const r=e[n-1];f(i[r.uuid],i[t.uuid])&&(o=!0)}})),t.showDifferencesOnly&&!o?[]:[{[n]:r,...i}]}))}})(e,t,x,n)),[e,t,n]),{baselineColumn:L,nonBaselineColumns:F}=(0,c.useMemo)((()=>{const n=e.slice().reverse();let r=n.find((e=>e.uuid===t.baselineColumnUuid));void 0===r&&n.length>0&&(r=n[0]);const i=n.filter((e=>void 0===r||e.uuid!==r.uuid));return{baselineColumn:r,nonBaselineColumns:i}}),[e,t.baselineColumnUuid]),K=(0,c.useCallback)((e=>{null===g||void 0===g||g((t=>({...t,baselineColumnUuid:e})))}),[g]),N=(0,c.useMemo)((()=>t.compareGroups.reduce(((e,t)=>{switch(t){case u.K8.MODEL_METRICS:e.push({[x]:v({id:"d8OeBh",defaultMessage:"Model Metrics"}),children:[...w],key:"modelMetrics"});break;case u.K8.SYSTEM_METRICS:e.push({[x]:v({id:"CDOfWP",defaultMessage:"System Metrics"}),children:[...S],key:"systemMetrics"});break;case u.K8.PARAMETERS:e.push({[x]:v({id:"28Dnzz",defaultMessage:"Parameters"}),children:C(E),key:"parameters"});break;case u.K8.ATTRIBUTES:e.push({[x]:v({id:"MBNIRk",defaultMessage:"Attributes"}),children:[...T],key:"attributes"});break;case u.K8.TAGS:e.push({[x]:v({id:"7mgmG6",defaultMessage:"Tags"}),children:[...R],key:"tags"})}return e}),[])),[w,S,E,R,T,t.compareGroups,v]),O=(0,c.useMemo)((()=>[{id:y,cell:k,size:32,enableResizing:!1},{accessorKey:x,size:150,header:v({id:"c5AQYh",defaultMessage:"Compare by"}),id:x,enableResizing:!0},...[L,...F].map(((e,n)=>{var r;return{accessorKey:null===e||void 0===e?void 0:e.uuid,size:200,enableResizing:!0,meta:{traceData:e,updateBaselineColumnUuid:K,showChangeFromBaseline:t.showChangeFromBaseline,isBaseline:e===L,baselineColumnUuid:null===L||void 0===L?void 0:L.uuid},id:null!==(r=null===e||void 0===e?void 0:e.uuid)&&void 0!==r?r:n.toString(),header:I,cell:_}}))]),[v,L,F,K,t.showChangeFromBaseline]),[H,B]=(0,c.useState)({modelMetrics:!0,systemMetrics:!0,parameters:!0,attributes:!0,tags:!0}),P=(0,a.N4)({columns:O,data:N,getCoreRowModel:(0,s.HT)(),getExpandedRowModel:(0,s.D0)(),columnResizeMode:"onChange",enableExpanding:!0,getSubRows:e=>e.children,getRowId:e=>e.key,getRowCanExpand:e=>Boolean(e.subRows.length),state:{expanded:H,columnPinning:{left:[y,x]}}}),U=(0,c.useRef)(null),z=(0,c.useCallback)((e=>{const t=e.original.key;B((n=>({...n,[t]:!e.getIsExpanded()})))}),[]),{getVirtualItems:V,getTotalSize:G}=(0,l.Te)({count:P.getExpandedRowModel().rows.length,getScrollElement:()=>U.current,estimateSize:()=>33,paddingStart:37}),j=P.getExpandedRowModel().rows;return(0,b.Y)("div",{css:A,ref:U,children:(0,b.FD)(o.Table,{css:(0,r.AH)({width:P.getTotalSize(),position:"relative"},""),children:[(0,b.Y)(o.TableRow,{isHeader:!0,css:Y,children:P.getLeafHeaders().map(((e,t)=>{const n=e.column.getIsPinned();return(0,b.Y)(o.TableHeader,{header:e,column:e.column,setColumnSizing:P.setColumnSizing,componentId:"mlflow.charts.difference_plot.header",multiline:!1,style:{left:"left"===n?`${e.column.getStart("left")}px`:void 0,position:n?"sticky":"relative",width:e.column.getSize(),flexBasis:e.column.getSize(),zIndex:n?100:0},wrapContent:!1,children:(0,a.Kv)(e.column.columnDef.header,e.getContext())},e.id)}))}),(0,b.Y)("div",{css:(0,r.AH)({height:G()},""),children:V().map((({index:e,start:t,size:n})=>{const r=j[e];return(0,b.Y)(o.TableRow,{css:D,style:{transform:`translateY(${t}px)`,height:n},children:r.getVisibleCells().map(((e,t)=>{const n=e.column.getIsPinned(),i=e.column.columnDef.id===x;return(0,b.Y)(o.TableCell,{style:{left:"left"===n?`${e.column.getStart("left")}px`:void 0,position:n?"sticky":"relative",width:e.column.getSize(),zIndex:n?100:0,flexBasis:e.column.getSize()},css:[{backgroundColor:n?M.colors.backgroundPrimary:void 0},i&&{borderRight:`1px solid ${M.colors.border}`},i&&{paddingLeft:r.depth*M.spacing.lg},""],wrapContent:!1,children:(0,a.Kv)(e.column.columnDef.cell,{...e.getContext(),toggleExpand:z})},e.id)}))},r.id+e)}))})]})})}},32582:function(e,t,n){"use strict";n.d(t,{h:function(){return _}});var r,i,o,a,s,l,c,d,u,p,m,h,g,v,f,y,x,C,b=n(31014);function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(null,arguments)}function w({title:e,titleId:t,...n},w){return b.createElement("svg",M({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:w,"aria-labelledby":t},n),e?b.createElement("title",{id:t},e):null,r||(r=b.createElement("rect",{y:2,width:4,height:1,fill:"#338ECC"})),i||(i=b.createElement("rect",{x:5,y:2,width:4,height:1,fill:"#338ECC"})),o||(o=b.createElement("rect",{x:10,y:2,width:4,height:1,fill:"#338ECC"})),a||(a=b.createElement("rect",{y:4,width:4,height:1,fill:"#338ECC"})),s||(s=b.createElement("rect",{x:5,y:4,width:4,height:1,fill:"#338ECC"})),l||(l=b.createElement("rect",{x:10,y:4,width:4,height:1,fill:"#338ECC"})),c||(c=b.createElement("rect",{y:6,width:4,height:1,fill:"#D9D9D9"})),d||(d=b.createElement("rect",{x:5,y:6,width:4,height:1,fill:"#D9D9D9"})),u||(u=b.createElement("rect",{x:10,y:6,width:4,height:1,fill:"#D9D9D9"})),p||(p=b.createElement("rect",{y:8,width:4,height:1,fill:"#D9D9D9"})),m||(m=b.createElement("rect",{x:5,y:8,width:4,height:1,fill:"#D9D9D9"})),h||(h=b.createElement("rect",{x:10,y:8,width:4,height:1,fill:"#D9D9D9"})),g||(g=b.createElement("rect",{y:10,width:4,height:1,fill:"#D9D9D9"})),v||(v=b.createElement("rect",{x:5,y:10,width:4,height:1,fill:"#D9D9D9"})),f||(f=b.createElement("rect",{x:10,y:10,width:4,height:1,fill:"#D9D9D9"})),y||(y=b.createElement("rect",{y:12,width:4,height:1,fill:"#D9D9D9"})),x||(x=b.createElement("rect",{x:5,y:12,width:4,height:1,fill:"#D9D9D9"})),C||(C=b.createElement("rect",{x:10,y:12,width:4,height:1,fill:"#D9D9D9"})))}const _=b.forwardRef(w);n.p},34389:function(e,t,n){"use strict";n.d(t,{f:function(){return v}});var r=n(89555),i=n(59403),o=n(23823),a=n(79432),s=n(54421),l=n(50111);const c=({previewData:e,cardConfig:t})=>{const{theme:n}=(0,i.u)(),c=e.filter((e=>{const n=e.images[t.imageKeys[0]];return n&&Object.keys(n).length>0}));return 0===c.length?(0,l.Y)(s.mQ,{}):(0,l.Y)("div",{css:(0,r.AH)({display:"flex",justifyContent:"flex-start",flexWrap:"wrap",gap:n.spacing.xs},""),children:c.map((e=>{const i=Object.values(e.images[t.imageKeys[0]]).reduce(((e,t)=>(void 0!==t.step&&(e[t.step]=t),e)),{});return(0,l.FD)("div",{css:(0,r.AH)({border:"1px solid transparent",borderRadius:n.borders.borderRadiusSm,padding:n.spacing.sm,"&:hover":{border:`1px solid ${n.colors.border}`,backgroundColor:n.colors.tableBackgroundUnselectedHover}},""),children:[(0,l.Y)(o.T,{content:e.displayName,componentId:"mlflow.charts.image-plot.run-name-tooltip",children:(0,l.FD)("div",{css:(0,r.AH)({height:n.typography.lineHeightMd,overflow:"hidden",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",gap:n.spacing.sm},""),children:[(0,l.Y)(a.E,{color:e.color}),e.displayName]})}),(0,l.Y)(s.Rn,{step:t.step,metadataByStep:i,runUuid:e.uuid},e.uuid)]},e.uuid)}))})};var d=n(68048),u=n(88443);var p={name:"1kzq5ms",styles:"height:100%;width:100%"};const m=({previewData:e,cardConfig:t})=>{const{theme:n}=(0,i.u)(),c=e.filter((e=>0!==Object.keys(e.images).length));return 0===c.length?(0,l.Y)(s.mQ,{}):(0,l.Y)("div",{css:p,children:(0,l.FD)(d.Table,{grid:!0,scrollable:!0,children:[(0,l.FD)(d.TableRow,{isHeader:!0,children:[(0,l.Y)(d.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_charts_imagegridmultiplekeyplot.tsx_44",css:(0,r.AH)({minWidth:s.Mc+n.spacing.md},""),children:(0,l.Y)(u.A,{id:"IdxSB8",defaultMessage:"images"})}),c.map((e=>(0,l.Y)(d.TableHeader,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_charts_imagegridmultiplekeyplot.tsx_52",css:(0,r.AH)({minWidth:s.Mc+n.spacing.md},""),children:(0,l.Y)(o.T,{content:e.displayName,componentId:"mlflow.charts.image-plot.run-name-tooltip",children:(0,l.FD)("div",{css:(0,r.AH)({height:n.typography.lineHeightMd,whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",margin:"auto",gap:n.spacing.sm,fontWeight:"normal"},""),children:[(0,l.Y)(a.E,{color:e.color}),e.displayName]})})},e.uuid)))]}),t.imageKeys.map((e=>(0,l.FD)(d.TableRow,{children:[(0,l.Y)(d.TableCell,{css:(0,r.AH)({minWidth:s.Mc+n.spacing.md},""),children:(0,l.Y)("div",{style:{whiteSpace:"normal"},children:e})}),c.map((i=>{if(i.images[e]&&Object.keys(i.images[e]).length>0){const o=Object.values(i.images[e]).reduce(((e,t)=>(void 0!==t.step&&(e[t.step]=t),e)),{});return(0,l.Y)(d.TableCell,{css:(0,r.AH)({minWidth:s.Mc+n.spacing.md,"&:hover":{backgroundColor:n.colors.tableBackgroundUnselectedHover}},""),children:(0,l.Y)(s.Rn,{metadataByStep:o,step:t.step,runUuid:i.uuid})},i.uuid)}return(0,l.Y)(d.TableCell,{css:(0,r.AH)({minWidth:s.Mc+n.spacing.md},"")},i.uuid)}))]},e)))]})})};var h=n(25866);var g={name:"r3950p",styles:"flex:1;display:flex;justify-content:center;align-items:center"};const v=({previewData:e,cardConfig:t,groupBy:n,setCardConfig:r})=>{const i=e.some((e=>Boolean(e.tags[h.Cr]))),o=e.filter((e=>e.tags[h.Cr])).slice(-h.Lf);return i?1===t.imageKeys.length?(0,l.Y)(c,{previewData:o,cardConfig:t}):t.imageKeys.length>1?(0,l.Y)(m,{previewData:o,cardConfig:t}):null:(0,l.Y)("div",{css:g,children:(0,l.Y)(d.Empty,{title:(0,l.Y)(u.A,{id:"ez06Dt",defaultMessage:"No images found"}),description:(0,l.Y)(u.A,{id:"E5Ruk+",defaultMessage:"No logged images found in the currently visible runs"})})})}},37752:function(e,t,n){"use strict";n.d(t,{V:function(){return c}});var r=n(89555),i=(n(31014),n(59403)),o=n(68048),a=n(56412),s=n(50111);var l={name:"4fhn5u",styles:"white-space:pre-wrap;overflow-y:auto;flex:1"};const c=({content:e,copyText:t,headerText:n,empty:c,onClose:d})=>{const{theme:u}=(0,i.u)();return(0,s.Y)("div",{css:(0,r.AH)({width:300,padding:u.spacing.sm,paddingRight:0,borderLeft:`1px solid ${u.colors.borderDecorative}`,overflow:"hidden",display:"flex",flexDirection:"column",height:"100%"},""),"data-testid":"preview-sidebar-content",children:e?(0,s.FD)(s.FK,{children:[(0,s.FD)("div",{css:(0,r.AH)({display:"grid",gridTemplateColumns:"1fr auto auto",rowGap:u.spacing.sm,alignItems:"flex-start",flex:"0 0 auto"},""),children:[n&&(0,s.Y)(i.T.Title,{level:4,css:(0,r.AH)({overflowX:"hidden",overflowY:"auto",marginTop:u.spacing.sm,marginRight:u.spacing.xs,maxHeight:200},""),children:n}),t&&(0,s.Y)(a.i,{copyText:t,showLabel:!1,icon:(0,s.Y)(o.CopyIcon,{})}),d&&(0,s.Y)(i.B,{componentId:"codegen_mlflow_app_src_common_components_previewsidebar.tsx_67",type:"primary",icon:(0,s.Y)(i.C,{}),onClick:d})]}),(0,s.Y)("div",{css:l,children:e})]}):(0,s.Y)("div",{css:(0,r.AH)({marginTop:u.spacing.md},""),children:c})})}},39045:function(e,t,n){"use strict";n.d(t,{J:function(){return Z}});var r=n(89555),i=n(68048),o=n(30152),a=n(59403),s=n(31014),l=n(50111);var c=({activeKey:e,onActiveKeyChange:t,children:n,disableCollapse:o=!1})=>{const{theme:c,getPrefixedClassName:d}=(0,a.u)(),u=d("collapse"),p=(0,s.useMemo)((()=>{const e=`.${u}-item`,t=`${e}-active`,n=`.${u}-header`,r=`.${u}-content`,i=`.${u}-content-box`,a=`.${u}-arrow`;return{[r]:{padding:"0px !important",backgroundColor:"transparent !important"},[i]:{padding:"0 0 12px 0px !important",backgroundColor:"transparent !important"},[`& > ${e} > ${n} > ${a}`]:{fontSize:c.general.iconSize,left:12,verticalAlign:"-7px",transform:"rotate(-90deg)",display:o?"none":void 0},[`& > ${t} > ${n} > ${a}`]:{transform:"rotate(0deg)"},[n]:{display:"flex",color:c.colors.textPrimary,fontWeight:600,alignItems:"center","&:focus-visible":{outlineColor:`${c.colors.primary} !important`,outlineStyle:"auto !important"}},[`& > ${e}`]:{borderBottom:`1px solid ${c.colors.border}`,borderRadius:0},[`& > ${e} > ${n}`]:{padding:0,lineHeight:"20px",height:55}}}),[c,u,o]);return(0,l.Y)(i.Accordion,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_metricchartsaccordion.tsx_82",...e?{activeKey:e}:{},...t?{onChange:t}:{},dangerouslyAppendEmotionCSS:(0,r.AH)(p,""),dangerouslySetAntdProps:{expandIconPosition:"left"},children:n})},d=n(70169),u=n(23823),p=n(77198),m=n(6211),h=n(73549),g=n(43270),v=n(74035),f=n(32582),y=n(99790),x=n(88443);const C=({onAddChart:e,supportedChartTypes:t})=>{const n=e=>!t||t.includes(e);return(0,l.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,l.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscompareaddchartmenu.tsx_19",css:b.addChartButton,icon:(0,l.Y)(i.PlusIcon,{}),"data-testid":"experiment-view-compare-runs-add-chart",children:(0,l.Y)(x.A,{id:"9vwPnB",defaultMessage:"Add chart"})})}),(0,l.FD)(i.DropdownMenu.Content,{align:"end",children:[n(o.zL.BAR)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_42",onClick:()=>e(o.zL.BAR),"data-testid":"experiment-view-compare-runs-chart-type-bar",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(p.h,{})}),(0,l.Y)(x.A,{id:"gdK07H",defaultMessage:"Bar chart"})]}),n(o.zL.LINE)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_56",onClick:()=>e(o.zL.LINE),"data-testid":"experiment-view-compare-runs-chart-type-line",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(h.h,{})}),(0,l.Y)(x.A,{id:"CyTYL6",defaultMessage:"Line chart"})]}),n(o.zL.PARALLEL)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_70",onClick:()=>e(o.zL.PARALLEL),"data-testid":"experiment-view-compare-runs-chart-type-parallel",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(g.h,{})}),(0,l.Y)(x.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]}),n(o.zL.SCATTER)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_84",onClick:()=>e(o.zL.SCATTER),"data-testid":"experiment-view-compare-runs-chart-type-scatter",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(v.h,{})}),(0,l.Y)(x.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]}),n(o.zL.CONTOUR)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_98",onClick:()=>e(o.zL.CONTOUR),"data-testid":"experiment-view-compare-runs-chart-type-contour",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(m.h,{})}),(0,l.Y)(x.A,{id:"6XfILf",defaultMessage:"Contour chart"})]}),n(o.zL.DIFFERENCE)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_112",onClick:()=>e(o.zL.DIFFERENCE),"data-testid":"experiment-view-compare-runs-chart-type-difference",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(f.h,{})}),(0,l.Y)(x.A,{id:"G5mMJI",defaultMessage:"Difference view"})]}),n(o.zL.IMAGE)&&(0,l.FD)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsaddchartmenu.tsx_126",onClick:()=>e(o.zL.IMAGE),"data-testid":"experiment-view-compare-runs-chart-type-image",children:[(0,l.Y)(i.DropdownMenu.IconWrapper,{css:b.iconWrapper,children:(0,l.Y)(y.h,{})}),(0,l.Y)(x.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})]})]})},b={addChartButton:e=>({backgroundColor:`${e.colors.backgroundPrimary} !important`}),iconWrapper:e=>({width:e.general.iconSize+e.spacing.xs})};var M=n(90765),w=n(76274),_=n.n(w);var S={name:"5s5off",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);cursor:grab"};const E=({index:e,section:t,sectionChartsLength:n,addNewChartCard:o,onDeleteSection:c,onAddSection:p,editSection:m,onSetEditSection:h,onSetSectionName:g,onSectionReorder:v,isExpanded:f,hideExtraControls:y,supportedChartTypes:b})=>{const{theme:w}=(0,a.u)(),[E,R]=(0,s.useState)(t.name),[I,k]=(0,s.useState)(!1),A=(0,s.useRef)(null),Y=(0,s.useRef)(null),[D,T]=(0,s.useState)(0),[L,F]=(0,s.useState)(!1),K=e=>{e.stopPropagation()},N=e=>{e.stopPropagation(),E.trim()?(h(-1),g(t.uuid,E)):e.preventDefault()};(0,s.useEffect)((()=>{if(!A.current)return;const e=new ResizeObserver((([e])=>{T(e.contentRect.width)}));return e.observe(A.current),()=>e.disconnect()}),[]);const O=m===e,[H,B]=(0,s.useState)(!1),{dragHandleRef:P,dragPreviewRef:U,dropTargetRef:z,isOver:V,isDragging:G}=(0,M.S)({dragGroupKey:"sections",dragKey:t.uuid,onDrop:v});return(0,l.Y)(l.FK,{children:(0,l.FD)("div",{role:"figure",css:(0,r.AH)({display:"flex",alignItems:"center",width:"100%",padding:`${w.spacing.xs}px 0px`,height:"55px",".section-element-visibility-on-hover":{visibility:H?"visible":"hidden",opacity:H?1:0},".section-element-visibility-on-hover-and-not-drag":{visibility:H?"visible":"hidden",opacity:H?I?0:1:0},".section-element-hidden-on-edit":{display:O?"none":"inherit"}},""),onMouseMove:()=>B(!0),onMouseLeave:()=>B(!1),ref:e=>{null===z||void 0===z||z(e),null===U||void 0===U||U(e)},"data-testid":"experiment-view-compare-runs-section-header",children:[V&&(0,l.Y)("div",{css:(0,r.AH)({position:"absolute",inset:0,backgroundColor:w.isDarkMode?w.colors.blue800:w.colors.blue100,border:`2px dashed ${w.colors.blue400}`,opacity:.75},"")}),(0,l.FD)("div",{style:{maxWidth:"40%",display:"flex",alignItems:"center"},children:[(0,l.Y)("div",{ref:A,style:{position:O?"absolute":"relative",visibility:O?"hidden":"visible",textOverflow:O?void 0:"ellipsis",maxWidth:"100%",overflow:"clip",paddingLeft:7,whiteSpace:"pre"},children:E}),m===e&&(0,l.Y)(d.I,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_220",autoFocus:!0,onClick:K,onMouseDown:K,onMouseUp:K,onDoubleClick:K,onChange:e=>{R(e.target.value)},value:E,css:(0,r.AH)({color:w.colors.textPrimary,fontWeight:600,padding:"1px 6px 1px 6px",background:w.colors.backgroundSecondary,minWidth:"50px",width:D+14,position:"relative",lineHeight:w.typography.lineHeightBase,maxWidth:"100%"},""),onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),h(-1),R(t.name))},onPressEnter:N,dangerouslyAppendEmotionCSS:{"&&":{minHeight:"20px !important"}},onBlur:e=>{e.relatedTarget!==Y.current&&(h(-1),g(t.uuid,E))}}),(0,l.Y)("div",{css:(0,r.AH)({padding:w.spacing.xs,position:"relative"},""),style:{visibility:O?"hidden":"visible",display:O?"none":"inherit"},children:`(${n})`}),!y&&(0,l.Y)("div",{className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_246",onClick:t=>{t.stopPropagation(),h(e)},"aria-label":"Icon label",icon:(0,l.Y)(i.PencilIcon,{})})})]}),m===e&&!y&&(0,l.Y)("div",{style:{padding:`0 ${w.spacing.xs}px`},children:(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_251",onClick:N,icon:(0,l.Y)(u.C,{}),ref:Y})}),!y&&(0,l.Y)("div",{className:"section-element-visibility-on-hover section-element-hidden-on-edit",css:S,children:(0,l.Y)(i.DragIcon,{rotate:90,style:{color:w.colors.textSecondary},ref:P,onMouseDown:()=>k(!0),onMouseLeave:()=>{k(!1)},"data-testid":"experiment-view-compare-runs-section-header-drag-handle"})}),!y&&(0,l.FD)("div",{style:{position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)",display:"flex",alignItems:"center"},children:[(0,l.FD)("div",{onClick:K,onMouseDown:K,onMouseUp:K,onDoubleClick:K,className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:[(0,l.FD)(i.DropdownMenu.Root,{modal:!1,children:[(0,l.Y)(i.DropdownMenu.Trigger,{asChild:!0,children:(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_288",icon:(0,l.Y)(i.OverflowIcon,{})})}),(0,l.FD)(i.DropdownMenu.Content,{children:[(0,l.Y)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_321",onClick:()=>{p(t.uuid,!0)},children:(0,l.Y)(x.A,{id:"CevPsF",defaultMessage:"Add section above"})}),(0,l.Y)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_327",onClick:()=>{p(t.uuid,!1)},children:(0,l.Y)(x.A,{id:"aaKoNq",defaultMessage:"Add section below"})}),(0,l.Y)(i.DropdownMenu.Item,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_333",onClick:()=>{F(!0)},children:(0,l.Y)(x.A,{id:"8XrJnT",defaultMessage:"Delete section"})})]})]}),(0,l.Y)(u.f,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_sections_runschartssectionheader.tsx_351",visible:L,onOk:()=>{c(t.uuid)},onCancel:()=>{F(!1)},title:"Delete section",children:(0,l.Y)(x.A,{id:"TPspzA",defaultMessage:"Deleting the section will permanently remove it and the charts it contains. This cannot be undone."})})]}),(0,l.Y)("div",{onClick:K,onMouseDown:K,onMouseUp:K,onDoubleClick:K,className:_()({"section-element-visibility-on-hover-and-not-drag":!f},"section-element-hidden-on-edit"),css:(0,r.AH)({alignSelf:"flex-end",marginLeft:w.spacing.xs},""),children:(0,l.Y)(C,{onAddChart:o(t.uuid),supportedChartTypes:b})})]})]})})};var R=n(62758),I=n(36118),k=n(94026),A=n(5900),Y=n(11428),D=n(15230);let T=null;const L=new WeakMap;function F(e,t){var n;return T||(T=new IntersectionObserver((e=>{for(const t of e){const e=L.get(t.target);null===e||void 0===e||e(t.isIntersecting)}}))),L.set(e,t),null===(n=T)||void 0===n||n.observe(e),()=>{var t;e&&(null===(t=T)||void 0===t||t.unobserve(e),L.delete(e))}}var K=n(76137),N=n(6922),O=n(71932),H=n(21039);const B=(0,s.memo)((e=>{var t,n;const{setElementRef:i,isInViewport:o}=(({enabled:e=!0}={})=>{const[t,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(!e);return(0,s.useEffect)((()=>{if(t){if(window.IntersectionObserver&&e)return F(t,i);i(!0)}}),[e,t]),{isInViewport:r,setElementRef:n}})(),{uuid:c,translateBy:d,onResizeStart:u,onResize:p,onResizeStop:m,...h}=e,{theme:g}=(0,a.u)(),[v]=(0,K.d7)(o,150),f=v,[y,x]=(0,s.useState)(0),[C,b]=(0,s.useState)(0),[M,w]=(0,s.useState)(!1),[_,S]=(0,s.useState)({x:0,y:0}),{setDraggedCardUuid:E,onDropChartCard:R}=(0,O.Mz)(),I=(0,s.useRef)(null),k=(0,s.useCallback)(((e,{x:t,y:n})=>{w(!0),E(null!==c&&void 0!==c?c:null),S({x:t,y:n})}),[E,c]),T=(0,s.useCallback)(((e,{x:t,y:n})=>{I.current&&(I.current.style.transform=`translate3d(${t-_.x}px, ${n-_.y}px, 0)`)}),[_]),L=(0,s.useCallback)((()=>{R(),E(null),I.current&&(I.current.style.transform=""),w(!1)}),[R,E,I]),B=(0,s.useCallback)((()=>{var e;const t=null===(e=I.current)||void 0===e?void 0:e.getBoundingClientRect();var n,r;t&&(x(null!==(n=null===t||void 0===t?void 0:t.width)&&void 0!==n?n:0),b(null!==(r=null===t||void 0===t?void 0:t.height)&&void 0!==r?r:0),null===u||void 0===u||u(t))}),[u,I]),U=(0,s.useCallback)(((e,{size:t})=>{x(t.width),b(t.height),p(t.width,t.height)}),[p]);return o?(0,l.Y)(Y.DraggableCore,{enableUserSelectHack:!1,onStart:k,onDrag:T,onStop:L,handle:`.${N.rZ}`,children:(0,l.Y)(D.Resizable,{width:y,height:C,axis:"both",onResizeStart:B,onResizeStop:m,onResize:U,handle:(0,l.Y)(P,{}),children:(0,l.Y)("div",{ref:e=>{I.current=e,i(e)},style:M?{zIndex:H.K.CARD_DRAGGED,pointerEvents:"none"}:{transition:N.b7,transform:`translate3d(${null!==(t=null===d||void 0===d?void 0:d.x)&&void 0!==t?t:0}px,${null!==(n=null===d||void 0===d?void 0:d.y)&&void 0!==n?n:0}px,0)`,opacity:null!==d&&void 0!==d&&d.overflowing?0:1},children:(0,l.Y)(A.i,{...h,isInViewport:o,isInViewportDeferred:f})})})}):(0,l.Y)(N.Us,{style:{height:e.height},css:(0,r.AH)({backgroundColor:g.colors.backgroundPrimary,border:`1px solid ${g.colors.border}`,borderRadius:g.general.borderRadiusBase},""),ref:i})})),P=(0,s.forwardRef)(((e,t)=>{const{theme:n}=(0,a.u)();return(0,l.Y)("div",{ref:t,...e,"data-testid":"draggable-card-resize-handle",css:(0,r.AH)({position:"absolute",bottom:0,right:0,cursor:"se-resize",lineHeight:0,padding:n.spacing.xs,color:n.colors.actionDefaultIconDefault},""),children:(0,l.Y)("svg",{width:"8",height:"8",viewBox:"0 0 8 8",children:(0,l.Y)("path",{d:"M6 6V0H8V8H0V6H6Z",fill:"currentColor"})})})}));var U={name:"b98nv4",styles:"position:absolute;inset:0"};const z=({x:e,y:t,width:n,height:i})=>{const{theme:o}=(0,a.u)();return(0,l.FD)(l.FK,{children:[(0,l.Y)("div",{css:U}),(0,l.Y)("div",{css:(0,r.AH)({position:"absolute",backgroundColor:o.colors.actionDefaultBackgroundHover,borderStyle:"dashed",borderColor:o.colors.actionDefaultBorderDefault,pointerEvents:"none",borderRadius:o.general.borderRadiusBase,borderWidth:2,inset:0,zIndex:H.K.CARD_PREVIEW},""),style:{transform:`translate3d(${e}px, ${t}px, 0)`,width:n,height:i}})]})};const V=[300,330,360,400,500],G=Symbol("placeholder");var j={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},W={name:"1ezujoe",styles:"display:flex;justify-content:center;min-height:160px"};const $=(0,s.memo)((({cardsConfig:e,sectionConfig:t,chartRunData:n,sectionId:o,hideEmptyCharts:c,...d})=>{var u,p;const{theme:m}=(0,a.u)(),h=(0,k.Ub)(`(max-width: ${m.responsive.breakpoints.md}px)`)?1:null!==(u=t.columns)&&void 0!==u?u:3,g=null!==(p=t.cardHeight)&&void 0!==p?p:360,v=(0,s.useRef)(null),{draggedCardUuid:f,isDragging:y}=(0,O.GP)(),{setTargetSection:C,setTargetPosition:b,onSwapCards:M}=(0,O.Mz)(),w=(0,R.g_)(),_=(0,s.useCallback)((e=>{w((t=>{var n,r;return(null===(n=t.compareRunSections)||void 0===n?void 0:n.find((e=>e.uuid===o)))?{...t,compareRunSections:null===(r=t.compareRunSections)||void 0===r?void 0:r.map((t=>t.uuid===o?{...t,columns:e}:t))}:t}))}),[o,w]),S=(0,s.useCallback)((e=>{w((t=>{var n,r;return(null===(n=t.compareRunSections)||void 0===n?void 0:n.find((e=>e.uuid===o)))?{...t,compareRunSections:null===(r=t.compareRunSections)||void 0===r?void 0:r.map((t=>t.uuid===o?{...t,cardHeight:e}:t))}:t}))}),[o,w]),E=(0,s.useRef)(0),[A,Y]=(0,s.useState)(null),[D,T]=(0,s.useState)(null);E.current=e.length;const L=f?A:null,F=(0,s.useCallback)((t=>{var n,r;const i=m.spacing.sm,o=Math.ceil(e.length/h),a=Math.floor(t/h),s=t%h,l=h-1,c=s,d=a,u=null===(n=v.current)||void 0===n?void 0:n.getBoundingClientRect();return{overflowing:a>=o,row:a,col:s,x:s*(((null!==(r=null===u||void 0===u?void 0:u.width)&&void 0!==r?r:0)-l*i)/h)+c*i,y:a*g+d*i}}),[h,g,m,e.length]),K=(0,s.useMemo)((()=>e.filter((e=>!c||!(0,I.Cs)(n,e)))),[e,n,c]),H=(0,s.useMemo)((()=>{if(!f||null===L)return{};const e={},t=K.slice(),n=K.findIndex((e=>e.uuid===f)),r=L;-1!==n?(t.splice(n,1),t.splice(r,0,K[n])):t.splice(r,0,G);for(const i of K){const n=t.indexOf(i),r=K.indexOf(i),o=F(r),a=F(n);if(a.x===o.x&&a.y===o.y)continue;const s=a.x-o.x,l=a.y-o.y;i.uuid&&(e[i.uuid]={x:s,y:l,overflowing:a.overflowing})}return e}),[f,L,K,F]),P=(0,s.useMemo)((()=>{var e,t;if(null===L)return null;if(0===K.length)return{x:0,y:0,width:"100%",height:"100%"};const{x:n,y:r}=F(L),i=h-1,o=null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect();return{x:n,y:r,width:((null!==(t=null===o||void 0===o?void 0:o.width)&&void 0!==t?t:0)-i*m.spacing.sm)/h,height:g}}),[L,F,h,g,m,K.length]),U=(0,s.useCallback)((e=>{if(!y()||!v.current)return;const t=v.current.getBoundingClientRect(),n=Math.ceil(E.current/h);C(o);const r=Math.floor((e.clientY-t.top)/t.height*n)*h+Math.floor((e.clientX-t.left)/t.width*h);Y(r),b(r)}),[h,y,o,C,b]),[$,q]=(0,s.useState)([]),X=(0,s.useRef)(null),Q=(0,s.useRef)(null),J=(0,s.useCallback)((e=>{var t;const n=null===(t=v.current)||void 0===t?void 0:t.getBoundingClientRect();n&&(T({x:e.left-n.left,y:e.top-n.top,width:e.width,height:e.height}),q(((e,t=8)=>[1,2,3,4,5].map((n=>({cols:n,width:(e-(n-1)*t)/n}))))(n.width)))}),[]),Z=(0,s.useCallback)((()=>{var e,t;_(null!==(e=X.current)&&void 0!==e?e:h),S(null!==(t=Q.current)&&void 0!==t?t:g),T(null)}),[g,h,S,_]),ee=(0,s.useCallback)(((e,t)=>{const n=$.reduce(((t,n)=>Math.abs(n.width-e)<Math.abs(t.width-e)?n:t)),r=V.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e));X.current=n.cols,Q.current=r,T((e=>e?e.width!==n.width||e.height!==r?{...e,width:n.width,height:r}:e:null))}),[$]);return(0,l.FD)("div",{ref:v,css:["position:relative;",K.length>0&&{display:"grid",gap:m.spacing.sm},""],style:{gridTemplateColumns:"repeat("+h+", 1fr)",...f&&{[N.H8]:"transform 0.1s"}},"data-testid":"draggable-chart-cards-grid",onMouseMove:U,onMouseLeave:()=>{Y(null)},children:[(f||D)&&(0,l.Y)(r.mL,{styles:j}),0===K.length&&(0,l.Y)("div",{css:W,children:(0,l.Y)(i.Empty,{title:(0,l.Y)(x.A,{id:"9TOU1G",defaultMessage:"No charts in this section"}),description:(0,l.Y)(x.A,{id:"9wWapn",defaultMessage:"Click 'Add chart' or drag and drop to add charts here."})})}),K.map(((e,t,r)=>{var i,o,a,s;return(0,l.Y)(B,{uuid:null!==(i=e.uuid)&&void 0!==i?i:"",translateBy:H[null!==(o=e.uuid)&&void 0!==o?o:""],onResizeStart:J,onResizeStop:Z,onResize:ee,cardConfig:e,chartRunData:n,onReorderWith:M,index:t,height:g,canMoveDown:Boolean(r[t+1]),canMoveUp:Boolean(r[t-1]),previousChartUuid:null===(a=r[t-1])||void 0===a?void 0:a.uuid,nextChartUuid:null===(s=r[t+1])||void 0===s?void 0:s.uuid,hideEmptyCharts:c,...d},e.uuid)})),P&&(0,l.Y)(z,{...P}),D&&(0,l.Y)(z,{...D})]})})),q=({sectionId:e,sectionCharts:t,reorderCharts:n,insertCharts:r,isMetricHistoryLoading:i,chartData:o,startEditChart:a,removeChart:s,groupBy:c,sectionIndex:d,setFullScreenChart:u,autoRefreshEnabled:p,hideEmptyCharts:m,globalLineChartConfig:h,sectionConfig:g})=>(0,l.Y)($,{sectionConfig:g,cardsConfig:t,chartRunData:o,onStartEditChart:a,onRemoveChart:s,setFullScreenChart:u,sectionId:e,groupBy:c,autoRefreshEnabled:p,hideEmptyCharts:m,globalLineChartConfig:h});var X=n(7204),Q=n(9133);const J=e=>{if(e.type===o.zL.BAR){const t=e;return t.dataAccessKey?[t.metricKey,t.dataAccessKey]:[t.metricKey]}if(e.type===o.zL.LINE){const t=e;return(0,Q.isArray)(t.selectedMetricKeys)?t.selectedMetricKeys:[t.metricKey]}if(e.type===o.zL.SCATTER){const t=e;return[t.xaxis.key.toLowerCase(),t.yaxis.key.toLowerCase()]}if(e.type===o.zL.PARALLEL){const t=e;return[...t.selectedMetrics,...t.selectedParams]}{const t=e;return[t.xaxis.key,t.yaxis.key,t.zaxis.key]}},Z=({compareRunSections:e,compareRunCharts:t,reorderCharts:n,insertCharts:d,chartData:p,isMetricHistoryLoading:m=!1,autoRefreshEnabled:h=!1,startEditChart:g,removeChart:v,addNewChartCard:f,search:y,groupBy:C,supportedChartTypes:b,hideEmptyCharts:M,setFullScreenChart:w=()=>{},globalLineChartConfig:_,noRunsSelectedEmptyState:S})=>{const I=(0,R.g_)(),[k,A]=(0,s.useState)(-1),{theme:Y}=(0,a.u)(),D=(0,s.useMemo)((()=>(e||[]).flatMap((e=>e.display?[e.uuid]:[]))),[e]),T=(0,s.useCallback)((e=>{I((t=>{const n=(t.compareRunSections||[]).map((t=>{const n=t.uuid,r="string"===typeof e&&n===e||Array.isArray(e)&&e.includes(n);return{...t,display:r}}));return{...t,compareRunSections:n}}))}),[I]),L=(0,s.useCallback)((e=>{I((t=>{const n=(t.compareRunCharts||[]).filter((t=>t.isGenerated||t.metricSectionId!==e)).map((t=>t.isGenerated&&t.metricSectionId===e?{...t,deleted:!0}:t)),r=(t.compareRunSections||[]).slice().filter((t=>t.uuid!==e));return{...t,compareRunCharts:n,compareRunSections:r,isAccordionReordered:!0}}))}),[I]),F=(0,s.useCallback)(((e,t)=>{let n=-1;return I((r=>{const i=[...r.compareRunSections||[]];n=i.findIndex((t=>t.uuid===e));const o={name:"",uuid:(0,X.yk)(),display:!1,isReordered:!1};return n<0?i.push(o):(t||(n+=1),i.splice(n,0,o)),{...r,compareRunSections:i,isAccordionReordered:!0}})),n}),[I]),K=(0,s.useCallback)((()=>{I((e=>{const t=[...e.compareRunSections||[],{name:"",uuid:(0,X.yk)(),display:!1,isReordered:!1}];return{...e,compareRunSections:t,isAccordionReordered:!0}})),A((null===e||void 0===e?void 0:e.length)||-1)}),[I,null===e||void 0===e?void 0:e.length]),N=(0,s.useCallback)(((e,t)=>{I((n=>{const r=(n.compareRunSections||[]).map((n=>n.uuid===e?{...n,name:t}:n));return{...n,compareRunSections:r,isAccordionReordered:!0}}))}),[I]),O=(0,s.useCallback)(((e,t)=>{I((n=>{const r=(n.compareRunSections||[]).slice(),i=r.findIndex((t=>t.uuid===e)),o=r.findIndex((e=>e.uuid===t)),a=r.splice(i,1)[0];return r.splice(o,0,a),{...n,compareRunSections:r,isAccordionReordered:!0}}))}),[I]),H=(0,s.useMemo)((()=>0===p.filter((({hidden:e})=>!e)).length),[p]),{sectionsToRender:B,chartsToRender:P}=(0,s.useMemo)((()=>{if(""===y)return{sectionsToRender:e,chartsToRender:t};const n=(t||[]).filter((e=>!e.deleted&&((e,t)=>{if(t.type===o.zL.IMAGE||t.type===o.zL.DIFFERENCE)return!0;try{const n=new RegExp(e,"i");return J(t).some((e=>e.match(n)))}catch{return!0}})(y,e))),r=new Set;n.forEach((e=>{e.metricSectionId&&r.add(e.metricSectionId)}));return{sectionsToRender:(e||[]).filter((e=>r.has(e.uuid))),chartsToRender:n}}),[y,t,e]),U=""!==y;return e&&t?H?null!==S&&void 0!==S?S:(0,l.Y)("div",{css:(0,r.AH)({marginTop:Y.spacing.lg},""),children:(0,l.Y)(i.Empty,{description:(0,l.Y)(x.A,{id:"jXfgov",defaultMessage:"All runs are hidden. Select at least one run to view charts."})})}):U&&0===(null===P||void 0===P?void 0:P.length)?(0,l.FD)(l.FK,{children:[(0,l.Y)(u.S,{size:"lg"}),(0,l.Y)(i.Empty,{title:(0,l.Y)(x.A,{id:"D+UN8o",defaultMessage:"No metric charts"}),description:(0,l.Y)(x.A,{id:"gZSJbg",defaultMessage:"All charts are filtered. Clear the search filter to see hidden metric charts."})})]}):(0,l.FD)("div",{children:[(0,l.Y)(c,{activeKey:D,onActiveKeyChange:T,children:(B||[]).map(((e,t)=>{const r=(P||[]).filter((t=>{const n=t.metricSectionId;return!t.deleted&&n===e.uuid}));return(0,l.Y)(i.Accordion.Panel,{header:(0,l.Y)(E,{index:t,section:e,onDeleteSection:L,onAddSection:F,editSection:k,onSetEditSection:A,onSetSectionName:N,sectionChartsLength:r.length,addNewChartCard:f,onSectionReorder:O,isExpanded:D.includes(e.uuid),supportedChartTypes:b,hideExtraControls:U}),"aria-hidden":!D.includes(e.uuid),children:(0,l.Y)(q,{sectionId:e.uuid,sectionConfig:e,sectionCharts:r,reorderCharts:n,insertCharts:d,isMetricHistoryLoading:m,chartData:p,startEditChart:g,removeChart:v,groupBy:C,sectionIndex:t,setFullScreenChart:w,autoRefreshEnabled:h,hideEmptyCharts:M,globalLineChartConfig:_})},e.uuid)}))}),!U&&(0,l.Y)("div",{children:(0,l.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionaccordion.tsx_405",block:!0,onClick:K,icon:(0,l.Y)(i.PlusIcon,{}),style:{border:"none",marginTop:"6px"},children:(0,l.Y)(x.A,{id:"YlavFP",defaultMessage:"Add section"})})})]}):null}},43270:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r,i,o,a,s,l=n(31014);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function d({title:e,titleId:t,...n},d){return l.createElement("svg",c({width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:d,"aria-labelledby":t},n),e?l.createElement("title",{id:t},e):null,r||(r=l.createElement("path",{d:"M1 1V17H17",stroke:"#A3AEB8",strokeLinecap:"round"})),i||(i=l.createElement("path",{d:"M4.21875 3.58289C4.55663 3.58289 4.88067 3.68935 5.21469 3.73008C5.6474 3.78285 6.02137 3.96513 6.37191 4.21552C6.76902 4.49917 7.0271 4.74589 7.24101 5.18954C7.44337 5.60925 7.59378 6.06989 7.72958 6.51432C7.86002 6.94121 8.09708 7.33726 8.19153 7.77803C8.25347 8.0671 8.34514 8.32427 8.44678 8.60015C8.58028 8.96252 8.80086 9.27915 8.96667 9.62583C9.15145 10.0122 9.216 10.4461 9.34876 10.8551C9.57831 11.5623 9.91132 12.4763 10.7205 12.6731C11.4284 12.8453 12.1459 12.8845 12.8705 12.8845C13.0981 12.8845 13.3979 12.898 13.5831 12.7499C13.6402 12.7042 13.7451 12.6907 13.8164 12.6591C13.8752 12.6329 14.0919 12.5871 14.1123 12.5463",stroke:"#CCE3F2",strokeLinecap:"round"})),o||(o=l.createElement("path",{d:"M4.16162 12.9805C4.32512 12.9805 4.4895 12.9859 4.65284 12.9805C4.84076 12.9742 5.0468 12.7952 5.2099 12.707C5.62236 12.4841 5.99426 12.0648 6.24299 11.6739C6.49491 11.2781 6.8776 10.9871 7.0887 10.5649C7.27767 10.187 7.50992 9.80749 7.73691 9.45078C7.93911 9.13304 8.10211 8.77722 8.28637 8.44554C8.43088 8.18544 8.45 7.88672 8.60542 7.62768C8.94898 7.05509 9.16215 6.418 9.45873 5.82484C9.72614 5.29001 9.96898 4.82426 10.4159 4.42207C10.5753 4.27853 10.8984 4.21824 11.0995 4.14861C11.3303 4.06873 11.579 4.02714 11.8136 3.93592C12.0394 3.84807 12.2521 3.84383 12.4795 3.77386C12.6993 3.70623 12.9319 3.63713 13.1632 3.63713C13.5192 3.63713 13.9089 3.59155 14.2798 3.59155",stroke:"#CCE3F2",strokeLinecap:"round"})),a||(a=l.createElement("path",{d:"M3.79248 2.74207V13.8225",stroke:"#338ECC",strokeLinecap:"round"})),s||(s=l.createElement("path",{d:"M14.873 3.04419V13.7217",stroke:"#338ECC",strokeLinecap:"round"})))}const u=l.forwardRef(d);n.p},47790:function(){},49698:function(e,t,n){"use strict";n.d(t,{l:function(){return g}});var r=n(9133),i=n(31014);const o=/\$\{([^}]+)\}/g;var a=function(e){return e.ADD="+",e.SUBTRACT="-",e.MULTIPLY="*",e.DIVIDE="/",e.POWER="^",e.NEGATIVE_SIGN="_",e.POSITIVE_SIGN="|",e}(a||{}),s=function(e){return e.OPEN="(",e.CLOSE=")",e}(s||{}),l=function(e){return e.OPEN="{",e.CLOSE="}",e}(l||{});const c={[a.ADD]:1,[a.SUBTRACT]:1,[a.MULTIPLY]:2,[a.DIVIDE]:2,[a.POWER]:3,[a.NEGATIVE_SIGN]:4,[a.POSITIVE_SIGN]:4},d=e=>"string"===typeof e&&[a.ADD,a.SUBTRACT,a.MULTIPLY,a.DIVIDE,a.POWER].includes(e),u=e=>"string"===typeof e&&[a.NEGATIVE_SIGN,a.POSITIVE_SIGN].includes(e),p=e=>e.slice(2,-1),m=(e,t)=>{const n=e.pop();if(void 0===n)throw new Error("Invalid expression: stack is empty");if(d(n)){if(t[t.length-1]<2)throw new Error("Invalid expression: Stack has binary operator without enough operands");t[t.length-1]--}else{if(!u(n))throw new Error("Invalid expression: Stack has invalid elements");if(t[t.length-1]<1)throw new Error("Invalid expression: Stack has unary operator without enough operands")}return n},h=(e,t,n)=>{for(;e.length>0&&u((0,r.last)(e));)t.push(m(e,n))},g=()=>({compileExpression:(0,i.useCallback)(((e,t)=>{try{const n=e.replace(o,"");if(!/^[0-9+\-*/().\s^]*$/.test(n))return;const{expression:i,variables:g}=(e=>{const t=e.match(o);if(!t)return{expression:e,variables:[]};const n=(0,r.uniq)(t),i={};return n.forEach(((e,t)=>{i[e]=`\${${t}}`})),{expression:e.replace(o,(e=>e in i?i[e]:e)),variables:n.map(p)}})(e);for(const e of g)if(!t.includes(e))return;const v=i.replace(/\s/g,""),f=(e=>{const t=[],n=[],i=[0],o=()=>{i[i.length-1]++};for(let g=0;g<e.length;g++){let v=e[g];const f=0===g||d(e[g-1])||e[g-1]===s.OPEN;if(v===a.SUBTRACT&&f?v=a.NEGATIVE_SIGN:v===a.ADD&&f&&(v=a.POSITIVE_SIGN),"$"===v){let r="";if(g+1>=e.length||e[g+1]!==l.OPEN)throw new Error("Invalid expression: Variable must be followed by {");for(g++;g+1<e.length&&e[g+1]!==l.CLOSE;)r+=e[++g];g++,n.push(r),o(),h(t,n,i)}else if(/\d/.test(v)||"."===v){let r=v;for(;g+1<e.length&&(/\d/.test(e[g+1])||"."===e[g+1]);)r+=e[++g];const a=r.match(/\./g);if(a&&a.length>1)throw new Error("Invalid expression: Number has multiple decimal points");const s=parseFloat(r);o(),n.push(s),h(t,n,i)}else if(u(v))t.push(v);else if(d(v)){if(0===n.length)throw new Error("Invalid expression: Binary operator without operands");for(;t.length>0&&d((0,r.last)(t))&&(p=(0,r.last)(t),c[p]>c[v]||(0,r.last)(t)===v&&v!==a.POWER);)n.push(m(t,i));t.push(v)}else if(v===s.OPEN)t.push(v),i.push(0);else{if(v!==s.CLOSE)throw new Error("Invalid expression: Unknown character in expression");for(;t.length>0&&(0,r.last)(t)!==s.OPEN;)n.push(m(t,i));if(t.pop()!==s.OPEN)throw new Error("Invalid expression: Parenthesis mismatch");if(1!==i[i.length-1])throw new Error("Invalid expression: Parenthesis does not have exactly one operand");i.pop(),o(),h(t,n,i)}}for(var p;t.length>0;)n.push(m(t,i));if(1!==i.length||1!==i[0])throw new Error("Invalid expression: Invalid number of operands");return n})(v.replace(o,(e=>{const t=parseInt(e.slice(2,-1),10);return`\${${g[t]}}`})));return{rpn:f,variables:g,expression:e}}catch(n){return}}),[]),evaluateExpression:(e,t)=>{if(void 0!==e)try{return(e=>{const t=[];if(e.forEach((e=>{if("number"!==typeof e)if(u(e)){const n=t.pop();if("number"!==typeof n)throw new Error("Invalid expression: Unary operator without operand");switch(e){case a.NEGATIVE_SIGN:t.push(-n);break;case a.POSITIVE_SIGN:t.push(n)}}else{if(!d(e))throw new Error("Invalid expression: Unknown token in expression");{const n=t.pop(),r=t.pop();if("number"!==typeof r||"number"!==typeof n)throw new Error("Invalid expression: Binary operator without enough operands");switch(e){case a.ADD:t.push(r+n);break;case a.SUBTRACT:t.push(r-n);break;case a.MULTIPLY:t.push(r*n);break;case a.DIVIDE:t.push(r/n);break;case a.POWER:t.push(Math.pow(r,n))}}}else t.push(e)})),1!==t.length||"number"!==typeof t[0])throw new Error("Invalid expression: Invalid expression result");return t[0]})(e.rpn.map((n=>"string"===typeof n&&e.variables.includes(n)?t[n]:n)))}catch(n){return}}})},50684:function(e,t,n){"use strict";n.d(t,{H:function(){return c},W:function(){return l}});var r=n(31014),i=n(64596);const o={paper_bgcolor:"white",plot_bgcolor:"white"},a={width:1200,height:600},s={displaylogo:!1,modeBarButtonsToRemove:["toImage"]},l=(e,t)=>(n,r)=>(0,i.downloadImage)({data:e,layout:{...t,...o},config:s},{...a,format:n,filename:r}),c=()=>{const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(null),i=(0,r.useCallback)((t=>{e.current=t,n((t=>t||((t,n)=>{var r;return null===(r=e.current)||void 0===r?void 0:r.call(e,t,n)})))}),[]);return[t,i]}},51293:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(59403),i=n(31014),o=n(50111);const a=i.lazy((()=>Promise.all([n.e(1570),n.e(2402)]).then(n.bind(n,22402)))),s=e=>(0,o.Y)(i.Suspense,{fallback:(0,o.Y)("div",{css:e=>({display:"flex",justifyContent:"center",margin:e.spacing.md}),children:(0,o.Y)(r.S,{})}),children:(0,o.Y)(a,{...e})})},59264:function(e,t,n){"use strict";n.d(t,{J:function(){return h},X:function(){return f}});var r=n(31014),i=n(65243),o=n(75627),a=n(6922),s=n(50684),l=n(21616),c=n(35286),d=n(75145),u=n(59403),p=n(68048),m=n(50111);const h={t:24,b:48,r:0,l:4,pad:0};var g={name:"uxy5jl",styles:"flex:1;display:flex;align-items:center;overflow:hidden"},v={name:"1wcfv52",styles:"margin-right:0"};const f=({config:e,chartRunData:t,onDelete:n,onEdit:f,fullScreen:x,setFullScreenChart:C,hideEmptyCharts:b,isInViewport:M,...w})=>{var _;const S=null!==(_=e.dataAccessKey)&&void 0!==_?_:e.metricKey,E=(0,r.useMemo)((()=>t.filter((({hidden:e,metrics:t})=>!e&&t[S]))),[t,S]),R=(0,r.useMemo)((()=>!E.flatMap((({metrics:e})=>Object.keys(e))).includes(S)),[S,E]),{setTooltip:I,resetTooltip:k,selectedRunUuid:A}=(0,o.uN)(e),Y=x||M,[D,T]=(0,s.H)(),L=(0,m.Y)("div",{css:[y.barChartCardWrapper,{height:x?"100%":void 0},""],children:Y?(0,m.Y)(i.u,{runsData:E,metricKey:S,displayRunNames:!1,displayMetricKey:!1,useDefaultHoverBox:!1,margin:h,onHover:I,onUnhover:k,selectedRunUuid:A,onSetDownloadHandler:T}):null});if(x)return L;if(b&&R)return null;const F=e.datasetName?(0,m.Y)("div",{css:g,children:(0,m.FD)(u.T.Text,{title:e.metricKey,ellipsis:!0,bold:!0,children:[(0,m.Y)(p.Tag,{componentId:"mlflow.charts.bar_card_title.dataset_tag",css:v,children:e.datasetName})," ",e.metricKey]})}):null!==(K=null!==(N=null===(O=c.g[e.metricKey])||void 0===O?void 0:O.displayName)&&void 0!==N?N:e.displayName)&&void 0!==K?K:e.metricKey;var K,N,O;return(0,m.Y)(a.Ox,{onEdit:f,onDelete:n,title:F,uuid:e.uuid,dragGroupKey:a.cN.GENERAL_AREA,toggleFullScreenChart:R?void 0:()=>{var t,n;null===C||void 0===C||C({config:e,title:null!==(t=null===(n=c.g[e.metricKey])||void 0===n?void 0:n.displayName)&&void 0!==t?t:e.metricKey,subtitle:null})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:t=>{if("csv"!==t&&"csv-full"!==t)null===D||void 0===D||D(t,e.metricKey);else{const t=[...E].reverse();(0,l.LL)(t,[e.metricKey],[],e.metricKey)}},...w,children:R?(0,m.Y)(d.u,{}):L})},y={barChartCardWrapper:{overflow:"hidden"}}},59397:function(e,t,n){"use strict";n.d(t,{G:function(){return v}});var r=n(89555),i=n(9133),o=n(31014),a=n(16026),s=n(69526),l=n(88464),c=n(36118),d=n(59403),u=n(91144),p=n(50111);const m=({value:e})=>(0,p.FD)(p.FK,{children:[(0,p.Y)(s.XU,{value:e,year:"numeric"}),"-",(0,p.Y)(s.XU,{value:e,month:"2-digit"}),"-",(0,p.Y)(s.XU,{value:e,day:"2-digit"})," ",(0,p.Y)(s.ib,{value:e,hour:"numeric",hourCycle:"h24"}),":",(0,p.Y)(s.ib,{value:e,minute:"2-digit"}),":",(0,p.Y)(s.ib,{value:e,second:"2-digit",fractionalSecondDigits:3})]}),h=({value:e})=>(0,p.FD)(p.FK,{children:[(0,p.Y)(s.ib,{value:e,hour:"2-digit",hourCycle:"h23"}),":",(0,p.Y)(s.ib,{value:e,minute:"2-digit"}),":",(0,p.Y)(s.ib,{value:e,second:"2-digit",fractionalSecondDigits:3})]});var g={name:"1efi8gv",styles:"font-weight:bold"};const v=({hoverData:e})=>{const{tooltipLegendItems:t,hoveredDataPoint:n,xValue:s,xAxisKeyLabel:v}=e,{traceUuid:f,metricEntity:y}=n||{},x=(0,l.A)(),{theme:C}=(0,d.u)(),b=`${f}.${null===y||void 0===y?void 0:y.key}`,M=e.xAxisKey===c.fj.METRIC?v:x.formatMessage((0,c.fw)(e.xAxisKey));return t?(0,p.FD)("div",{children:[!(0,i.isUndefined)(s)&&(0,p.FD)("div",{css:(0,r.AH)({marginBottom:C.spacing.xs},""),children:[(0,p.Y)("span",{css:g,children:M})," ",e.xAxisKey===c.fj.TIME?(0,p.Y)(m,{value:s}):(0,u.v$)()&&e.xAxisKey===c.fj.TIME_RELATIVE?(0,p.Y)(h,{value:s}):s]}),(0,p.Y)("div",{css:(0,r.AH)({display:"grid",gridTemplateColumns:`${C.general.iconSize}px auto auto`,columnGap:C.spacing.sm,rowGap:C.spacing.sm/4,alignItems:"center"},""),children:t.map((({displayName:e,color:t,uuid:n,value:s,dashStyle:l})=>(0,p.FD)(o.Fragment,{children:[(0,p.Y)(a.Y,{color:t||"transparent",dashStyle:l}),(0,p.Y)("div",{css:(0,r.AH)({marginRight:C.spacing.md,fontSize:C.typography.fontSizeSm,color:b===n?"unset":C.colors.textPlaceholder},""),children:e}),(0,p.Y)("div",{children:!(0,i.isUndefined)(s)&&(0,p.Y)("span",{css:(0,r.AH)({fontWeight:b===n?"bold":"normal",color:b===n?"unset":C.colors.textPlaceholder},""),children:s})})]},n)))})]}):null}},62758:function(e,t,n){"use strict";n.d(t,{Ez:function(){return u},KP:function(){return m},cA:function(){return p},g_:function(){return c},iO:function(){return d},oB:function(){return l}});var r=n(31014),i=n(30152),o=n(7204),a=n(50111);const s=r.createContext((()=>{})),l=({children:e,updateChartsUIState:t})=>(0,a.Y)(s.Provider,{value:t,children:e}),c=()=>r.useContext(s),d=()=>{const e=c();return(0,r.useCallback)(((t,n)=>{e((e=>{var r,i;const o=null===(r=e.compareRunCharts)||void 0===r?void 0:r.slice(),a=null===(i=e.compareRunSections)||void 0===i?void 0:i.slice();if(!o||!a)return e;const s=o.findIndex((e=>e.uuid===t)),l=o.findIndex((e=>e.uuid===n));if(s<0||l<0)return e;const c=o[s],d=o[l],u=d.metricSectionId===c.metricSectionId,p=a.findIndex((e=>e.uuid===c.metricSectionId)),m=a.findIndex((e=>e.uuid===d.metricSectionId));a.splice(p,1,{...a[p],isReordered:!0}),a.splice(m,1,{...a[m],isReordered:!0});const h={...c};return h.metricSectionId=d.metricSectionId,o.splice(s,1),u?o.splice(l,0,h):o.splice(o.findIndex((e=>e.uuid===n)),0,h),{...e,compareRunCharts:o,compareRunSections:a}}))}),[e])},u=()=>{const e=c();return(0,r.useCallback)((t=>{const n=i.i$.serialize({...t,uuid:(0,o.yk)()});t.uuid?e((e=>{var r;return{...e,compareRunCharts:null===(r=e.compareRunCharts)||void 0===r?void 0:r.map((e=>e.uuid===t.uuid?{...n,uuid:e.uuid}:e))}})):e((e=>({...e,compareRunCharts:e.compareRunCharts&&[...e.compareRunCharts,n]})))}),[e])},p=()=>{const e=c();return(0,r.useCallback)(((t,n)=>{e((e=>{var r,i;const o=null===(r=e.compareRunCharts)||void 0===r?void 0:r.slice(),a=null===(i=e.compareRunSections)||void 0===i?void 0:i.slice();if(!o||!a)return e;const s=o.findIndex((e=>e.uuid===t));if(s<0)return e;const l=o[s],c={...l};c.metricSectionId=n;const d=a.findIndex((e=>e.uuid===l.metricSectionId)),u=a.findIndex((e=>e.uuid===n));return a.splice(d,1,{...a[d],isReordered:!0}),a.splice(u,1,{...a[u],isReordered:!0}),o.splice(s,1),o.push(c),{...e,compareRunCharts:o,compareRunSections:a}}))}),[e])},m=()=>{const e=c();return(0,r.useCallback)((t=>{e((e=>{var n,r;return{...e,compareRunCharts:t.isGenerated?null===(n=e.compareRunCharts)||void 0===n?void 0:n.map((e=>e.uuid===t.uuid?{...e,deleted:!0}:e)):null===(r=e.compareRunCharts)||void 0===r?void 0:r.filter((e=>e.uuid!==t.uuid))}}))}),[e])}},63609:function(e,t,n){"use strict";n.d(t,{e:function(){return l}});var r=n(19404),i=n(9133),o=n(8986),a=n(53962),s=n(31014);const l=({experimentIds:e,orderByAsc:t,orderByField:n,searchQuery:l,selectedFilterDatasets:c,orderByDatasetName:d,orderByDatasetDigest:u},{enabled:p=!0}={})=>{var m;const h=["SEARCH_LOGGED_MODELS",JSON.stringify(e),n,t,l,JSON.stringify(c),d,u],{data:g,isLoading:v,isFetching:f,fetchNextPage:y,refetch:x,error:C}=(0,r.q)({queryKey:h,queryFn:async({pageParam:r})=>{const s={experiment_ids:e,order_by:[{field_name:null!==n&&void 0!==n?n:"creation_time",ascending:null!==t&&void 0!==t&&t,dataset_name:d,dataset_digest:u}],page_token:r,filter:l,datasets:(0,i.isEmpty)(c)?void 0:c};return(0,o.G)((0,a.we)("ajax-api/2.0/mlflow/logged-models/search"),"POST",s)},cacheTime:0,getNextPageParam:e=>e.next_page_token,refetchOnWindowFocus:!1,retry:!1,enabled:p});return{isLoading:v,isFetching:f,data:(0,s.useMemo)((()=>null===g||void 0===g?void 0:g.pages.flatMap((e=>null===e||void 0===e?void 0:e.models)).filter(Boolean)),[g]),nextPageToken:null===(m=(0,i.last)(null===g||void 0===g?void 0:g.pages))||void 0===m?void 0:m.next_page_token,refetch:x,error:C,loadMoreResults:y}}},63617:function(e,t,n){"use strict";n.d(t,{_:function(){return d}});var r=n(89555),i=n(59403),o=n(23823),a=n(75627),s=n(5900),l=n(50111);var c={name:"1fttcpj",styles:"display:flex;flex-direction:column"};const d=({chartData:e,isMetricHistoryLoading:t=!1,groupBy:n,fullScreenChart:d,onCancel:u,tooltipContextValue:p,tooltipComponent:m,autoRefreshEnabled:h,globalLineChartConfig:g})=>{const{theme:v,getPrefixedClassName:f}=(0,i.u)();return d?(0,l.Y)(o.d,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsfullscreenmodal.tsx_53",visible:!0,onCancel:u,title:(0,l.FD)("div",{css:c,children:[d.title,(0,l.Y)("span",{css:(0,r.AH)({color:v.colors.textSecondary,fontSize:v.typography.fontSizeSm,marginRight:v.spacing.xs},""),children:d.subtitle})]}),footer:null,verticalSizing:"maxed_out",dangerouslySetAntdProps:{width:"95%"},css:(0,r.AH)({[`.${f("modal-body")}`]:{flex:1}},""),children:(0,l.Y)(a.W,{contextData:p,component:m,children:(0,l.Y)(s.i,{cardConfig:d.config,chartRunData:e,groupBy:n,index:0,sectionIndex:0,fullScreen:!0,autoRefreshEnabled:h,globalLineChartConfig:g,onRemoveChart:()=>{},onReorderCharts:()=>{},onStartEditChart:()=>{},setFullScreenChart:()=>{},canMoveDown:!1,canMoveUp:!1,onMoveDown:()=>{},onMoveUp:()=>{},onReorderWith:()=>{}})})}):null}},63779:function(){},65243:function(e,t,n){"use strict";n.d(t,{u:function(){return v}});var r=n(59403),i=n(31014),o=n(88464),a=n(79445),s=n(97604),l=n(25790),c=n(36118),d=n(23541),u=n(50684),p=n(35286),m=n(6922),h=n(50111);const g={displaylogo:!1,scrollZoom:!1,doubleClick:"autosize",showTips:!1,modeBarButtonsToRemove:["toImage"]},v=i.memo((({runsData:e,metricKey:t,className:n,margin:v=c.am,onUpdate:y,onHover:x,onUnhover:C,barWidth:b=3/4,width:M,height:w,displayRunNames:_=!0,useDefaultHoverBox:S=!0,displayMetricKey:E=!0,selectedRunUuid:R,onSetDownloadHandler:I})=>{var k,A;const Y=(0,i.useMemo)((()=>{const n=e.map((e=>e.uuid)),r=e.map((({displayName:e})=>e)),i=e.map((e=>{var n;return(0,c.jn)(null===(n=e.metrics[t])||void 0===n?void 0:n.value)})),o=e.map((e=>{var n;const r=p.g[t];var i;return r?r.valueFormatter({value:null===(i=e.metrics[t])||void 0===i?void 0:i.value}):((e,t=2)=>"number"===typeof e?e.toFixed(t):e)(null===(n=e.metrics[t])||void 0===n?void 0:n.value)})),a=e.map((e=>e.color));return[{y:n,x:i,names:r,text:o,textposition:i.map((e=>0===e?"outside":"auto")),textfont:{size:11},metrics:e.map((e=>e.metrics[t])),type:"bar",hovertemplate:S?"%{label}<extra></extra>":void 0,hoverinfo:S?"y":"none",hoverlabel:S?c.rv:void 0,width:b,orientation:"h",marker:{color:a}}]}),[e,t,b,S]),{layoutHeight:D,layoutWidth:T,setContainerDiv:L,containerDiv:F,isDynamicSizeSupported:K}=(0,c.xN)(),{formatMessage:N}=(0,o.A)(),{theme:O}=(0,r.u)(),H=(0,i.useMemo)((()=>(0,c.y)(O)),[O]),[B,P]=(0,i.useState)({width:M||T,height:w||D,hovermode:"y",margin:v,xaxis:{title:E?t:void 0,tickfont:{size:11,color:O.colors.textSecondary},tickformat:null!==(k=null===(A=p.g[t])||void 0===A?void 0:A.chartAxisTickFormat)&&void 0!==k?k:void 0},yaxis:{showticklabels:_,title:_?N({id:"+hQ+de",defaultMessage:"Run name"}):void 0,tickfont:{size:11,color:O.colors.textSecondary},fixedrange:!0},template:{layout:H}});(0,i.useEffect)((()=>{P((e=>({...e,width:M||T,height:w||D,margin:v,xaxis:{...e.xaxis,title:E?t:void 0}})))}),[T,D,v,t,M,w,E]);const{setHoveredPointIndex:U}=(0,l.pO)(F,R,e,l.Iq),z=(0,i.useCallback)((({points:e,event:t})=>{var n,r,i,o;const a=null===(n=e[0].data)||void 0===n?void 0:n.metrics[e[0].pointIndex];U(null!==(r=null===(i=e[0])||void 0===i?void 0:i.pointIndex)&&void 0!==r?r:-1);const s={xValue:e[0].x,yValue:e[0].value,index:e[0].pointIndex,metricEntity:a},l=null===(o=e[0])||void 0===o?void 0:o.label;l&&(null===x||void 0===x||x(l,t,s))}),[x,U]),V=(0,i.useCallback)((()=>{null===C||void 0===C||C(),U(-1)}),[C,U]),G=(0,s.l)(z),j=(0,i.useMemo)((()=>(0,c.eY)(e)),[e]);(0,i.useEffect)((()=>{const e={...B,yaxis:{...B.yaxis,showticklabels:!0,automargin:!0}},t=Y.map((e=>({...e,y:e.names})));null===I||void 0===I||I((0,u.W)(t,e))}),[B,I,Y]);const W=(0,h.Y)("div",{css:[c.gz.chartWrapper(O),f.highlightStyles,""],className:n,ref:L,children:(0,h.Y)(a.W,{data:Y,useResizeHandler:!K,css:c.gz.chart(O),onUpdate:y,layout:B,config:g,onHover:G,onUnhover:V,fallback:(0,h.Y)(m.Us,{})})});return(0,h.Y)(d.A,{labelData:j,children:W})})),f={highlightStyles:{".trace.bars g.point path":{transition:"var(--trace-transition)"},".trace.bars.is-highlight g.point path":{opacity:"var(--trace-opacity-dimmed-high) !important"},".trace.bars g.point.is-hover-highlight path":{opacity:"var(--trace-opacity-highlighted) !important"},".trace.bars g.point.is-selection-highlight path":{opacity:"var(--trace-opacity-highlighted) !important",stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"}}}},66117:function(e,t,n){"use strict";n.d(t,{a:function(){return g}});var r=n(59403),i=n(31014),o=n(79445),a=n(97604),s=n(25790),l=n(36118),c=n(23541),d=n(50684),u=n(6922),p=n(50111);const m={displaylogo:!1,scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},h=[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],g=i.memo((({runsData:e,xAxis:t,yAxis:n,zAxis:g,markerSize:v=10,className:f,reverseScale:y,margin:x=l.AQ,colorScale:C=h,onUpdate:b,onHover:M,onUnhover:w,width:_,height:S,useDefaultHoverBox:E=!0,selectedRunUuid:R,onSetDownloadHandler:I})=>{const{theme:k}=(0,r.u)(),{layoutHeight:A,layoutWidth:Y,setContainerDiv:D,containerDiv:T,isDynamicSizeSupported:L}=(0,l.xN)(),F=(0,i.useMemo)((()=>{const r=[],i=[],o=[],a=[],s=[];for(const l of e){var c,d,u;const{metrics:e,params:p,color:m,uuid:h,displayName:v}=l,f="METRIC"===t.type?e:p,y="METRIC"===n.type?e:p,x="METRIC"===g.type?e:p,C=(null===f||void 0===f||null===(c=f[t.key])||void 0===c?void 0:c.value)||void 0,b=(null===y||void 0===y||null===(d=y[n.key])||void 0===d?void 0:d.value)||void 0,M=(null===x||void 0===x||null===(u=x[g.key])||void 0===u?void 0:u.value)||void 0;C&&b&&M&&(r.push(C),i.push(b),o.push(M),a.push(m||k.colors.primary),s.push([h,v||h,M]))}const p=[{x:r,y:i,customdata:s,text:e.map((({displayName:e})=>e)),hovertemplate:E?(m=g.key,`<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><b>${m}:</b> %{customdata[2]:.2f}<extra></extra>`):void 0,hoverinfo:E?void 0:"none",hoverlabel:E?l.rv:void 0,type:"scatter",mode:"markers",textposition:"bottom center",marker:{size:v,color:a,line:{color:"black",width:1}}}];var m;return e.length>1&&p.unshift({x:r,y:i,z:o,type:"contour",connectgaps:!0,hoverinfo:"none",contours:{coloring:"heatmap"},colorscale:C,reversescale:y,colorbar:{tickfont:{size:11,color:k.colors.textSecondary,family:""}}}),p}),[C,y,v,e,t.type,t.key,n.type,n.key,g.type,g.key,k.colors.primary,k.colors.textSecondary,E]),K=(0,i.useMemo)((()=>(0,l.y)(k)),[k]),[N,O]=(0,i.useState)({width:_||Y,height:S||A,margin:x,xaxis:{title:t.key,tickfont:{size:11,color:k.colors.textSecondary}},yaxis:{ticks:"inside",title:{standoff:32,text:n.key},tickfont:{size:11,color:k.colors.textSecondary}},template:{layout:K}});(0,i.useEffect)((()=>{O((e=>{const r={...e,width:_||Y,height:S||A,margin:x};return r.xaxis&&(r.xaxis.title=t.key),r.yaxis&&(r.yaxis.title={standoff:32,text:n.key}),r}))}),[Y,A,x,t.key,n.key,_,S]);const{setHoveredPointIndex:H}=(0,s.pO)(T,R,e,s.nD),B=(0,i.useCallback)((({points:e})=>{var t,n;const r=e.find((({curveNumber:e})=>1===e));if(H(null!==(t=null===r||void 0===r?void 0:r.pointIndex)&&void 0!==t?t:-1),!r)return;const i=null===r||void 0===r||null===(n=r.customdata)||void 0===n?void 0:n[0];i&&(null===M||void 0===M||M(i))}),[M,H]),P=(0,i.useCallback)((()=>{null===w||void 0===w||w(),H(-1)}),[w,H]),U=(0,a.l)(B),z=(0,i.useMemo)((()=>(0,l.eY)(e)),[e]);(0,i.useEffect)((()=>{const e=F.map((e=>({...e,mode:"text+markers"})));null===I||void 0===I||I((0,d.W)(e,N))}),[N,I,F]);const V=(0,p.Y)("div",{css:[l.gz.chartWrapper(k),l.gz.scatterChartHighlightStyles,""],className:f,ref:D,children:(0,p.Y)(o.W,{data:F,useResizeHandler:!L,css:l.gz.chart(k),onUpdate:b,layout:N,config:m,onHover:U,onUnhover:P,fallback:(0,p.Y)(u.Us,{})})});return(0,p.Y)(c.A,{labelData:z,children:V})}))},71932:function(e,t,n){"use strict";n.d(t,{GP:function(){return d},Mz:function(){return u},c_:function(){return p}});var r=n(31014),i=n(90765),o=n(62758),a=n(9133),s=n(50111);const l=(0,r.createContext)({draggedCardUuid:"",targetSection:"",isDragging:()=>!1}),c=(0,r.createContext)({setDraggedCardUuid:()=>{},setTargetSection:()=>{},setTargetPosition:()=>{},onDropChartCard:()=>{},onSwapCards:()=>{}}),d=()=>(0,r.useContext)(l),u=()=>(0,r.useContext)(c),p=({children:e,visibleChartCards:t=[]})=>{const[n,d]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),m=(0,r.useRef)(null),h=(0,r.useRef)(null);m.current=n,h.current=u;const g=(0,r.useRef)(null),v=(0,r.useCallback)((e=>{g.current=e}),[]),f=(0,r.useCallback)((()=>null!==m.current),[]),y=(0,o.g_)(),x=(0,r.useCallback)(((e,t)=>{y((n=>{var r;const i=null===(r=n.compareRunCharts)||void 0===r?void 0:r.slice();if(!i)return n;const o=i.findIndex((t=>t.uuid===e)),a=i.findIndex((e=>e.uuid===t));if(o<0||a<0)return n;const s=i[o];return i.splice(o,1),i.splice(a,0,s),{...n,compareRunCharts:i}}))}),[y]),C=(0,r.useCallback)((()=>{const e=m.current,n=h.current,r=g.current;null!==e&&null!==n&&null!==r&&(d(null),y((i=>{var o,s,l,c;const d=null===(o=i.compareRunCharts)||void 0===o?void 0:o.find((t=>t.uuid===e));if(!d)return i;const u=null===(s=i.compareRunSections)||void 0===s?void 0:s.find((e=>e.uuid===(null===d||void 0===d?void 0:d.metricSectionId))),p=null===(l=i.compareRunSections)||void 0===l?void 0:l.find((e=>e.uuid===n)),m=null===(c=i.compareRunCharts)||void 0===c?void 0:c.filter((e=>e.metricSectionId===(null===u||void 0===u?void 0:u.uuid)));if(u===p){var h;const n=null===(h=i.compareRunCharts)||void 0===h?void 0:h.slice(),o=null===m||void 0===m?void 0:m.filter((e=>t.includes(e)));if(!n||!o)return i;const s=n.findIndex((t=>t.uuid===e)),l=Math.min(r,o.length-1),c=(0,a.indexOf)(n,null===o||void 0===o?void 0:o[l]);return n&&-1!==s&&-1!==c&&(n.splice(s,1),n.splice(c,0,d)),{...i,compareRunCharts:n}}{var g,v;const e=null===(g=i.compareRunCharts)||void 0===g?void 0:g.filter((e=>e.metricSectionId===n&&!e.deleted));return e&&e.splice(r,0,d),{...i,compareRunCharts:(0,a.sortBy)(i.compareRunCharts,(t=>{var n;return null!==(n=null===e||void 0===e?void 0:e.indexOf(t))&&void 0!==n?n:-1})).map((e=>e.uuid===d.uuid?{...e,metricSectionId:n}:e)),compareRunSections:null===(v=i.compareRunSections)||void 0===v?void 0:v.map((e=>e.uuid===(null===u||void 0===u?void 0:u.uuid)||e.uuid===(null===p||void 0===p?void 0:p.uuid)?{...e,isReordered:!0}:e))}}})))}),[y,t]),b=(0,r.useMemo)((()=>({draggedCardUuid:n,targetSection:u,isDragging:f})),[n,u,f]),M=(0,r.useMemo)((()=>({setDraggedCardUuid:d,setTargetSection:p,setTargetPosition:v,onDropChartCard:C,onSwapCards:x})),[C,x,v]);return(0,s.Y)(i.G,{children:(0,s.Y)(l.Provider,{value:b,children:(0,s.Y)(c.Provider,{value:M,children:e})})})}},73150:function(e,t,n){"use strict";n.d(t,{X:function(){return x}});var r=n(9133),i=n(59403),o=n(68048),a=n(88443),s=n(48624),l=n(58481),c=n(24947),d=n(36118),u=n(75627),p=n(30152),m=n(59397),h=n(91144),g=n(35286),v=n(50111);const f=(e,t,n)=>{var i,o;const{metricKey:a,xAxisKey:s}=e,l=(null===n||void 0===n||null===(i=n.metricEntity)||void 0===i?void 0:i.key)||a,c=null!==(o=null===n||void 0===n?void 0:n.yValue)&&void 0!==o?o:null===t||void 0===t?void 0:t.metrics[l].value;if((0,r.isNil)(c))return null;const u=((e,t)=>{var n,r,i;return t===d.fj.METRIC?null!==(n=null===e||void 0===e?void 0:e.xValue)&&void 0!==n?n:"":(0,h.v$)()&&t===d.fj.TIME_RELATIVE?"number"===typeof(i=null!==(r=null===e||void 0===e?void 0:e.xValue)&&void 0!==r?r:"")?i:i.split(" ")[1]||"00:00:00":null===e||void 0===e?void 0:e.xValue})(n,s);return(0,v.FD)(v.FK,{children:[n&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:[n.label,":"]})," ",u]}),(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:[l,":"]})," ",c]})]})},y=({activeRun:e,cardConfig:t,isHovering:n,hoverData:r})=>t.type===p.zL.BAR?((e,t)=>{var n,r;const{metricKey:i,dataAccessKey:o}=e,a=null!==o&&void 0!==o?o:i,s=null===t||void 0===t?void 0:t.metrics[a];if(!s)return null;const l=g.g[s.key],c=null!==(n=null===l||void 0===l?void 0:l.displayName)&&void 0!==n?n:s.key,d=null!==(r=null===l||void 0===l?void 0:l.valueFormatter({value:s.value}))&&void 0!==r?r:s.value;return(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:[c,":"]})," ",d]})})(t,e):t.type===p.zL.SCATTER?((e,t)=>{var n,r,i,o,a,s;const{xaxis:l,yaxis:c}=e,d=null!==(n=l.dataAccessKey)&&void 0!==n?n:l.key,u=null!==(r=l.dataAccessKey)&&void 0!==r?r:c.key,p=l.key,m=c.key,h="METRIC"===l.type?null===(i=t.metrics[d])||void 0===i?void 0:i.value:null===(o=t.params[d])||void 0===o?void 0:o.value,g="METRIC"===c.type?null===(a=t.metrics[u])||void 0===a?void 0:a.value:null===(s=t.params[u])||void 0===s?void 0:s.value;return(0,v.FD)(v.FK,{children:[h&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:["X (",p,"):"]})," ",h]}),g&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:["Y (",m,"):"]})," ",g]})]})})(t,e):t.type===p.zL.CONTOUR?((e,t)=>{var n,r,i,o,a,s;const{xaxis:l,yaxis:c,zaxis:d}=e,u=l.key,p=c.key,m=d.key,h="METRIC"===l.type?null===(n=t.metrics[u])||void 0===n?void 0:n.value:null===(r=t.params[u])||void 0===r?void 0:r.value,g="METRIC"===c.type?null===(i=t.metrics[p])||void 0===i?void 0:i.value:null===(o=t.params[p])||void 0===o?void 0:o.value,f="METRIC"===d.type?null===(a=t.metrics[m])||void 0===a?void 0:a.value:null===(s=t.params[m])||void 0===s?void 0:s.value;return(0,v.FD)(v.FK,{children:[h&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:["X (",u,"):"]})," ",h]}),g&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:["Y (",p,"):"]})," ",g]}),f&&(0,v.FD)("div",{css:C.value,children:[(0,v.FD)("strong",{children:["Z (",m,"):"]})," ",f]})]})})(t,e):t.type===p.zL.LINE?f(t,e,r):t.type===p.zL.PARALLEL?((e,t,n)=>{const{selectedParams:r,selectedMetrics:i}=e,o=r.map((e=>{const n=null===t||void 0===t?void 0:t.params[e];return!n||(0,v.FD)("div",{children:[(0,v.FD)("strong",{children:[n.key,":"]})," ",n.value]},e)})),a=i.map((e=>{const n=null===t||void 0===t?void 0:t.metrics[e];return!n||(0,v.FD)("div",{children:[(0,v.FD)("strong",{children:[n.key,":"]})," ",n.value]},e)}));return n?(0,v.FD)(v.FK,{children:[o.slice(0,3),(o.length>3||a.length>1)&&(0,v.Y)("div",{children:"..."}),a[a.length-1]]}):(0,v.FD)(v.FK,{children:[o,a]})})(t,e,n):null,x=({closeContextMenu:e,contextData:t,hoverData:n,chartData:r,runUuid:d,isHovering:p,mode:h})=>{var g;const{runs:f,onTogglePin:x,onHideRun:b,getDataTraceLink:M}=t,[w]=(0,c.z)(),_=null===f||void 0===f?void 0:f.find((e=>e.uuid===d));if((0,u.bL)(n)&&h===u.QS.MultipleTracesWithScanline&&p)return(0,v.Y)(m.G,{hoverData:n});const S=(0,u.bL)(n)?n.hoveredDataPoint:n;if(!_)return null;const E=_.displayName||_.uuid,R=null!==S&&void 0!==S&&S.metricEntity?` (${S.metricEntity.key})`:"";return(0,v.FD)("div",{children:[(0,v.FD)("div",{css:C.contentWrapper,children:[(0,v.FD)("div",{css:C.header,children:[(0,v.Y)("div",{css:C.colorPill,style:{backgroundColor:_.color}}),_.groupParentInfo?(0,v.Y)(i.T.Text,{children:E+R}):(0,v.Y)(s.N_,{to:null!==(g=null===M||void 0===M?void 0:M(w,d))&&void 0!==g?g:l.Ay.getRunPageRoute(w,d),target:"_blank",css:C.runLink,onClick:e,children:E+R})]}),!p&&(0,v.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_259",size:"small",onClick:e,icon:(0,v.Y)(i.C,{})})]}),(0,v.Y)(y,{isHovering:p,activeRun:_,cardConfig:r,hoverData:S}),(0,v.FD)("div",{css:C.actionsWrapper,children:[_.pinnable&&x&&(0,v.Y)(o.LegacyTooltip,{title:_.pinned?(0,v.Y)(a.A,{id:"ugm2f6",defaultMessage:"Unpin run"}):(0,v.Y)(a.A,{id:"58xhem",defaultMessage:"Click to pin the run"}),placement:"bottom",children:(0,v.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_282",size:"small",onClick:()=>{x(d),e()},icon:_.pinned?(0,v.Y)(o.PinFillIcon,{}):(0,v.Y)(o.PinIcon,{})})}),b&&(0,v.Y)(o.LegacyTooltip,{title:(0,v.Y)(a.A,{id:"eE5VIF",defaultMessage:"Click to hide the run"}),placement:"bottom",children:(0,v.Y)(i.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_302","data-testid":"experiment-view-compare-runs-tooltip-visibility-button",size:"small",onClick:()=>{b(d),e()},icon:(0,v.Y)(o.VisibleIcon,{})})})]})]})},C={runLink:e=>({color:e.colors.primary,"&:hover":{}}),actionsWrapper:{marginTop:8,display:"flex",gap:8,alignItems:"center"},header:{display:"flex",gap:8,alignItems:"center"},value:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},contentWrapper:{display:"flex",gap:8,alignItems:"center",marginBottom:12,justifyContent:"space-between",height:24},colorPill:{width:12,height:12,borderRadius:"100%"}}},73549:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r,i,o=n(31014);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}function s({title:e,titleId:t,...n},s){return o.createElement("svg",a({width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:s,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,r||(r=o.createElement("path",{d:"M4.38977 15.717L8.79655 10.8113L12.5254 14.9622L19.644 7.03772",stroke:"#338ECC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),i||(i=o.createElement("path",{d:"M1 1V21H21",stroke:"#A3AEB8",strokeLinecap:"round"})))}const l=o.forwardRef(s);n.p},73724:function(e,t,n){"use strict";n.d(t,{h:function(){return A}});var r=n(59403),i=n(9133),o=n(31014),a=n(88464),s=n(79445),l=n(97604),c=n(25790),d=n(36118),u=n(82645),p=n(23541),m=n(91144),h=n(89555),g=n(50111);const v=".main-svg .draglayer .nsewdrag",f=e=>{var t;const n=(0,i.isString)(e)&&(null===(t=e.match(/[0-9]{2}:[0-9]{2}:[0-9]{2}\.([0-9]+)/))||void 0===t?void 0:t[1]);return n?1e3*Number(`0.${n}`)%1:0};var y=n(50684),x=n(25866),C=n(30152),b=n(49698);const M=(e,t)=>t===d.fj.STEP?e.step:t===d.fj.TIME||t===d.fj.TIME_RELATIVE?e.timestamp:null;var w=n(6922);const _=({runEntry:e,metricKey:t,xAxisKey:n,selectedXAxisMetricKey:r,useDefaultHoverBox:o,lineSmoothness:a,lineShape:s,lineDash:l,displayPoints:c,displayOriginalLine:p,xAxisScaleType:m,expression:h,evaluateExpression:g})=>{var v,f,y,x,C;if(!e.metricsHistory)return{};let b,w,_=[];if(h&&g)_=(({expression:e,runEntry:t,evaluateExpression:n,xAxisKey:r})=>{const o=e.variables.map((e=>{var n;const i=null===(n=t.metricsHistory)||void 0===n?void 0:n[e];return void 0!==i?i.flatMap((e=>{const t=M(e,r);return null!==t?[t]:[]})):[]})),a=(0,i.intersection)(...o);return a.sort(((e,t)=>e-t)),a.flatMap((i=>{const o=e.variables.reduce(((e,n)=>{var o,a;const s=null===(o=t.metricsHistory)||void 0===o?void 0:o[n],l=null===s||void 0===s||null===(a=s.find((e=>M(e,r)===i)))||void 0===a?void 0:a.value;return void 0!==l&&(e[n]=l),e}),{}),a=n(e,o);return void 0!==a?[{value:a,key:e.expression,...r===d.fj.STEP||r===d.fj.METRIC?{step:i,timestamp:0}:{timestamp:i,step:0}}]:[]}))})({expression:h,runEntry:e,evaluateExpression:g,xAxisKey:n});else{if(void 0===t)return{};var E;_=null===(E=e.metricsHistory[t])||void 0===E?void 0:E.sort(((e,t)=>n===d.fj.STEP?e.step-t.step:e.timestamp-t.timestamp))}if(n===d.fj.METRIC){var A,Y;const t=new Set((null!==(A=_)&&void 0!==A?A:[]).map((({step:e})=>e))),n=k(t,e.metricsHistory[r]),i=n.map((({step:e})=>e)),o=new Set(i),a=S(null!==(Y=_)&&void 0!==Y?Y:[],i).filter((({step:e})=>o.has(e)));b=n.map((({value:e})=>e)),w=a.map((({value:e})=>(0,d.jn)(e)))}else{var D;if(b=I(_,n),w=null===(D=_)||void 0===D?void 0:D.map((({value:e})=>(0,d.jn)(e))),"log"===m){const e=b.findIndex((e=>e>0));-1!==e&&(b=b.slice(e),w=w.slice(e))}}const T=(0,d.fH)(b)?"linear":s,L=!p&&(null!==c&&void 0!==c?c:b.length<60),F=1===(null===(v=w)||void 0===v?void 0:v.length),K=p?"skip":o?void 0:"none";return{uuid:e.uuid,name:(null===(f=e.runInfo)||void 0===f?void 0:f.runName)||"",x:b,y:(0,u.mV)(null!==(y=w)&&void 0!==y?y:[],p?0:a),metricHistory:_,metricKey:t||(null===h||void 0===h?void 0:h.expression),hovertext:(null===(x=e.runInfo)||void 0===x?void 0:x.runName)||"",text:"x",textposition:"outside",textfont:{size:11},mode:F||L?"lines+markers":"lines",hovertemplate:o?R((null===(C=e.runInfo)||void 0===C?void 0:C.runName)||""):void 0,hoverinfo:K,hoverlabel:o?d.rv:void 0,type:"scatter",line:{dash:l,shape:T},marker:{color:p?(0,d.FI)(e.color,.15):e.color}}},S=(e,t)=>{const n=t.reduce(((e,t,n)=>(e[t]=n,e)),{});return e.slice().sort(((e,t)=>{var r,i;return(null!==(r=n[e.step])&&void 0!==r?r:1/0)-(null!==(i=n[t.step])&&void 0!==i?i:1/0)}))},E={displaylogo:!1,doubleClick:"autosize",scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},R=e=>`<b>${e}</b>:<br><b>%{xaxis.title.text}:</b> %{x}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>`,I=(e,t)=>{if(!e)return[];if(t===d.fj.TIME_RELATIVE){const{timestamp:t}=(0,i.minBy)(e,"timestamp")||{};return t?(0,m.v$)()?e.map((({timestamp:e})=>e-t+x.$V)):e.map((({timestamp:e})=>(e-t)/1e3)):e.map((({step:e})=>e))}if((0,m.v$)()&&t===d.fj.TIME_RELATIVE_HOURS){const{timestamp:t}=(0,i.minBy)(e,"timestamp")||{};if(t)return e.map((({timestamp:e})=>(e-t)/x.uv))}else if(t===d.fj.TIME)return e.map((({timestamp:e})=>e));return e.map((({step:e})=>e))},k=(e,t)=>t?t.filter((t=>e.has(t.step))).map((e=>({value:(0,d.jn)(e.value),step:e.step}))).sort(((e,t)=>Number(e.value)-Number(t.value))):[],A=o.memo((({runsData:e,metricKey:t,selectedMetricKeys:n,scaleType:u="linear",xAxisScaleType:M="linear",xAxisKey:R=d.fj.STEP,yAxisKey:A=C.Kb.METRIC,yAxisExpressions:D=[],selectedXAxisMetricKey:T="",lineSmoothness:L=70,className:F,margin:K=d.am,lineShape:N="linear",onUpdate:O,onHover:H,onUnhover:B,width:P,height:U,useDefaultHoverBox:z=!0,selectedRunUuid:V,xRange:G,yRange:j,lockXAxisZoom:W,fullScreen:$,displayPoints:q,onSetDownloadHandler:X,positionInSection:Q=0})=>{const{theme:J}=(0,r.u)(),{evaluateExpression:Z}=(0,b.l)(),ee=(0,o.useMemo)((()=>{let r=R;if((0,m.v$)()&&R===d.fj.TIME_RELATIVE){const o=n||[t];let a=0;e.forEach((e=>{const t=e.metricsHistory;t&&o.forEach((e=>{if(t[e]){const{timestamp:n}=(0,i.minBy)(t[e],"timestamp")||{},{timestamp:r}=(0,i.maxBy)(t[e],"timestamp")||{};if(r&&n){const e=r-n;a=Math.max(a,e)}}}))})),a>=x.B5&&(r=d.fj.TIME_RELATIVE_HOURS)}return r}),[e,n,t,R]),te=e=>{const t=_(e),n={...e,lineSmoothness:0,useDefaultHoverBox:!1,displayPoints:!1,displayOriginalLine:!0};return[t,_(n)]},ne=(0,o.useMemo)((()=>{const r=null!==n&&void 0!==n?n:[t];return e.map((e=>(0,m.Iq)()&&R!==d.fj.METRIC&&A===C.Kb.EXPRESSION?D.flatMap(((t,n)=>te({runEntry:e,expression:t,xAxisKey:ee,selectedXAxisMetricKey:T,useDefaultHoverBox:z,lineSmoothness:L,lineShape:N,lineDash:d.J2[n%d.J2.length],displayPoints:q,xAxisScaleType:M,evaluateExpression:Z}))):r.filter((t=>{var n;return!(0,i.isEmpty)(null===(n=e.metricsHistory)||void 0===n?void 0:n[t])})).flatMap(((t,n)=>te({runEntry:e,metricKey:t,xAxisKey:ee,selectedXAxisMetricKey:T,useDefaultHoverBox:z,lineSmoothness:L,lineShape:N,lineDash:d.J2[n%d.J2.length],displayPoints:q,xAxisScaleType:M}))))).flat()}),[e,N,ee,L,t,z,n,T,q,M,A,D,Z,R]),re=(0,o.useMemo)((()=>{const r=null!==n&&void 0!==n?n:[t];return e.filter((({groupParentInfo:e})=>e)).flatMap((e=>r.map((t=>(({runEntry:e,metricKey:t,lineShape:n,xAxisKey:r,selectedXAxisMetricKey:o,xAxisScaleType:a})=>{var s;if(!e.aggregatedMetricsHistory)return{};const{max:l,min:c}=e.aggregatedMetricsHistory[t];let u,p,m,h;if(r===d.fj.METRIC){if(!e.metricsHistory)return{};const t=new Set(l.map((({step:e})=>e))),n=k(t,e.metricsHistory[o]),r=n.map((e=>e.step)),i=new Set(r),a=n.map((e=>e.value));m=S(c,r).filter((({step:e})=>i.has(e))).map((({value:e})=>(0,d.jn)(e))).reverse(),h=S(l,r).filter((({step:e})=>i.has(e))).map((({value:e})=>(0,d.jn)(e))),u=a.slice().reverse(),p=a}else{const e=c.slice().reverse();if(u=I(e,r),p=I(l,r),m=e.map((({value:e})=>(0,d.jn)(e))),h=l.map((({value:e})=>(0,d.jn)(e))),"log"===a){const e=p.findIndex((e=>(0,i.isNumber)(e)&&e>0)),t=u.length-u.findIndex((e=>(0,i.isNumber)(e)&&e>0));-1!==e&&-1!==t&&(p=p.slice(e),h=h.slice(e),u=u.slice(0,t-1),m=m.slice(0,t-1))}}const g=[...u,null,...p],v=[...m,null,...h];return{name:(null===(s=e.runInfo)||void 0===s?void 0:s.runName)||"",x:g,y:v,fillcolor:(0,d.FI)(e.color,.2),hovertemplate:void 0,hoverlabel:void 0,hoverinfo:"skip",line:{color:"transparent",shape:n},fill:"tozeroy",type:"scatter"}})({runEntry:e,metricKey:t,lineShape:N,xAxisKey:ee,selectedXAxisMetricKey:T,xAxisScaleType:M})))))}),[N,t,e,n,ee,T,M]),ie=(0,o.useMemo)((()=>[...re,...ne]),[ne,re]),{layoutHeight:oe,layoutWidth:ae,setContainerDiv:se,containerDiv:le,isDynamicSizeSupported:ce}=(0,d.xN)(),{formatMessage:de}=(0,a.A)(),{setHoveredPointIndex:ue}=(0,c.pO)(le,V,ie,c.PQ,re.length),pe=((e,t,n)=>e===d.fj.TIME||(0,m.v$)()&&n===d.fj.TIME_RELATIVE?"date":e===d.fj.STEP&&"log"===t?"log":"linear")(R,M,ee),me=(0,o.useMemo)((()=>ee===d.fj.METRIC?T:de((0,d.fw)(ee))),[de,ee,T]),he=(0,o.useMemo)((()=>({tickfont:{size:11,color:J.colors.textSecondary},type:"log"===u?"log":"linear",fixedrange:W,range:j,autorange:void 0===j,tickformat:"f"})),[u,W,J,j]),ge=(0,o.useMemo)((()=>({title:me,tickfont:{size:11,color:J.colors.textSecondary},range:G,autorange:void 0===G,type:pe})),[J,me,G,pe]),[ve,fe]=(0,o.useState)({width:P||ae,height:U||oe,margin:K,xaxis:ge,yaxis:he,showlegend:!1});(0,o.useEffect)((()=>{fe((e=>{const t={...e,width:P||ae,height:U||oe,margin:K,yaxis:he,xaxis:{...e.xaxis,...ge},showlegend:!1};return(0,i.isEqual)(t,e)?e:t}))}),[ae,oe,K,ge,he,P,U,me]);const ye=(0,o.useMemo)((()=>((null===n||void 0===n?void 0:n.length)||0)>1),[n]),xe=(0,o.useCallback)((()=>{null===B||void 0===B||B(),ue(-1)}),[B,ue]),Ce=(0,o.useMemo)((()=>(0,d.y)(J)),[J]),be=ve;be.xaxis&&(be.xaxis.title=me,be.xaxis.type=pe,G&&(be.xaxis.range=G),be.xaxis.automargin=!0,be.xaxis.tickformat=(0,m.v$)()&&ee===d.fj.TIME_RELATIVE?"%H:%M:%S":void 0),be.template={layout:Ce},be.yaxis&&j&&(be.yaxis.range=j,be.yaxis.automargin=!0,be.yaxis.tickformat="f");const Me=(0,o.useMemo)((()=>(0,d.Ct)(e,n,t,A,D)),[e,n,t,A,D]),{scanlineElement:we,initHandler:_e,updateHandler:Se,onPointHover:Ee,onPointUnhover:Re}=(({onUnhover:e,onHover:t,runsData:n,plotData:r,legendLabelData:a,containsMultipleMetricKeys:s,xAxisKeyLabel:l,xAxisKey:c,disabled:d=!1,setHoveredPointIndex:u,xAxisScaleType:p="linear",positionInSection:m=0})=>{const y=(0,o.useRef)({containerLeftPixels:0,plotWidthPixels:0,plotOffsetPixels:0,lowerBoundValue:0,valueRange:0,mainContainer:null,dragLayer:null,initialized:!1}),x=(0,o.useRef)(null),C=(0,o.useRef)(void 0),b=(0,o.useMemo)((()=>(0,i.uniq)(r.map((({x:e})=>e)).flat())),[r]),[M,w]=(0,o.useState)(null),_=(0,o.useRef)(void 0),S=(0,o.useRef)(a),E=(0,o.useRef)(n),R=(0,o.useRef)(r),I=(0,o.useRef)(b),k=(0,o.useRef)(M);S.current=a,E.current=n,R.current=r,I.current=b,k.current=M;const A=(0,o.useCallback)((e=>{var t,n,r,o,a,s;const l=null===(t=e.layout.xaxis)||void 0===t||null===(n=t.range)||void 0===n?void 0:n[0],c=null===(r=e.layout.xaxis)||void 0===r||null===(o=r.range)||void 0===o?void 0:o[1];let d=(0,i.isNumber)(l)?l:new Date(null!==l&&void 0!==l?l:0).getTime(),u=(0,i.isNumber)(c)?c:new Date(null!==c&&void 0!==c?c:0).getTime();d+=f(l),u+=f(c),y.current.lowerBoundValue=null!==(a=d)&&void 0!==a?a:0,y.current.valueRange=(null!==(s=u)&&void 0!==s?s:0)-y.current.lowerBoundValue}),[]),Y=(0,o.useCallback)((()=>{const{mainContainer:e,dragLayer:t}=y.current;if(e&&t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();y.current.containerLeftPixels=n.x,y.current.plotWidthPixels=r.width,y.current.plotOffsetPixels=r.x-n.x,y.current.initialized=r.width>0}}),[]),D=(0,o.useCallback)(((e,t)=>{A(e);const n=t.querySelector(".main-svg"),r=t.querySelector(v);y.current.mainContainer=n,y.current.dragLayer=r,Y()}),[A,Y]),T=(0,o.useCallback)(((e,t)=>{w({figure:e,graphDiv:t}),D(e,t)}),[D]);(0,o.useEffect)((()=>{requestAnimationFrame((()=>{k.current&&D(k.current.figure,k.current.graphDiv)}))}),[m,D]);const L=(0,o.useCallback)((t=>{t.relatedTarget instanceof Element&&t.relatedTarget.classList.contains("dragcover")||(null===e||void 0===e||e(),x.current&&(x.current.style.display="none"))}),[e]),F=(0,o.useCallback)((({points:e})=>{var t,n;const r=e[0],i=null===r||void 0===r?void 0:r.data;if(u(null!==(t=null===r||void 0===r?void 0:r.curveNumber)&&void 0!==t?t:-1),!i)return;const o=null===(n=i.metricHistory)||void 0===n?void 0:n[r.pointIndex],a={xValue:r.x,yValue:r.y,metricEntity:o,index:r.pointIndex,label:l,traceUuid:i.uuid};C.current=a}),[l,u]),K=(0,o.useCallback)((()=>{C.current=void 0,u(-1)}),[u]),N=(0,o.useCallback)((e=>{const t=y.current,n=(e-t.plotOffsetPixels-t.containerLeftPixels)/t.plotWidthPixels;let r=t.lowerBoundValue+t.valueRange*n;return"log"===p&&(r=10**r),I.current.reduce(((e,t)=>Math.abs(t-r)<Math.abs(e-r)?t:e),I.current[0])}),[p]);(0,o.useEffect)((()=>{if(d)return;if(!M)return;A(M.figure);const e=M.graphDiv.querySelector(v),n=(0,i.throttle)((e=>{y.current.initialized||Y();const t=N(e.clientX),n=S.current.map((e=>{var n,r;const o=E.current.find((({uuid:t})=>t===e.uuid)),a=R.current.find((({uuid:t,metricKey:n})=>t===e.uuid&&e.metricKey===n));if(!a)return;const l=s?e.label:null===o||void 0===o?void 0:o.displayName,c=null===(n=a.x)||void 0===n?void 0:n.indexOf(t);if((0,i.isUndefined)(c)||-1===c)return;const d=null===(r=a.y)||void 0===r?void 0:r[c];return{displayName:l||"",value:(0,i.isNumber)(d)?d:void 0,color:null===e||void 0===e?void 0:e.color,dashStyle:null===e||void 0===e?void 0:e.dashStyle,uuid:`${e.uuid}.${e.metricKey}`}}));_.current={tooltipLegendItems:(0,i.orderBy)((0,i.compact)(n),"value","desc"),hoveredDataPoint:null===C||void 0===C?void 0:C.current,xValue:t,xAxisKey:c,xAxisKeyLabel:l}}),50,{leading:!0}),r=(0,i.throttle)(Y,50),o=e=>{var n,r;if(!_.current)return;const i=y.current,o=N(e.clientX),a=(("log"===p?Math.log10(o):o)-i.lowerBoundValue)/i.valueRange*i.plotWidthPixels;x.current&&(x.current.style.display="block",x.current.style.left=`${i.plotOffsetPixels+a}px`),null===t||void 0===t||t((null===(n=_.current)||void 0===n||null===(r=n.hoveredDataPoint)||void 0===r?void 0:r.traceUuid)||"",{x:i.containerLeftPixels+i.plotOffsetPixels+a,y:e.clientY,originalEvent:e},_.current)};return e?(e.addEventListener("pointermove",n),e.addEventListener("pointermove",o),window.addEventListener("resize",r),e.addEventListener("pointerleave",L),()=>{e.removeEventListener("pointermove",n),e.removeEventListener("pointermove",o),e.removeEventListener("pointerleave",L),window.removeEventListener("resize",r)}):()=>{}}),[L,M,A,t,s,C,d,c,l,p,N,Y]);const O=d?null:(0,g.Y)("div",{css:(0,h.AH)({top:0,width:0,borderLeft:"1px dashed rgba(0,0,0,0.5)",height:"100%",position:"absolute",pointerEvents:"none"},""),ref:x,style:{display:"none"}});return{updateHandler:D,initHandler:T,scanlineElement:O,onPointHover:F,onPointUnhover:K}})({legendLabelData:Me,plotData:ne,runsData:e,containsMultipleMetricKeys:ye,onHover:H,onUnhover:xe,xAxisKeyLabel:me,xAxisKey:ee,xAxisScaleType:R===d.fj.STEP?M:"linear",setHoveredPointIndex:ue,positionInSection:Q}),Ie=(0,l.l)(Ee);(0,o.useEffect)((()=>{const e=((null===n||void 0===n?void 0:n.length)||0)>1?ie.map((e=>e.metricKey?{...e,name:`${e.name} (${e.metricKey})`}:e)):ie,t={...ve,showlegend:!0,legend:{orientation:"h"}};null===X||void 0===X||X((0,y.W)(e,t))}),[ve,X,ie,null===n||void 0===n?void 0:n.length]);const ke=(0,g.FD)("div",{css:[d.gz.chartWrapper(J),Y.highlightStyles,""],className:F,ref:se,children:[(0,g.Y)(s.W,{data:ie,useResizeHandler:!ce,css:d.gz.chart(J),onUpdate:(e,t)=>{Se(e,t),null===O||void 0===O||O(e,t)},layout:be,config:E,onHover:Ie,onUnhover:Re,onInitialized:_e,fallback:(0,g.Y)(w.Us,{})}),we]});return(0,g.Y)(p.A,{labelData:Me,fullScreen:$,children:ke})})),Y={highlightStyles:{".scatterlayer g.trace":{transition:"var(--trace-transition)"},".scatterlayer.is-highlight g.trace:not(.is-band)":{opacity:"var(--trace-opacity-dimmed-low) !important"},".scatterlayer g.trace.is-hover-highlight:not(.is-band)":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight:not(.is-band)":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight path.point":{stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"},".scatterlayer.is-highlight g.trace.is-band:not(.is-band-highlighted)":{opacity:"var(--trace-opacity-dimmed) !important"}}}},74035:function(e,t,n){"use strict";n.d(t,{h:function(){return m}});var r,i,o,a,s,l,c,d=n(31014);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(null,arguments)}function p({title:e,titleId:t,...n},p){return d.createElement("svg",u({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:p,"aria-labelledby":t},n),e?d.createElement("title",{id:t},e):null,r||(r=d.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),i||(i=d.createElement("circle",{cx:3.98301,cy:12.4746,r:1.35593,fill:"#338ECC"})),o||(o=d.createElement("ellipse",{cx:9.40684,cy:10.8475,rx:1.35593,ry:1.35593,fill:"#338ECC"})),a||(a=d.createElement("circle",{cx:5.6102,cy:8.1356,r:1.35593,fill:"#338ECC",fillOpacity:.25})),s||(s=d.createElement("circle",{cx:9.40684,cy:6.50852,r:1.35593,fill:"#338ECC"})),l||(l=d.createElement("ellipse",{cx:13.7457,cy:5.96616,rx:1.35593,ry:1.35593,fill:"#338ECC",fillOpacity:.25})),c||(c=d.createElement("ellipse",{cx:16.4576,cy:2.46128,rx:1.35593,ry:1.35593,fill:"#338ECC"})))}const m=d.forwardRef(p);n.p},75145:function(e,t,n){"use strict";n.d(t,{u:function(){return d}});var r=n(89555),i=n(59403),o=n(68048),a=n(21879),s=n(31014),l=n(88443),c=n(50111);const d=()=>{const e=(0,a.e)(),{theme:t}=(0,i.u)(),n=(0,s.useCallback)((()=>{e((e=>({...e,hideEmptyCharts:!0})))}),[e]);return(0,c.Y)("div",{css:(0,r.AH)({flex:1,display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:t.spacing.lg,paddingRight:t.spacing.lg},""),children:(0,c.Y)(o.Empty,{description:(0,c.Y)(l.A,{id:"VAUHXW",defaultMessage:"No chart data available for the currently visible runs. Select other runs or <link>hide empty charts.</link>",values:{link:e=>(0,c.Y)(i.T.Link,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-charts_components_runschartsnodatafoundindicator.tsx_31",onClick:n,children:e})}}),image:(0,c.Y)(o.NoIcon,{})})})}},75627:function(e,t,n){"use strict";n.d(t,{QS:function(){return s},W:function(){return m},bL:function(){return d},uN:function(){return h}});var r=n(31014),i=n(25790),o=n(21039),a=n(50111);let s=function(e){return e[e.Simple=1]="Simple",e[e.MultipleTracesWithScanline=2]="MultipleTracesWithScanline",e}({});const l=r.createContext(null);let c=function(e){return e[e.HIDDEN=0]="HIDDEN",e[e.HOVER=1]="HOVER",e[e.VISIBLE=2]="VISIBLE",e}({});const d=e=>e&&"tooltipLegendItems"in e,u=e=>{if(null===e||!(e instanceof Element))return null;if(e instanceof HTMLElement)return e;let t=e;for(;t&&!(t instanceof HTMLElement);)t=t.parentElement;return t};var p={name:"13udsys",styles:"height:100%"};const m=({className:e,children:t,contextData:n,component:o,hoverOnly:d=!1})=>{const m=(0,r.useRef)(null),h=(0,r.useRef)(null),v=(0,r.useRef)({x:0,y:0}),f=(0,r.useRef)({x:0,y:0}),[y,x]=(0,r.useState)(s.Simple),[C,b]=(0,r.useState)(c.HIDDEN),[M,w]=(0,r.useState)(null),[_,S]=(0,r.useState)(""),[E,R]=(0,r.useState)(null),I=(0,r.useRef)(null),k=(0,r.useRef)(C),A=(0,r.useRef)(_),Y=(0,r.useRef)(M),D=(0,r.useRef)(E),{highlightDataTrace:T}=(0,i.ZY)(),L=(0,r.useCallback)(((e=!1)=>{if(!h.current||!m.current)return;let t=y===s.MultipleTracesWithScanline?f.current.x:v.current.x,n=v.current.y;const r=h.current,i=m.current.getBoundingClientRect();y===s.MultipleTracesWithScanline&&(t-=i.x,n-=i.y),h.current.style.left="0px",h.current.style.top="0px",h.current.style.transform=`translate3d(${t+1}px, ${n+1}px, 0)`;const o=()=>{const e=r.getBoundingClientRect();t+e.width>=i.width&&(t-=e.width),n+e.height>=i.height&&(n-=e.height),r.style.transform=`translate3d(${t+1}px, ${n+1}px, 0)`};e?requestAnimationFrame(o):o()}),[y]);(0,r.useEffect)((()=>{k.current=C}),[C]);const F=(0,r.useCallback)(((e,t)=>{var n;const r=e.getBoundingClientRect(),i=(null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect())||{left:0,top:0};return{x:t.offsetX+(r.left-i.left),y:t.offsetY+(r.top-i.top)}}),[]),K=(0,r.useCallback)((e=>{if(k.current===c.HOVER&&h.current&&m.current){I.current=null;const t=u(e.target);t&&(v.current=F(t,e.nativeEvent),L())}}),[L,F]),N=(0,r.useCallback)(((e,t,n,r,i)=>{var o;A.current=e,Y.current=n,D.current=i,k.current!==c.VISIBLE&&(w(n),!e&&null!==(o=I.current)&&void 0!==o&&o.runUuid||(t===s.MultipleTracesWithScanline&&(f.current.x=(null===r||void 0===r?void 0:r.x)||0),x(t),S((t=>(i&&R(i),k.current===c.HIDDEN||k.current===c.HOVER&&e!==t?(b(c.HOVER),e):t)))))}),[]),O=(0,r.useCallback)((e=>{d||0===e.button&&A.current&&(I.current={x:e.pageX,y:e.pageY,runUuid:A.current})}),[d]),H=(0,r.useCallback)((e=>{if(d)return;if(I.current&&(()=>{var t;return(null===(t=I.current)||void 0===t?void 0:t.runUuid)&&Math.abs(e.pageX-I.current.x)<5&&Math.abs(e.pageY-I.current.y)<5})()){if(k.current===c.VISIBLE){S(I.current.runUuid),R(D.current);const t=u(e.nativeEvent.target);t&&(v.current=F(t,e.nativeEvent),L(!0))}else b(c.VISIBLE),L(!0);e.stopPropagation()}I.current=null}),[L,d,F]),B=(0,r.useCallback)((()=>b(c.HIDDEN)),[]);(0,r.useLayoutEffect)((()=>{if(!m.current)return;const e=m.current.getRootNode(),t=e=>{var t;if(k.current!==c.VISIBLE)return;const n=u(e.target);if(!n)return;n instanceof HTMLElement&&(null===h||void 0===h?void 0:h.current)instanceof HTMLElement&&h.current.contains(n)||null!==(t=I.current)&&void 0!==t&&t.runUuid||b(c.HIDDEN)};return e.addEventListener("click",t,{capture:!0}),()=>{e.removeEventListener("click",t,{capture:!0})}}),[F,L]);const P=(0,r.useCallback)((()=>{var e;A.current="",null!==(e=I.current)&&void 0!==e&&e.runUuid||k.current===c.VISIBLE||(S(""),b(c.HIDDEN))}),[]),U=(0,r.useCallback)(((e=!1)=>{A.current="",S(""),b(c.HIDDEN)}),[]),z=(0,r.useMemo)((()=>C!==c.VISIBLE?null:_),[C,_]);(0,r.useEffect)((()=>T(z,{source:i.WF.CHART,shouldBlock:Boolean(z)})),[T,z]);const V=(0,r.useMemo)((()=>({updateTooltip:N,resetTooltip:P,destroyTooltip:U,selectedRunUuid:z,closeContextMenu:B})),[N,P,U,z,B]),G=C!==c.HIDDEN&&(y===s.MultipleTracesWithScanline||""!==_);return(0,a.FD)(l.Provider,{value:V,children:[(0,a.Y)("div",{onMouseMove:K,onMouseDownCapture:O,onClickCapture:H,css:p,children:t}),(0,a.Y)("div",{css:g.contextMenuContainer,className:e,ref:m,children:G&&(0,a.Y)("div",{ref:h,css:g.contextMenuWrapper,"data-testid":"tooltip-container",style:{userSelect:C===c.HOVER?"none":"unset",pointerEvents:C===c.HOVER?"none":"all"},children:(0,a.Y)(o,{runUuid:_,hoverData:E,chartData:M,contextData:n,isHovering:C===c.HOVER,closeContextMenu:B,mode:y})})})]})},h=(e,t=s.Simple)=>{const n=(0,r.useContext)(l);if(!n)throw new Error("You must invoke useRunsChartsTooltip() in a component being ancestor of <RunsChartsTooltipWrapper />!");const{updateTooltip:o,resetTooltip:a,selectedRunUuid:c,closeContextMenu:d,destroyTooltip:u}=n,{highlightDataTrace:p}=(0,i.ZY)();return{setTooltip:(0,r.useCallback)(((n="",r,a)=>{o(n,t,e,r,a),p(n,{source:i.WF.CHART})}),[o,e,t,p]),resetTooltip:(0,r.useCallback)((()=>{a(),p(null)}),[a,p]),selectedRunUuid:c,closeContextMenu:d,destroyTooltip:u}},g={contextMenuContainer:{overflow:"hidden",top:0,left:0,width:"100%",height:"100%",position:"fixed",pointerEvents:"none",zIndex:o.K.TOOLTIP_CONTAINER},contextMenuWrapper:e=>({zIndex:o.K.TOOLTIP,position:"absolute",padding:e.spacing.sm,backgroundColor:e.colors.backgroundPrimary,border:`1px solid ${e.colors.border}`,left:-999,top:-999,borderRadius:e.general.borderRadiusBase,boxShadow:e.general.shadowLow}),overlayElement:()=>({"&::after":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"transparent"}})}},76758:function(e,t,n){"use strict";n.d(t,{F:function(){return d}});var r=n(89555),i=n(59403),o=n(68048),a=n(70169),s=n(50111);const l=()=>{const{theme:e}=(0,i.u)();return(0,s.Y)(o.XCircleIcon,{css:(0,r.AH)({color:e.colors.textValidationDanger},"")})},c=()=>{const{theme:e}=(0,i.u)();return(0,s.Y)(o.CheckCircleIcon,{css:(0,r.AH)({color:e.colors.textValidationSuccess},"")})},d=({status:e})=>{switch(e){case"FAILED":case"KILLED":return(0,s.Y)(l,{});case"FINISHED":return(0,s.Y)(c,{});case"SCHEDULED":case"RUNNING":return(0,s.Y)(a.C,{});default:return null}}},77198:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var r,i,o,a,s,l=n(31014);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(null,arguments)}function d({title:e,titleId:t,...n},d){return l.createElement("svg",c({width:18,height:16,viewBox:"0 0 18 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:d,"aria-labelledby":t},n),e?l.createElement("title",{id:t},e):null,r||(r=l.createElement("path",{d:"M1 0.813599V15.1865H17",stroke:"#A3AEB8",strokeLinecap:"round"})),i||(i=l.createElement("rect",{x:3.16943,y:10.5763,width:2.16949,height:3.25424,fill:"#338ECC"})),o||(o=l.createElement("rect",{x:6.42371,y:5.15259,width:2.16949,height:8.67797,fill:"#338ECC"})),a||(a=l.createElement("rect",{x:9.67798,y:8.40686,width:2.16949,height:5.42373,fill:"#338ECC"})),s||(s=l.createElement("rect",{x:12.9323,y:1.89832,width:2.16949,height:11.9322,fill:"#338ECC"})))}const u=l.forwardRef(d);n.p},77199:function(){},81850:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var r=n(31014),i=n(4877),o=n.n(i),a=n(36118),s=n(62862),l=n(9133);const c=({ungroupedRunsData:e,enabled:t,aggregateFunction:n,metricKeys:i,sampledDataResultsByRunUuid:c,selectedXAxisMetricKey:d,ignoreOutliers:u})=>(0,r.useMemo)((()=>{if(!t||!n)return e;return[...e.filter((({groupParentInfo:e})=>e)).map((e=>{const t={};i.forEach((n=>{var r;o()(e.groupParentInfo,"groupParentInfo should be defined");const i=null!==(r=e.groupParentInfo.runUuidsForAggregation)&&void 0!==r?r:e.groupParentInfo.runUuids;let p;if((0,l.isNil)(d)){const e=(0,l.compact)(i.flatMap((e=>{var t,r;const i=null===(t=c[e])||void 0===t||null===(r=t[n])||void 0===r?void 0:r.metricsHistory;return u?i?(0,a.c1)(i):void 0:i}))),t=(0,l.uniq)(e.map((e=>e.step))).sort(((e,t)=>e-t));p=(0,s.yu)(t,n,e)}else p=(0,s.nN)((0,l.pick)(c,i),n,d,u);t[n]=p}));const r=i.reduce(((e,r)=>{const i=t[r][n];return i&&i.length>0&&(e[r]=i),e}),{});return{...e,metricsHistory:r,aggregatedMetricsHistory:t}})),...e.filter((({belongsToGroup:e})=>!1===e))]}),[i,c,e,t,n,d,u])},83028:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(25866);const i=()=>({searchFilter:"",orderByKey:r.XM,orderByAsc:r.z$,startTime:r.xx,lifecycleFilter:r.ae,datasetsFilter:[],modelVersionFilter:r.eR})},90765:function(e,t,n){"use strict";n.d(t,{G:function(){return p},S:function(){return d}});var r=n(42380),i=n(31014),o=n(7781),a=n(95177),s=n(6993),l=n(4591),c=n(50111);const d=({dragGroupKey:e,dragKey:t,onDrop:n,disabled:r=!1})=>{const s=(0,i.useRef)(n);s.current=n;const[{isOver:l,draggedItem:c},d]=(0,o.H)({canDrop:()=>!r,accept:`dnd-${e}`,drop:({key:e},n)=>{e===t||n.didDrop()||s.current(e,t)},collect:e=>({isOver:e.isOver({shallow:!0}),draggedItem:e.getItem()})},[r,e,t]),[{isDragging:u},p,m]=(0,a.i)({canDrag:()=>!r,type:`dnd-${e}`,item:{key:t,groupKey:e},collect:e=>({isDragging:e.isDragging()})},[r,e,t]);return{dropTargetRef:d,dragHandleRef:p,dragPreviewRef:m,isDragging:u,isOver:l,isDraggingOtherGroup:Boolean(c&&c.groupKey!==e)}};var u={name:"49aokf",styles:"display:contents"};const p=({children:e})=>{const t=(0,i.useRef)(null),[n,o]=(0,i.useState)(null);return(0,i.useLayoutEffect)((()=>{const e=t.current,n=(0,r.b)(l.t2,void 0,{rootElement:e});return o(n),()=>{n.getBackend().teardown()}}),[]),(0,c.Y)("div",{css:u,ref:t,children:n&&(0,c.Y)(s.Q,{manager:n,children:e})})}},97604:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(31014);const i=e=>{const t=(0,r.useRef)(e);return(0,r.useEffect)((()=>{t.current=e}),[e]),e=>{t.current(e)}}},99061:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});const r=({data:e,selectedImageKeys:t})=>{const n=e.reduce(((e,n)=>{for(const r of Object.keys(n.images))if(null!==t&&void 0!==t&&t.includes(r)){const t=n.images[r];for(const n of Object.values(t))void 0!==n.step&&(e[n.step]={style:{display:"none"},label:""})}return e}),{});return{stepMarks:n,maxMark:Math.max(...Object.keys(n).map(Number)),minMark:Math.min(...Object.keys(n).map(Number))}}},99790:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var r,i,o,a,s=n(31014);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(null,arguments)}function c({title:e,titleId:t,...n},c){return s.createElement("svg",l({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:c,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,r||(r=s.createElement("rect",{x:.5,y:.5,width:15,height:15,stroke:"#C4C4C4"})),i||(i=s.createElement("line",{x1:8.5,y1:.800049,x2:8.5,y2:16,stroke:"#C4C4C4"})),o||(o=s.createElement("line",{x1:16,y1:5.69995,x2:-2.63656e-8,y2:5.69995,stroke:"#C4C4C4"})),a||(a=s.createElement("line",{x1:16,y1:10.9,x2:-2.63656e-8,y2:10.9,stroke:"#C4C4C4"})))}const d=s.forwardRef(c);n.p}}]);
//# sourceMappingURL=7681.77f6cc9c.chunk.js.map